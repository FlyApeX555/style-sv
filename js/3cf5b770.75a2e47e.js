/*! For license information please see 3cf5b770.75a2e47e.js.LICENSE.txt */
function e(){"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[24238],{415622:(e,t,i)=>{i.d(t,{AdBannerV2:()=>S});var r=i(474848),n=i(87871),o=i(220208),a=i(296540),s=i(250879),l=i(963302),d=i(627620),c=i(332886),u=i(706126),h=i(417408),p=i(507846),m=i(478108),f=i(424555),b=i(333702),v=i(796827),g=i(107287),_=i(872524),y=i(405189),w=i(64395),A=i(621999);const S=({bannerAdParams:e,onAdReady:t,onAdShown:i,bannerData:S,onUserClick:P,bannerAnimationEnabled:E,onUpdateDimensions:k,BannerRedesign:M})=>{const{isDesktop:C}=(0,o.useAdaptivityWithJSMediaQueries)(),I=(0,a.useRef)(null),O=(0,v.useIsLandscape)(),T=(0,a.useRef)(!1),R=(0,a.useRef)(!1),j=(0,a.useRef)(null),N=S.bannerData,[L,D]=(0,a.useState)("0px"),B=(0,a.useMemo)((()=>N.statistics?N.statistics.reduce(((e,t)=>({...e,[t.type]:[...e[t.type]||[],t.url]})),{}):{}),[N.statistics]),{inView:V,ref:H}=(0,s.useInView)({threshold:.5,fallbackInView:!0});(0,a.useEffect)((()=>{k?.({banner_height:I?.current?.clientHeight??0,banner_width:I?.current?.clientWidth??0})}),[O,k,C]),(0,a.useEffect)((()=>{t({banner_height:I?.current?.clientHeight??0,banner_width:I?.current?.clientWidth??0})}),[N,e]),(0,a.useEffect)((()=>{R.current=!1,T.current=!1;const e=I.current?.parentElement;e&&D(getComputedStyle(e).paddingBottom)}),[N]),(0,a.useEffect)((()=>{V&&!R.current&&(i?.(),(0,f.sendStatistics)(B.playbackStarted),R.current=!0)}),[N,V]);const z=(0,a.useCallback)((e=>{x(e.target,h.POPUP_BOX_ID)?e.preventDefault():((0,f.sendStatistics)(B.click),T.current||(T.current=!0,P?.()))}),[B.click]),{containerClass:U,isBannerAlign:F,imageSize:W,isBannerVertical:G,isBannerAnimated:K,isBannerSlim:Z}=function({layout_type:e,banner_location:t,banner_align:i,orientation:r,height_type:o},{isLandscape:a,isDesktop:s,bannerAnimationEnabled:l}){const d="overlay"===e&&void 0!==i,c="vertical"===r,u=s?d:d&&a,h=s?c:c&&a,p=!s&&!u&&!h&&a&&"compact"===o,f=!(!l||h||u||p),b=(0,n.classNames)(g.default.bannerContainer,{[g.default.bannerTop]:"top"===t,[g.default.bannerBottom]:"bottom"===t,[g.default.bannerAlign]:u,[g.default.bannerAlignMobile]:u&&!s,[g.default.bannerLeft]:"left"===i,[g.default.bannerRight]:"right"===i,[g.default.bannerMobile]:!s,[g.default.bannerVertical]:h,[g.default.bannerVerticalResize]:h&&"resize"===e,[g.default.bannerAnimated]:f,[g.default.bannerSlim]:p});let v=m.IMAGE_SIZE_L;u&&(v=m.IMAGE_SIZE_BANNER_ALIGN);f&&(v=m.IMAGE_SIZE_XL);h&&(v=s?m.IMAGE_SIZE_XXL:m.IMAGE_SIZE_VERTICAL_MOBILE);p&&(v=m.IMAGE_SIZE_SLIM);return{containerClass:b,isBannerAlign:u,isBannerVertical:h,isBannerAnimated:f,isBannerSlim:p,imageSize:v}}(e,{isDesktop:C,isLandscape:O,bannerAnimationEnabled:E}),Y=(0,b.getImageAttributes)(N),q={isDesktop:C,isBannerAlign:F,isBannerSlim:Z,isBannerVertical:G},Q=M&&Y?(0,b.getImageSize)(Y.aspectRatio??null,q):null,J=Q?.width??W,X=(0,n.classNames)(G&&C&&g.default.roundBorderTop,F&&!G&&g.default.roundBorder,F&&!G&&!C&&g.default.roundBorderMobile);(0,a.useEffect)((()=>{const e=j.current,t=I.current;if(!K||!e||!t)return;const i=()=>{const t=j.current?.getAnimations()[0];if(!t)return;const i=Number(t.currentTime);e.style.animationDuration=`${b.HOVER_ANIMATION_DURATION}s`;const r=b.HOVER_ANIMATION_DURATION/b.ANIMATION_DURATION;t.currentTime=i*r},r=()=>{const t=j.current?.getAnimations()[0];if(!t)return;const i=Number(t.currentTime);e.style.animationDuration=`${b.ANIMATION_DURATION}s`;const r=b.ANIMATION_DURATION/b.HOVER_ANIMATION_DURATION;t.currentTime=i*r};return t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",r),()=>{t.removeEventListener("mouseenter",i),t.removeEventListener("mouseleave",r)}}),[K,N]);const $=!(C||Z||G||F),ee=(0,a.useMemo)((()=>{if(K||$)return(0,r.jsx)(c.BannerMiddle,{data:N,isDesktop:C});const e=(0,r.jsx)(A.TextClamp,{lines:Z?1:2,testLocator:"adsBannerTitle",children:N.title});return G?(0,r.jsx)(o.Subhead,{weight:"2",children:e}):Z?(0,r.jsx)(o.Footnote,{weight:"2",className:(0,n.classNames)(Z&&g.default.titleSlim),useAccentWeight:!0,children:e}):(0,r.jsx)(o.Caption,{level:"1",weight:"2",useAccentWeight:!0,children:e})}),[N,K,G,Z,$,C]);const te=Boolean(G||K||M),ie=K||F||Z||G||$?{}:{subhead:(0,r.jsx)(y.AdvertisingLabel,{data:N,isBannerAnimated:K,isDesktop:C})},re=G&&(0,r.jsx)(_.AdsBadge,{advertisingLabel:N.advertisingLabel,ageRestrictions:N.ageRestrictions});return(0,r.jsx)("div",{className:U,ref:I,"data-testid":"adsBanner","data-test-height":e.height_type,style:{"--banner-bottom-offset":L},children:(0,r.jsxs)("a",{ref:H,className:(0,n.classNames)(g.default.root,!F&&!Z&&g.default.withBorder),target:"_blank",href:N.trackingLink,rel:"nofollow noopener noreferrer",onClick:z,children:[(0,r.jsx)("div",{className:(0,n.classNames)(g.default.before,G&&g.default.beforeVertical),children:"outstream"===N.type?(0,r.jsx)(p.BannerVideo,{banner:N,size:W,isBannerAnimated:K,className:X,badge:re,keepAspectRatio:M,isDesktop:C,isBannerVertical:G,isBannerAlign:F,isBannerSlim:Z}):!M||C&&!G?K?(0,r.jsx)(d.BannerImageRich,{data:N,getRef:j}):(0,r.jsxs)(o.ImageBase,{noBorder:!0,className:(0,n.classNames)(g.default.image,X),size:W,src:N.iconLink||N.imageLink,"data-testid":"adsBannerImageBox",children:[re,(0,r.jsx)("img",{src:N.iconLink,alt:"",className:g.default.blur,"data-testid":"adsBannerImage"})]}):(0,r.jsx)(l.BannerImage,{className:X,data:N,isBannerSlim:Z,isBannerAlign:F,isBannerVertical:G,isDesktop:C,badge:re})}),(0,r.jsx)("div",{className:(0,n.classNames)(g.default.content,G&&g.default.contentVertical),style:{"--banner-image-size":J+"px"},children:K||$?(0,r.jsxs)("div",{className:(0,n.classNames)(g.default.animated,!C&&g.default.animatedMobile),children:[ee,(0,r.jsx)("div",{className:(0,n.classNames)(g.default.animatedAfter,!C&&g.default.animatedAfterMobile),children:(0,r.jsx)(w.BannerButton,{className:(0,n.classNames)(g.default.animatedButton,!C&&g.default.animatedButtonMobile),isDesktop:C,isBannerVertical:G,isBannerSlim:Z,children:C?N.ctaText:""})})]}):(0,r.jsx)(o.SimpleCell,{...ie,className:(0,n.classNames)(g.default.middle,F&&!G&&g.default.middleAlign,G&&g.default.middleVertical,G&&!C&&g.default.middleVerticalMobile,Z&&g.default.middleSlim,M&&Z&&g.default.overflowFix),hasHover:!1,hasActive:!1,after:!F&&!G&&(0,r.jsx)("div",{className:(0,n.classNames)(g.default.after,Z&&g.default.afterSlim),children:(0,r.jsx)(w.BannerButton,{isDesktop:C,isBannerVertical:G,isBannerSlim:Z,children:C||Z?N.ctaText:""})}),subtitle:(0,r.jsx)((()=>{if(!K&&!$)return F&&!G?(0,r.jsx)(y.AdvertisingLabel,{data:N,noMargin:!0,isBannerAnimated:K,isDesktop:C}):Z?(0,r.jsx)(y.AdvertisingLabelSlim,{data:N}):G&&!C?(0,r.jsx)(o.Caption,{weight:"3",children:(0,r.jsx)(A.TextClamp,{lines:2,testLocator:"adsBannerSubtitle",children:N.description})}):(0,r.jsx)(A.TextClamp,{lines:G?2:1,testLocator:"adsBannerSubtitle",className:g.default.subtitle,children:N.description})}),{}),children:ee})}),G&&(0,r.jsx)("div",{className:(0,n.classNames)(g.default.bannerVerticalBottom,!C&&g.default.bannerVerticalBottomMobile),children:(0,r.jsx)(w.BannerButton,{isDesktop:C,isBannerVertical:G,isBannerSlim:Z,children:N.ctaText})}),(0,r.jsx)(u.AdChoices,{options:S.adChoices?.options,className:(0,n.classNames)(g.default.info,!C&&F&&!G&&g.default.infoAlignMobile,te&&g.default.more,G&&g.default.infoVertical,K&&g.default.infoAnimated,$&&!C&&g.default.infoAnimatedMobile,Z&&g.default.infoSlim),popupOffsetDistance:12,fitParent:!G,icon:te?"more":"info",size:K?"l":void 0})]})})};function x(e,t){return null!==e.parentElement&&(e.parentElement.id===t||x(e.parentElement,t))}},107287:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={root:"AdBannerV2-module_root__iLAc7",withBorder:"AdBannerV2-module_withBorder__RI-W7",image:"AdBannerV2-module_image__yHZzJ",before:"AdBannerV2-module_before__IclWQ",beforeVertical:"AdBannerV2-module_beforeVertical__8Wqs7",bannerContainer:"AdBannerV2-module_bannerContainer__uh23a",bannerTop:"AdBannerV2-module_bannerTop__ftw6f",bannerBottom:"AdBannerV2-module_bannerBottom__xLNmC",bannerAlign:"AdBannerV2-module_bannerAlign__A1cBk",bannerAlignMobile:"AdBannerV2-module_bannerAlignMobile__V-slu",bannerMobile:"AdBannerV2-module_bannerMobile__7atur",bannerVertical:"AdBannerV2-module_bannerVertical__40yBE",bannerRight:"AdBannerV2-module_bannerRight__JNJ89",bannerLeft:"AdBannerV2-module_bannerLeft__giBVw",blur:"AdBannerV2-module_blur__YcFkD",after:"AdBannerV2-module_after__otE6y",afterSlim:"AdBannerV2-module_afterSlim__eqMOJ",content:"AdBannerV2-module_content__8SA6z",contentVertical:"AdBannerV2-module_contentVertical__ciUBy",info:"AdBannerV2-module_info__WEkWS",infoAlignMobile:"AdBannerV2-module_infoAlignMobile__r-Pct",more:"AdBannerV2-module_more__hB5X4",infoVertical:"AdBannerV2-module_infoVertical__9eq66",infoAnimated:"AdBannerV2-module_infoAnimated__Ro4g8",infoAnimatedMobile:"AdBannerV2-module_infoAnimatedMobile__ThMwQ",infoSlim:"AdBannerV2-module_infoSlim__4iYat",roundBorder:"AdBannerV2-module_roundBorder__8j6a8",roundBorderMobile:"AdBannerV2-module_roundBorderMobile__uK0WR",roundBorderTop:"AdBannerV2-module_roundBorderTop__IdACu",middle:"AdBannerV2-module_middle__aO5gQ",middleAlign:"AdBannerV2-module_middleAlign__AS0xn",middleVertical:"AdBannerV2-module_middleVertical__r3rg0",middleVerticalMobile:"AdBannerV2-module_middleVerticalMobile__bHp8q",middleSlim:"AdBannerV2-module_middleSlim__u6r4V",overflowFix:"AdBannerV2-module_overflowFix__2xxFh",bannerVerticalResize:"AdBannerV2-module_bannerVerticalResize__vrJ4j",bannerSlim:"AdBannerV2-module_bannerSlim__zYQuk",titleSlim:"AdBannerV2-module_titleSlim__hlGBE",subtitle:"AdBannerV2-module_subtitle__Era4x",bannerVerticalBottom:"AdBannerV2-module_bannerVerticalBottom__Jc2gN",bannerVerticalBottomMobile:"AdBannerV2-module_bannerVerticalBottomMobile__0HXwL",animated:"AdBannerV2-module_animated__TAeHi",animatedMobile:"AdBannerV2-module_animatedMobile__7NXQ8",animatedButton:"AdBannerV2-module_animatedButton__MLDAV",animatedButtonMobile:"AdBannerV2-module_animatedButtonMobile__5mTIp",animatedAfter:"AdBannerV2-module_animatedAfter__mlvh1",animatedAfterMobile:"AdBannerV2-module_animatedAfterMobile__Yr8vQ"};(0,r.default)(".AdBannerV2-module_root__iLAc7{background-color:var(--vkui--color_background_content);border-radius:inherit;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;position:relative}.AdBannerV2-module_withBorder__RI-W7{border-bottom:var(--vkui--size_border--regular) solid var(--vkui--color_image_border_alpha);border-top:var(--vkui--size_border--regular) solid var(--vkui--color_image_border_alpha)}.AdBannerV2-module_root__iLAc7.AdBannerV2-module_root__iLAc7.AdBannerV2-module_root__iLAc7{text-decoration:none}.AdBannerV2-module_image__yHZzJ{overflow:hidden}.AdBannerV2-module_image__yHZzJ>img{-o-object-fit:contain;object-fit:contain}.AdBannerV2-module_before__IclWQ{position:relative}.AdBannerV2-module_beforeVertical__8Wqs7{border-bottom:var(--vkui--size_border--regular) solid var(--vkui--color_image_border_alpha);border-right:unset;z-index:1}.AdBannerV2-module_bannerContainer__uh23a{position:absolute;width:100%;z-index:1}.AdBannerV2-module_bannerTop__ftw6f{top:0}.AdBannerV2-module_bannerBottom__xLNmC{bottom:0;bottom:var(--banner-bottom-offset,0)}.AdBannerV2-module_bannerAlign__A1cBk{border-radius:8px;-webkit-box-shadow:0 0 2px rgba(0,0,0,.08);box-shadow:0 0 2px rgba(0,0,0,.08);-webkit-box-shadow:var(--vkui--elevation3,0 0 2px rgba(0,0,0,.08));box-shadow:var(--vkui--elevation3,0 0 2px rgba(0,0,0,.08));left:0;margin:auto;right:0;width:320px}.AdBannerV2-module_bannerAlign__A1cBk.AdBannerV2-module_bannerAlignMobile__V-slu{border-radius:12px}.AdBannerV2-module_bannerAlign__A1cBk.AdBannerV2-module_bannerBottom__xLNmC{bottom:12px;bottom:-webkit-calc(var(--vkui_internal--safe_area_inset_bottom,0) + 12px);bottom:-moz-calc(var(--vkui_internal--safe_area_inset_bottom,0) + 12px);bottom:calc(var(--vkui_internal--safe_area_inset_bottom, 0) + 12px)}.AdBannerV2-module_bannerMobile__7atur.AdBannerV2-module_bannerAlign__A1cBk.AdBannerV2-module_bannerBottom__xLNmC{bottom:8px;bottom:-webkit-calc(var(--vkui_internal--safe_area_inset_bottom,0) + var(--vkui_internal--safe_area_inset_bottom,0) + 8px);bottom:-moz-calc(var(--vkui_internal--safe_area_inset_bottom,0) + var(--vkui_internal--safe_area_inset_bottom,0) + 8px);bottom:calc(var(--vkui_internal--safe_area_inset_bottom, 0) + var(--vkui_internal--safe_area_inset_bottom, 0) + 8px)}.AdBannerV2-module_bannerAlign__A1cBk.AdBannerV2-module_bannerTop__ftw6f{top:12px}.AdBannerV2-module_bannerMobile__7atur.AdBannerV2-module_bannerAlign__A1cBk.AdBannerV2-module_bannerTop__ftw6f{top:8px}.AdBannerV2-module_bannerVertical__40yBE.AdBannerV2-module_bannerRight__JNJ89{left:unset;right:0}.AdBannerV2-module_bannerAlign__A1cBk.AdBannerV2-module_bannerRight__JNJ89{left:unset;margin:unset;right:12px}.AdBannerV2-module_bannerVertical__40yBE.AdBannerV2-module_bannerLeft__giBVw{left:0;margin:unset}.AdBannerV2-module_bannerVertical__40yBE.AdBannerV2-module_bannerMobile__7atur{border:unset;border-radius:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:100%;outline:var(--vkui--size_border--regular) solid var(--vkui--color_image_border_alpha);padding:0;width:160px}.AdBannerV2-module_bannerAlign__A1cBk.AdBannerV2-module_bannerLeft__giBVw{left:12px;margin:unset}.AdBannerV2-module_blur__YcFkD{-webkit-filter:blur(20px);filter:blur(20px);height:100%;left:0;-o-object-fit:cover;object-fit:cover;position:absolute;top:0;-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);width:100%;z-index:-2}.AdBannerV2-module_after__otE6y{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:70px;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;justify-content:flex-end;padding-bottom:10px}.AdBannerV2-module_after__otE6y.AdBannerV2-module_afterSlim__eqMOJ{height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;padding-bottom:0;padding-left:12px;padding-right:40px}.AdBannerV2-module_content__8SA6z{border-left:var(--vkui--size_border--regular) solid var(--vkui--color_image_border_alpha);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;max-width:-webkit-calc(100% - 80px);max-width:-moz-calc(100% - 80px);max-width:calc(100% - 80px);max-width:-webkit-calc(100% - var(--banner-image-size,80px));max-width:-moz-calc(100% - var(--banner-image-size,80px));max-width:calc(100% - var(--banner-image-size, 80px));width:100%}.AdBannerV2-module_content__8SA6z.AdBannerV2-module_contentVertical__ciUBy{max-width:100%;--vkui--spacing_size_l:0;padding-top:5px;--vkui--spacing_size_2xs:3px;border-left:unset}.AdBannerV2-module_info__WEkWS{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:24px;position:absolute;right:6px;top:6px;width:24px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;color:var(--vkui--color_icon_tertiary)}.AdBannerV2-module_info__WEkWS.AdBannerV2-module_infoAlignMobile__r-Pct{right:4px;top:4px}.AdBannerV2-module_more__hB5X4{color:var(--vkui--color_icon_secondary)}.AdBannerV2-module_infoVertical__9eq66{background-color:var(--vkui--color_overlay_primary);border-radius:50%;color:var(--vkui--color_icon_contrast);height:20px;right:4px;top:4px;width:20px;z-index:2}.AdBannerV2-module_infoAnimated__Ro4g8{height:24px;width:24px}.AdBannerV2-module_infoAnimatedMobile__ThMwQ{right:3px;top:4px}.AdBannerV2-module_infoSlim__4iYat{height:32px;right:4px;top:12px;width:32px}.AdBannerV2-module_roundBorder__8j6a8{border-bottom-left-radius:8px;border-top-left-radius:8px}.AdBannerV2-module_roundBorder__8j6a8.AdBannerV2-module_roundBorderMobile__uK0WR{border-bottom-left-radius:12px;border-top-left-radius:12px}.AdBannerV2-module_roundBorderTop__IdACu{border-top-left-radius:12px;border-top-right-radius:12px}.AdBannerV2-module_middle__aO5gQ{cursor:pointer;max-height:80px;text-align:left}.AdBannerV2-module_middle__aO5gQ.AdBannerV2-module_middleAlign__AS0xn{max-height:60px;min-height:60px;padding-left:8px;padding-right:32px}.AdBannerV2-module_middle__aO5gQ.AdBannerV2-module_middleAlign__AS0xn>div{-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:60px;justify-content:space-between;padding:7px 8px 9px 0}.AdBannerV2-module_middle__aO5gQ.AdBannerV2-module_middleVertical__r3rg0{padding-left:12px;padding-right:12px}.AdBannerV2-module_middle__aO5gQ.AdBannerV2-module_middleVertical__r3rg0.AdBannerV2-module_middleVerticalMobile__bHp8q{padding-left:8px;padding-right:8px}.AdBannerV2-module_middle__aO5gQ.AdBannerV2-module_middleSlim__u6r4V{max-height:56px;min-height:56px;padding-left:8px;padding-right:0;--vkui--spacing_size_2xs:0}.AdBannerV2-module_middle__aO5gQ.AdBannerV2-module_middleSlim__u6r4V.AdBannerV2-module_overflowFix__2xxFh{overflow:hidden}.AdBannerV2-module_bannerVertical__40yBE{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;border-radius:12px;height:324px;width:200px}.AdBannerV2-module_bannerVerticalResize__vrJ4j{padding:0}.AdBannerV2-module_bannerSlim__zYQuk{height:56px;outline:var(--vkui--size_border--regular) solid var(--vkui--color_image_border_alpha)}.AdBannerV2-module_bannerSlim__zYQuk .AdBannerV2-module_root__iLAc7{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:56px}.AdBannerV2-module_titleSlim__hlGBE{margin-bottom:4px}.AdBannerV2-module_subtitle__Era4x{font-size:12px;font-weight:400;line-height:14px}.AdBannerV2-module_bannerVertical__40yBE .AdBannerV2-module_root__iLAc7{height:100%;width:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column}.AdBannerV2-module_bannerVerticalBottom__Jc2gN{bottom:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;padding:6px 12px 12px;position:absolute;width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center}.AdBannerV2-module_bannerVerticalBottom__Jc2gN.AdBannerV2-module_bannerVerticalBottomMobile__0HXwL{border-radius:0;padding:12px 8px;position:relative;--vkui--font_subhead--font_size--regular:13px;--vkui--font_subhead--line_height--regular:16px}.AdBannerV2-module_animated__TAeHi{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;color:var(--vkui--color_text_primary);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:80px;padding-left:12px;position:relative;text-decoration:none;width:100%}.AdBannerV2-module_animatedMobile__7NXQ8{padding-left:8px}.AdBannerV2-module_animatedButton__MLDAV{--vkui--size_button_base_small_padding_horizontal--regular:12px}.AdBannerV2-module_animatedButton__MLDAV.AdBannerV2-module_animatedButtonMobile__5mTIp{border-radius:10px;width:40px}.AdBannerV2-module_animatedAfter__mlvh1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;align-items:flex-end;padding:8px 12px 12px 4px}.AdBannerV2-module_animatedAfter__mlvh1.AdBannerV2-module_animatedAfterMobile__Yr8vQ{padding-bottom:8px;padding-right:8px}")},872524:(e,t,i)=>{i.d(t,{AdsBadge:()=>d});var r=i(474848),n=i(63305),o=i(87871),a=i(220208),s=i(367934),l=i(967441);const d=({advertisingLabel:e,ageRestrictions:t})=>{const{getLang:i}=(0,s.useLangProviderContext)();let d=function(e,t){if(!e||e.length>10)return t;return e}(e,i("apps_ad_subtitle_prefix"));return t&&(d+=` ${t}`),(0,r.jsxs)(a.Caption,{level:"1",className:(0,o.classNames)(l.default.badge),children:[(0,r.jsx)("div",{className:l.default.icon,children:(0,r.jsx)(n.Icon16LogoVkAds,{width:12,height:12})}),d]})}},967441:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={badge:"AdsBadge-module_badge__H90AB",icon:"AdsBadge-module_icon__ajsrR"};(0,r.default)(".AdsBadge-module_badge__H90AB{background-color:var(--vkui--color_overlay_primary);border-radius:16px;color:var(--vkui--color_text_contrast);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;left:5px;position:absolute;top:4px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:20px;justify-content:center;padding:2px 4px 2px 6px}.AdsBadge-module_icon__ajsrR{color:var(--vkui--color_icon_contrast);height:12px;margin-right:4px;width:12px}")},405189:(e,t,i)=>{i.d(t,{AdvertisingLabel:()=>b,AdvertisingLabelSlim:()=>v});var r=i(474848),n=i(63305),o=i(876427),a=i(286347),s=i(87871),l=i(220208),d=i(621999),c=i(478108),u=i(367934),h=i(176190);const p=` ${c.dot} `;function m(e,t){let i=e;return t.ageRestrictions&&(i+=` ${t.ageRestrictions}`),i}function f(e,t,i){const r=e.advertisingLabel??t;return i?m(r,e):function(e,t){let i=m(e,t);if(e.length<=10&&(t.domain||t.rating)){const e=t.rating||t.domain;i+=`${p}${e}`}return i}(r,e)}const b=({data:e,noMargin:t,className:i,isBannerAnimated:d,isDesktop:c})=>{const{getLang:b}=(0,u.useLangProviderContext)(),v=f(e,b("apps_ad_subtitle_prefix"),d),g=m(e.advertisingLabel??b("apps_ad_subtitle_prefix"),e),_=c?16:12;return(0,r.jsx)(l.Caption,{level:"1",className:(0,s.classNames)(h.default.label,!c&&h.default.labelMobile,t&&h.default.labelBottom,d&&h.default.animated,d&&!c&&h.default.animatedMobile,i),"data-testid":"adsBannerAdvertisingLabel",children:d?(0,r.jsxs)(r.Fragment,{children:[!c&&(0,r.jsx)("div",{className:(0,s.classNames)(h.default.icon,h.default.iconAnimated),children:(0,r.jsx)(n.Icon16LogoVkAds,{width:_,height:_})}),v,e.domain&&(0,r.jsxs)(r.Fragment,{children:[p,(0,r.jsx)("div",{className:h.default.domainIcon,children:(0,r.jsx)(l.Avatar,{src:e.iconLink,size:_})}),e.domain]}),e.rating&&(0,r.jsxs)(r.Fragment,{children:[p,(0,r.jsx)(o.Icon16Favorite,{className:(0,s.classNames)(h.default.favorite,h.default.favoriteAnimated),width:_,height:_}),e.rating]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:h.default.icon,children:(0,r.jsx)(n.Icon16LogoVkAds,{width:12,height:12})}),!e.rating&&v,e.rating&&(0,r.jsxs)(r.Fragment,{children:[g,p,(0,r.jsx)(a.Icon12Favorite,{className:(0,s.classNames)(h.default.favorite,h.default.favoriteBefore),width:_,height:_}),e.rating]})]})})},v=({data:e})=>{const{getLang:t}=(0,u.useLangProviderContext)(),i=f(e,t("apps_ad_subtitle_prefix"),!0),n=i.length>=14;return(0,r.jsx)(l.Caption,{level:"1",className:(0,s.classNames)(h.default.label,h.default.labelSlim),"data-testid":"adsBannerAdvertisingLabel",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:h.default.item,children:i}),!n&&e.domain&&!e.rating&&(0,r.jsx)("div",{className:h.default.item,children:e.domain}),!n&&e.rating&&(0,r.jsxs)("div",{className:h.default.item,children:[(0,r.jsx)(a.Icon12Favorite,{className:(0,s.classNames)(h.default.favorite,h.default.favoriteSlim)}),e.rating]}),(0,r.jsx)(d.TextClamp,{lines:1,children:e.disclaimer??e.description??""})]})})}},176190:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={label:"AdvertisingLabel-module_label__69QNd",labelMobile:"AdvertisingLabel-module_labelMobile__jvzx6",labelSlim:"AdvertisingLabel-module_labelSlim__EbNtG",animated:"AdvertisingLabel-module_animated__jjvGh",animatedMobile:"AdvertisingLabel-module_animatedMobile__a0-Lb",labelBottom:"AdvertisingLabel-module_labelBottom__q81Sv",icon:"AdvertisingLabel-module_icon__D7zm4",iconAnimated:"AdvertisingLabel-module_iconAnimated__wR-qL",domainIcon:"AdvertisingLabel-module_domainIcon__TrWoL",favorite:"AdvertisingLabel-module_favorite__6d7R1",favoriteSlim:"AdvertisingLabel-module_favoriteSlim__SiASy",favoriteAnimated:"AdvertisingLabel-module_favoriteAnimated__9Gw-k",favoriteBefore:"AdvertisingLabel-module_favoriteBefore__5J4V0",item:"AdvertisingLabel-module_item__fmLNv"};(0,r.default)(".AdvertisingLabel-module_label__69QNd{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;color:var(--vkui--color_text_secondary);height:12px;margin-bottom:2px}.AdvertisingLabel-module_label__69QNd.AdvertisingLabel-module_labelMobile__jvzx6{color:var(--vkui--color_text_tertiary)}.AdvertisingLabel-module_label__69QNd.AdvertisingLabel-module_labelSlim__EbNtG{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin-bottom:0;margin-top:0}.AdvertisingLabel-module_animated__jjvGh{color:var(--vkui--color_text_tertiary)}.AdvertisingLabel-module_animated__jjvGh.AdvertisingLabel-module_animatedMobile__a0-Lb{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow:hidden;right:10px;text-overflow:ellipsis;white-space:nowrap}.AdvertisingLabel-module_label__69QNd.AdvertisingLabel-module_labelBottom__q81Sv{margin-bottom:0}.AdvertisingLabel-module_icon__D7zm4{color:var(--vkui--color_icon_tertiary);height:12px;margin-right:4px;width:12px}.AdvertisingLabel-module_icon__D7zm4.AdvertisingLabel-module_iconAnimated__wR-qL{height:12px;width:12px}.AdvertisingLabel-module_domainIcon__TrWoL{margin-right:4px}.AdvertisingLabel-module_favorite__6d7R1{color:var(--vkui--color_accent_orange);margin-left:2px}.AdvertisingLabel-module_favoriteSlim__SiASy{margin-left:0;margin-right:2px}.AdvertisingLabel-module_favoriteAnimated__9Gw-k{margin-right:4px}.AdvertisingLabel-module_favorite__6d7R1.AdvertisingLabel-module_favoriteBefore__5J4V0{margin-left:0;margin-right:2px}.AdvertisingLabel-module_item__fmLNv{border:.5px solid var(--vkui--color_separator_primary2x);border-radius:6px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;color:var(--vkui--color_text_tertiary);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:20px;margin-right:4px;padding:0 6px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center}")},64395:(e,t,i)=>{i.d(t,{BannerButton:()=>d});var r=i(474848),n=i(668764),o=i(87871),a=i(220208),s=i(367934),l=i(103624);const d=({isDesktop:e,isBannerVertical:t,isBannerSlim:i,className:d,children:c})=>{const{getLang:u}=(0,s.useLangProviderContext)();return(0,r.jsx)(a.Button,{mode:"secondary",size:"s",stretched:t,appearance:"accent",className:(0,o.classNames)(!e&&!i&&l.default.buttonSmall,i&&l.default.buttonSlim,d),before:!e&&!i&&!t&&(0,r.jsx)(n.Icon16ArrowRightOutline,{}),"data-testid":"adsBannerCtaButton","aria-label":u("apps_ad_go_to_site"),children:c})}},103624:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={buttonSmall:"BannerButton-module_buttonSmall__BRT8C",buttonSlim:"BannerButton-module_buttonSlim__BPUoT"};(0,r.default)(".BannerButton-module_buttonSmall__BRT8C{width:40px}.BannerButton-module_buttonSlim__BPUoT{border-radius:10px}")},963302:(e,t,i)=>{i.d(t,{BannerImage:()=>l});var r=i(474848),n=i(87871),o=i(296540),a=i(746807),s=i(333702);const l=({data:e,className:t,badge:i,isBannerVertical:l,isBannerAlign:d,isBannerSlim:c,isDesktop:u})=>{const h=(0,s.getImageAttributes)(e),[p,m]=(0,o.useState)(!1),f=(0,s.getImageSize)(h?.aspectRatio??null,{isBannerVertical:l,isBannerAlign:d,isBannerSlim:c,isDesktop:u});return(0,r.jsxs)("div",{className:(0,n.classNames)(a.default.container,t),"data-testid":"adsBannerImageBox",style:{width:f.width,height:f.height},children:[i,(0,r.jsx)("img",{className:(0,n.classNames)(a.default.image,p&&a.default.loaded),"data-testid":"adsBannerImage",src:h?.src,onLoad:()=>{m(!0)},alt:"adsBannerImage"})]})}},746807:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={container:"BannerImage-module_container__EO-jm",image:"BannerImage-module_image__YUruj",loaded:"BannerImage-module_loaded__iwRnu"};(0,r.default)(".BannerImage-module_container__EO-jm{background-color:var(--vkui--color_background_content);max-height:100%;overflow:hidden;position:relative}.BannerImage-module_image__YUruj{height:100%;-o-object-fit:contain;object-fit:contain;opacity:0;width:100%}.BannerImage-module_loaded__iwRnu{opacity:1}")},627620:(e,t,i)=>{i.d(t,{BannerImageRich:()=>s});var r=i(474848),n=i(87871),o=i(333702),a=i(281001);const s=({data:e,getRef:t})=>{const i=(0,o.getImageAttributes)(e);return(0,r.jsx)("div",{className:a.default.box,"data-testid":"adsBannerImageBox",children:(0,r.jsx)("div",{className:a.default.inner,children:i&&(0,r.jsx)("div",{ref:t,style:{backgroundImage:`url("${i.src}")`},className:(0,n.classNames)(a.default.animated,i.alternativeAnimation&&a.default.animatedAlt)},i.src)})})}},281001:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={box:"BannerImageRich-module_box__9mG1w",inner:"BannerImageRich-module_inner__HbcEl",animated:"BannerImageRich-module_animated__bFxjp",action:"BannerImageRich-module_action__Mq5cl",animatedAlt:"BannerImageRich-module_animatedAlt__9ZZIx",actionAlt:"BannerImageRich-module_actionAlt__dQg-M"};(0,r.default)(".BannerImageRich-module_box__9mG1w{height:80px;overflow:hidden;position:relative;width:141px}.BannerImageRich-module_inner__HbcEl{height:100%;left:0;position:absolute;top:0;width:100%}.BannerImageRich-module_animated__bFxjp{-webkit-animation:b 20s linear 0s infinite backwards;-moz-animation:b 20s linear 0s infinite backwards;animation:b 20s linear 0s infinite backwards;-webkit-animation-duration:20s;-moz-animation-duration:20s;animation-duration:20s;background-repeat:no-repeat;-webkit-background-size:cover;background-size:cover;height:100%;width:100%}.BannerImageRich-module_animatedAlt__9ZZIx{-webkit-animation:c 20s linear 0s infinite backwards;-moz-animation:c 20s linear 0s infinite backwards;animation:c 20s linear 0s infinite backwards;background-position-x:center;-webkit-background-size:130% 130%;background-size:130%}@-webkit-keyframes b{0%{background-position:50% 50%}25%{background-position:100% 100%}50%{background-position:50% 50%}75%{background-position:0 0}to{background-position:50% 50%}}@-moz-keyframes b{0%{background-position:50% 50%}25%{background-position:100% 100%}50%{background-position:50% 50%}75%{background-position:0 0}to{background-position:50% 50%}}@keyframes b{0%{background-position:50% 50%}25%{background-position:100% 100%}50%{background-position:50% 50%}75%{background-position:0 0}to{background-position:50% 50%}}@-webkit-keyframes c{0%{background-position-x:50%}25%{background-position-x:100%}50%{background-position-x:50%}75%{background-position-x:0}to{background-position-x:50%}}@-moz-keyframes c{0%{background-position-x:50%}25%{background-position-x:100%}50%{background-position-x:50%}75%{background-position-x:0}to{background-position-x:50%}}@keyframes c{0%{background-position-x:50%}25%{background-position-x:100%}50%{background-position-x:50%}75%{background-position-x:0}to{background-position-x:50%}}")},332886:(e,t,i)=>{i.d(t,{BannerMiddle:()=>c});var r=i(474848),n=i(87871),o=i(220208),a=i(405189),s=i(621999),l=i(278823);function d(e){const t=e.title??"",i=e.description??"";return t.length<=60&&i.length<=65}const c=({data:e,isDesktop:t})=>{const i=!t||d(e);return(0,r.jsxs)("div",{className:l.default.box,children:[!i&&(0,r.jsx)("div",{className:l.default.gradient}),(0,r.jsxs)("div",{className:(0,n.classNames)(l.default.scroll,!t&&l.default.scrollMobile),children:[(0,r.jsx)("div",{className:(0,n.classNames)(l.default.inner,i&&l.default.innerShort,!t&&l.default.innerMobile),children:(0,r.jsx)(o.AdaptivityProvider,{sizeY:"compact",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Headline,{level:"1",weight:"2",className:(0,n.classNames)(l.default.title,!t&&l.default.titleMoblie),useAccentWeight:!0,children:(0,r.jsx)(s.TextClamp,{lines:1,children:e.title})}),(0,r.jsx)(o.Subhead,{weight:"3","data-testid":"adsBannerSubtitle",className:(0,n.classNames)(l.default.subtitle,!t&&l.default.subtitleMoblie),children:(0,r.jsx)(s.TextClamp,{lines:t?1:2,children:e.description})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.AdvertisingLabel,{data:e,className:l.default.label,isBannerAnimated:!0,isDesktop:t}),(0,r.jsx)(o.Headline,{level:"1",weight:"2",className:l.default.title,useAccentWeight:!0,children:e.title}),(0,r.jsx)(o.Subhead,{weight:"3","data-testid":"adsBannerSubtitle",className:l.default.subtitle,children:e.description})]})})}),i&&(0,r.jsx)(a.AdvertisingLabel,{data:e,className:(0,n.classNames)(l.default.bottomBadge,!t&&l.default.bottomBadgeMobile),isBannerAnimated:!0,isDesktop:t})]})]})}},278823:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={box:"BannerMiddle-module_box__KSeCt",scroll:"BannerMiddle-module_scroll__cvOoq",scrollMobile:"BannerMiddle-module_scrollMobile__LlF50",inner:"BannerMiddle-module_inner__wg6JA",innerShort:"BannerMiddle-module_innerShort__TeHE4",innerMobile:"BannerMiddle-module_innerMobile__xwvaA",bottomBadge:"BannerMiddle-module_bottomBadge__rViIi",bottomBadgeMobile:"BannerMiddle-module_bottomBadgeMobile__5Pz-U",gradient:"BannerMiddle-module_gradient__-UGl4",subtitle:"BannerMiddle-module_subtitle__Sv3bk",subtitleMoblie:"BannerMiddle-module_subtitleMoblie__xlyZU",title:"BannerMiddle-module_title__OqHCs",titleMoblie:"BannerMiddle-module_titleMoblie__JqAc0",label:"BannerMiddle-module_label__Emx4x"};(0,r.default)(".BannerMiddle-module_box__KSeCt{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:80px;position:relative;text-align:left;width:100%}.BannerMiddle-module_scroll__cvOoq{bottom:2px;left:0;overflow:hidden;overflow-y:scroll;position:absolute;top:2px;width:100%}.BannerMiddle-module_scroll__cvOoq.BannerMiddle-module_scrollMobile__LlF50{overflow:hidden;padding-right:10px}.BannerMiddle-module_scroll__cvOoq::-webkit-scrollbar{width:6px}.BannerMiddle-module_scroll__cvOoq::-webkit-scrollbar-thumb{background:#babfc4;border-radius:12px;display:none}.BannerMiddle-module_scroll__cvOoq:hover::-webkit-scrollbar-thumb{display:unset}.BannerMiddle-module_inner__wg6JA{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;position:absolute;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;left:0;padding-bottom:6px;padding-right:10px;padding-top:6px;top:0;white-space:break-spaces;width:100%}.BannerMiddle-module_innerShort__TeHE4{max-height:-webkit-calc(100% - 28px);max-height:-moz-calc(100% - 28px);max-height:calc(100% - 28px);overflow:hidden}.BannerMiddle-module_innerMobile__xwvaA{max-height:-webkit-calc(100% - 26px);max-height:-moz-calc(100% - 26px);max-height:calc(100% - 26px);padding-right:0;padding-top:4px;right:10px;width:unset}.BannerMiddle-module_bottomBadge__rViIi{bottom:6px;left:0;position:absolute}.BannerMiddle-module_bottomBadge__rViIi.BannerMiddle-module_bottomBadgeMobile__5Pz-U{bottom:4px}.BannerMiddle-module_gradient__-UGl4{background:-webkit-gradient(linear,left top,left bottom,from(var(--vkui--gradient_tint)));background:-webkit-linear-gradient(top,var(--vkui--gradient_tint));background:-moz-linear-gradient(top,var(--vkui--gradient_tint));background:linear-gradient(to bottom,var(--vkui--gradient_tint));bottom:0;height:16px;left:0;position:absolute;right:10px;z-index:1}.BannerMiddle-module_subtitle__Sv3bk{color:var(--vkui--color_text_subhead);margin-top:3px}.BannerMiddle-module_subtitle__Sv3bk.BannerMiddle-module_subtitleMoblie__xlyZU{font-size:12px;line-height:14px;margin-top:1px}.BannerMiddle-module_title__OqHCs{color:var(--vkui--color_text_primary)}.BannerMiddle-module_title__OqHCs.BannerMiddle-module_titleMoblie__JqAc0{font-size:14px;line-height:18px}.BannerMiddle-module_label__Emx4x{margin-bottom:4px}")},621999:(e,t,i)=>{i.d(t,{TextClamp:()=>a});var r=i(474848),n=i(87871),o=i(115428);const a=({lines:e,children:t,testLocator:i,className:a})=>(0,r.jsx)("div",{"data-testid":i,className:(0,n.classNames)(o.default.root,1===e&&o.default.rootSingleLine,a),style:{"--lines":e},children:t})},115428:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={root:"TextClamp-module_root__2klDA",rootSingleLine:"TextClamp-module_rootSingleLine__SVfeL",rootPreserveWhitespaces:"TextClamp-module_rootPreserveWhitespaces__Upzna"};(0,r.default)(".TextClamp-module_root__2klDA{display:block;overflow:hidden;white-space:pre-wrap}.TextClamp-module_root__2klDA:not(.TextClamp-module_rootSingleLine__SVfeL){--lines:1;display:-webkit-box;white-space:normal;-webkit-line-clamp:1;-webkit-line-clamp:var(--lines,1);line-clamp:1;line-clamp:var(--lines,1);-webkit-box-orient:vertical;word-break:break-word}.TextClamp-module_rootSingleLine__SVfeL{text-overflow:ellipsis;white-space:nowrap}.TextClamp-module_rootPreserveWhitespaces__Upzna{white-space:pre-wrap}")},673730:(e,t,i)=>{i.d(t,{AdChoiceActionSheet:()=>s});var r=i(474848),n=i(87871),o=i(220208),a=i(751519);const s=({fitParent:e,toggleRef:t,popupOffsetDistance:i,onClose:s,options:l})=>{const d=(0,o.useAdaptivityWithJSMediaQueries)();return(0,r.jsx)(o.ActionSheet,{"data-testid":"adsBannerAdChoicesContainer",className:(0,n.classNames)(!1===e&&a.default.popup,a.default.popupFullscreen),popupOffsetDistance:i,onClickCapture:e=>{e.preventDefault()},onClose:s,toggleRef:t,iosCloseItem:(0,r.jsx)("div",{className:a.default.hidden}),children:l.map((({name:e,onClick:t})=>(0,r.jsx)(o.ActionSheetItem,{"data-testid":"adsBannerAdChoicesOption",className:(0,n.classNames)(d.isDesktop&&a.default.item),onClick:e=>{e.preventDefault(),t(),s()},children:(0,r.jsx)(o.Text,{weight:"1",className:(0,n.classNames)(d.isDesktop&&a.default.text),useAccentWeight:!0,children:e})},e)))})}},76583:(e,t,i)=>{i.d(t,{AdChoiceButton:()=>c});var r=i(474848),n=i(87871),o=i(220208),a=i(296540),s=i(367934),l=i(751519),d=i(417408);const c=(0,a.forwardRef)((({className:e,onClick:t,icon:i,size:a},c)=>{const{getLang:u}=(0,s.useLangProviderContext)(),h=d.iconMap[i];return(0,r.jsx)("div",{className:e,onClick:t,ref:c,"data-testid":"adsBannerAdChoicesButton",children:(0,r.jsx)(o.IconButton,{className:(0,n.classNames)(l.default.button,"l"===a&&l.default.buttonLarge),"aria-label":u("apps_ad_options"),children:(0,r.jsx)(h,{className:l.default.icon})})})}));c.displayName="AdChoiceButton"},706126:(e,t,i)=>{i.d(t,{AdChoices:()=>u});var r=i(474848),n=i(87871),o=i(220208),a=i(296540),s=i(367934),l=i(673730),d=i(751519),c=i(417408);const u=({options:e,className:t,popupOffsetDistance:i,fitParent:u,icon:h,size:p})=>{const{getLang:m}=(0,s.useLangProviderContext)(),[f,b]=(0,a.useState)(!1),v=(0,a.useRef)(null),g=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),b((e=>!e))}),[]),_=()=>{b(!1)};if(e&&e.length){const a=c.iconMap[h];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:t,onClick:g,ref:v,"data-testid":"adsBannerAdChoicesButton",children:(0,r.jsx)(o.IconButton,{className:(0,n.classNames)(d.default.button,"l"===p&&d.default.buttonLarge),"aria-label":m("apps_ad_options"),children:(0,r.jsx)(a,{className:d.default.icon})})}),(0,r.jsx)("div",{className:d.default.popupBox,id:c.POPUP_BOX_ID,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:f&&(0,r.jsx)(l.AdChoiceActionSheet,{onClose:_,options:e,fitParent:u,popupOffsetDistance:i,toggleRef:v})})]})}return null}},751519:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={button:"AdChoices-module_button__rYVkD",buttonLarge:"AdChoices-module_buttonLarge__pGja3",icon:"AdChoices-module_icon__h-unN",item:"AdChoices-module_item__r6wG9",text:"AdChoices-module_text__KzBVq",hidden:"AdChoices-module_hidden__ZrnjU",popup:"AdChoices-module_popup__uUiy-",popupFullscreen:"AdChoices-module_popupFullscreen__z2XDs"};(0,r.default)(".AdChoices-module_button__rYVkD{height:auto}.AdChoices-module_buttonLarge__pGja3{height:24px;padding-left:4px;width:24px}.AdChoices-module_icon__h-unN.AdChoices-module_icon__h-unN{padding:initial}.AdChoices-module_item__r6wG9.AdChoices-module_item__r6wG9{min-height:32px;padding:0 20px}.AdChoices-module_text__KzBVq{color:var(--vkui--color_text_primary);font-size:13px;font-weight:600;text-align:center}.AdChoices-module_hidden__ZrnjU{display:none}.AdChoices-module_popup__uUiy-{max-width:unset}.AdChoices-module_popupFullscreen__z2XDs{z-index:1;z-index:var(--vkui--z-index-popup,5)}")},417408:(e,t,i)=>{i.d(t,{POPUP_BOX_ID:()=>o,iconMap:()=>a});var r=i(382996),n=i(264593);const o="AdChoicesPopup",a={info:r.Icon16InfoOutline,more:n.Icon16MoreHorizontal}},659298:(e,t,i)=>{i.d(t,{AdmanHTMLContainer:()=>n});var r=i(779027);class n{get getPlayer(){return this.player}get getContent(){return this.content}get getVideoContainer(){return this.videoContainer}addStickyClass(){this.content.classList.remove(r.default.AdmanContentAbsolute),this.content.classList.add(r.default.AdmanContentSticky)}changeMuteState(e){e?(this.setMuteIcon(),this.buttonMute.dataset.muted="muted"):(this.setVolumeIcon(),delete this.buttonMute.dataset.muted)}setVolumeIcon(){this.buttonMute.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M14.25 4c.9 0 1.75.7 1.75 1.69V18.3c0 1-.85 1.69-1.75 1.69-.76 0-1.5-.28-2.06-.8l-4.24-3.93H6.14A2.1 2.1 0 0 1 4 13.22v-2.44a2.1 2.1 0 0 1 2.14-2.05h1.8L12.2 4.8a3.04 3.04 0 0 1 2.06-.8Zm-.05 1.8a1.23 1.23 0 0 0-.79.32l-4.5 4.17a.9.9 0 0 1-.61.24H6.14c-.14 0-.34.09-.34.25v2.44c0 .16.2.25.34.25H8.3a.9.9 0 0 1 .61.24l4.5 4.17c.2.19.48.3.79.32V5.8Zm7.34.47C23.06 7.79 24 9.79 24 12s-.94 4.2-2.46 5.74a.9.9 0 1 1-1.28-1.27A6.31 6.31 0 0 0 22.2 12a6.3 6.3 0 0 0-1.94-4.46.9.9 0 1 1 1.28-1.27Zm-2.55 3.05C19.6 10.06 20 10.98 20 12s-.39 1.94-1.01 2.68a.9.9 0 0 1-1.38-1.16c.39-.45.59-.98.59-1.52s-.2-1.07-.59-1.52A.9.9 0 0 1 19 9.32Z"/></svg>'}setMuteIcon(){this.buttonMute.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M6.26 4.26a.9.9 0 0 1 1.28 0l12.2 12.2a.9.9 0 1 1-1.28 1.28L16 15.27v3.04c0 1-.85 1.69-1.75 1.69-.76 0-1.5-.28-2.06-.8l-4.24-3.93H6.14A2.1 2.1 0 0 1 4 13.22v-2.44a2.1 2.1 0 0 1 2.14-2.05h1.8l.8-.73-2.48-2.46a.9.9 0 0 1 0-1.28Zm3.76 5.03-1.1 1a.9.9 0 0 1-.62.24H6.14a.39.39 0 0 0-.27.1.2.2 0 0 0-.07.15v2.44a.21.21 0 0 0 .07.15c.06.05.15.1.27.1H8.3a.9.9 0 0 1 .61.24l4.5 4.17c.2.19.48.3.79.32v-4.73L10.02 9.3ZM14.25 4c.9 0 1.75.7 1.75 1.69V8a.9.9 0 1 1-1.8 0V5.8a1.23 1.23 0 0 0-.79.32l-.13.12a.9.9 0 1 1-1.22-1.32l.13-.12a3.04 3.04 0 0 1 2.06-.8Z"/></svg>'}onClickMute(e){const t=this.buttonMute.dataset.muted;e.setVolume(t?1:0),this.videoContainer.muted=!t,this.changeMuteState(!t)}onVolumeChange(){let e=this.videoContainer.muted||!this.videoContainer.volume;this.changeMuteState(e)}hideControls(){this.videoContainer.controls=!1}admanStart(e){this.hideControls(),this.videoContainer.onvolumechange=()=>this.onVolumeChange(),this.buttonMute.onclick=()=>this.onClickMute(e),this.onVolumeChange()}hideMutedButton(){this.buttonMute.classList.add(r.default.hidden)}constructor(){this.player=document.createElement("div"),this.player.dataset.testid="adsRewardContainer",this.player.classList.add(r.default.AdmanPlayerLayer),this.content=document.createElement("div"),this.content.classList.add(r.default.AdmanContent),this.content.classList.add(r.default.AdmanContentAbsolute),this.player.appendChild(this.content),this.videoContainer=document.createElement("video"),this.videoContainer.dataset.testid="adsRewardVideo",this.videoContainer.classList.add(r.default.AdmanVideoContainer),this.videoContainer.playsInline=!0,this.content.appendChild(this.videoContainer),this.controls=document.createElement("div"),this.buttonMute=document.createElement("button"),this.buttonMute.dataset.testid="adsRewardMuteButton",this.buttonMute.classList.add(r.default.AdmanControlsMute),this.controls.appendChild(this.buttonMute),this.content.appendChild(this.controls)}}},779027:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={AdmanPlayerLayer:"admanStyles-module_AdmanPlayerLayer__D8C7Y",AdmanContent:"admanStyles-module_AdmanContent__xd8fM",AdmanContentAbsolute:"admanStyles-module_AdmanContentAbsolute__-QMvV",AdmanContentSticky:"admanStyles-module_AdmanContentSticky__5qdoN","AdmanContent--fluid":"admanStyles-module_AdmanContent--fluid__o98Au",AdmanVideoContainer:"admanStyles-module_AdmanVideoContainer__xGEmQ",AdmanControlsMute:"admanStyles-module_AdmanControlsMute__RiBHm",hidden:"admanStyles-module_hidden__F0r1t"};(0,r.default)(".admanStyles-module_AdmanPlayerLayer__D8C7Y{background:rgba(0,0,0,.8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;bottom:0;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:1}.admanStyles-module_AdmanContent__xd8fM{height:360px;max-height:100%;max-width:100%;width:640px}.admanStyles-module_AdmanContentAbsolute__-QMvV{bottom:0;margin:auto;position:absolute;top:0}.admanStyles-module_AdmanContentSticky__5qdoN{position:-webkit-sticky;position:sticky;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.admanStyles-module_AdmanContent--fluid__o98Au{height:100%;width:100%}.admanStyles-module_AdmanVideoContainer__xGEmQ{background:rgba(0,0,0,.8);height:100%;left:0;position:absolute;top:0;width:100%}@media screen and (min-width:640px){.admanStyles-module_AdmanVideoContainer__xGEmQ{border-radius:8px}}.admanStyles-module_AdmanControlsMute__RiBHm{background:rgba(0,0,0,.6);border:0;border-radius:8px;bottom:10px;color:#fff;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;left:10px;outline:0;padding:10px;position:absolute;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center}.admanStyles-module_AdmanControlsMute__RiBHm.admanStyles-module_hidden__F0r1t{display:none}.admanStyles-module_AdmanControlsMute__RiBHm:hover{background-color:rgba(34,34,34,.6)}")},507846:(e,t,i)=>{i.d(t,{BannerVideo:()=>c});var r=i(474848),n=i(87871),o=i(296540),a=i(333702),s=i(630430),l=i(42032),d=i(860759);const c=({banner:e,className:t,size:i,badge:c,keepAspectRatio:u,isBannerAnimated:h,isBannerVertical:p,isBannerSlim:m,isBannerAlign:f,isDesktop:b})=>{const v=(0,o.useRef)(null),g=(0,o.useMemo)((()=>`video${Math.floor(1e4*Math.random())+Math.floor(1e5*Math.random())+(e.bannerID??"")}`),[e.bannerID]),{ctaText:_,video:y,trackingLink:w}=e,A=parseInt(e.bannerID??"0");let S=h?{}:{width:i,height:i};return u&&(S=(0,a.getVideoSize)(e,{isBannerVertical:p,isBannerSlim:m,isBannerAlign:f,isDesktop:b})),(0,o.useEffect)((()=>{let t;try{(async()=>{if(await(0,s.loadAdManSdk)(),!window.AdManSDK||null===v.current)return;t=new window.AdManSDK;const i={container:"#"+g,debug:!1,iframe:!0,controls:{progressBar:!0,skip:!1,volume:"leftBottom",cta:!1,replay:!1,playPause:!1,allowClose:!1,disclaimer:!1},controlsSize:"small",slot:"preload",initMode:"preload",autoStart:!0,visit:{settings:{preroll:{allowClose:!1}},sections:{preroll:[{bannerID:A,doOnEmptyResponseFromId:!1,ctaText:_,allowClose:!1,type:"video",isStatByAPI:!0,mediafiles:y?.mediafiles??[],duration:y?.duration??0,hasPause:!1,hasVolume:!0,statistics:e.video?.statistics??[],urlToNavigateOnClick:w,allowReplay:!0,autoReplay:!0,openLinkInPopup:!1}]}}};t.init(i)})()}catch(t){(0,l.errorLogger)("Failed to init adman player",t)}}),[e]),(0,r.jsxs)("div",{className:(0,n.classNames)(d.default.video,t),style:S,children:[c,(0,r.jsx)("div",{className:d.default.inner,children:(0,r.jsx)("div",{id:g,ref:v})})]})}},860759:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={video:"BannerVideo-module_video__srKu6",inner:"BannerVideo-module_inner__3Kuwy"};(0,r.default)(".BannerVideo-module_video__srKu6{background-color:var(--vkui--color_background_content);height:80px;overflow:hidden;position:relative;width:142px}.BannerVideo-module_inner__3Kuwy{height:100%;width:100%}")},600414:(e,t,i)=>{i.d(t,{InterstitialAdV2:()=>f});var r=i(474848),n=i(220208),o=i(296540),a=i(250879),s=i(943654),l=i(424555),d=i(796827),c=i(367934),u=i(706126),h=i(920749),p=i(521968),m=i(393576);const f=({interstitialAdParams:e,mode:t,onClose:i,leadAdsSupport:f,imageSize:b,skipSendStats:v,adChoice:g,onShowLeadads:_,onHideLeadads:y})=>{const w=e.data,{getLang:A}=(0,c.useLangProviderContext)(),S=(0,d.useIsLandscape)(),{viewWidth:x}=(0,n.useAdaptivityWithJSMediaQueries)(),P=(0,o.useRef)(!1),E=(0,o.useRef)(!1),k=(0,o.useRef)(!1),{inView:M,ref:C}=(0,a.useInView)({threshold:.5,fallbackInView:!0}),I=x<=n.ViewWidth.MOBILE;if((0,o.useEffect)((()=>{E.current=!1,P.current=!1,k.current=!1}),[e]),(0,o.useEffect)((()=>{w&&M&&!E.current&&!v&&((0,l.sendStatistics)((0,l.extractPixelsOfType)(w,"impression")),e.onImpression(),E.current=!0)}),[e,M,v]),!w)return null;const O=x>n.ViewWidth.MOBILE||S?"horizontal":"vertical",T={href:w.url,headerLabel:(0,l.extractHeaderLabel)(A("apps_ad_subtitle_prefix"),w),buttonText:A("apps_ad_go_to_site"),title:w.title,image:(0,l.extractMainImage)(w),onClick:t=>{if(P.current||(P.current=!0,(0,l.sendStatistics)((0,l.extractPixelsOfType)(w,"click")),e.onClick()),!f||"leadads"!==w.type)return;const i=(0,l.extractAppHash)(w.url);i&&(t.preventDefault(),t.stopPropagation(),k.current=!0,_?.(),e.showMiniAppModal({appId:p.LEAD_ADS_FORM_APP_ID,hash:i},(()=>{k.current=!1,y?.()})))},isFullScreen:I},R=(0,l.extractAdChoiceOptions)(w.adChoices?.options??[],i);return"small"===t?(0,r.jsx)(s.InterstitialSmall,{...T,adChoice:g,domainName:w.domainName,isLandscape:S}):(0,r.jsx)(m.InterstitialBanner,{...T,iconAfterHeaderLabel:g??(0,r.jsx)(u.AdChoices,{options:R,icon:"info"}),getRef:C,direction:O,captionBadge:w.domainName,disclaimer:w.disclaimer,subtitle:w.description,closeIcon:"interstitial"===t?(0,r.jsx)(h.CloseTimer,{onClose:i,timerPaused:k}):void 0,mode:t,imageSize:b})}},288227:(e,t,i)=>{i.d(t,{BannerInfo:()=>c});var r=i(474848),n=i(63305),o=i(220208),a=i(621999),s=i(728192);const l={vertical:s.default.infoVertical,horizontal:void 0},d={horizontal:10,vertical:4},c=({direction:e,headerLabel:t,iconAfterHeaderLabel:i,title:c,subtitle:u,closeIcon:h})=>(0,r.jsxs)("div",{className:l[e],children:[(0,r.jsx)(o.SimpleCell,{className:s.default.head,hasHover:!1,hasActive:!1,before:(0,r.jsx)(n.Icon16LogoVkAds,{className:s.default.adsIcon,"data-testid":"adsInterstitialIcon"}),after:h,children:(0,r.jsxs)("div",{className:s.default.subtitleBox,children:[(0,r.jsx)(o.Subhead,{"data-testid":"adsInterstitialHeaderLabel",children:t}),i&&(0,r.jsx)("div",{className:s.default.icon,children:i})]})}),(0,r.jsx)(o.SimpleCell,{multiline:!0,hasHover:!1,hasActive:!1,subtitle:(0,r.jsx)(o.Headline,{level:"1",weight:"3","data-testid":"adsInterstitialSubtitle",children:(0,r.jsx)(a.TextClamp,{lines:d[e],children:u})}),children:(0,r.jsx)(o.Title,{level:"2","data-testid":"adsInterstitialTitle",children:(0,r.jsx)(a.TextClamp,{lines:2,children:c})})})]})},728192:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={infoVertical:"BannerInfo-module_infoVertical__b1ilC",subtitleBox:"BannerInfo-module_subtitleBox__6Jyqq",icon:"BannerInfo-module_icon__QYz3I",head:"BannerInfo-module_head__7ibOw",adsIcon:"BannerInfo-module_adsIcon__wGq9Q"};(0,r.default)(".BannerInfo-module_infoVertical__b1ilC{margin-bottom:unset;max-width:100%;padding:4px 0 0;width:100%}.BannerInfo-module_subtitleBox__6Jyqq{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;color:var(--vkui--color_text_subhead)}.BannerInfo-module_icon__QYz3I{color:var(--vkui--color_icon_tertiary);margin-left:4px}.BannerInfo-module_head__7ibOw{z-index:1}.BannerInfo-module_head__7ibOw>div{overflow:unset}.BannerInfo-module_head__7ibOw .BannerInfo-module_adsIcon__wGq9Q{color:var(--vkui--color_icon_secondary);margin-right:-4px;padding-right:0}")},920749:(e,t,i)=>{i.d(t,{CloseTimer:()=>u});var r=i(474848),n=i(574857),o=i(220208),a=i(296540),s=i(521968),l=i(367934),d=i(46021),c=i(905798);const u=({onClose:e,timerPaused:t})=>{const{getLang:i}=(0,l.useLangProviderContext)(),[u,h]=(0,a.useState)(s.INTERSTITIAL_AD_DURATION);(0,a.useEffect)((()=>{const e=setInterval((()=>{"hidden"===document.visibilityState||t?.current||h((t=>{const i=t-1;return!i&&clearInterval(e),i}))}),1e3);return()=>{clearInterval(e)}}),[]);const p=t=>{t.stopPropagation(),t.preventDefault(),e(t)};return 0===u?(0,r.jsx)(o.IconButton,{onClick:p,"data-testid":"adsInterstitialCloseButton","aria-label":i("apps_ad_interstitial_close"),children:(0,r.jsx)(n.Icon28Dismiss,{className:c.default.icon})}):(0,r.jsx)(d.ProgressCircle,{value:u,min:0,max:s.INTERSTITIAL_AD_DURATION,size:28})}},905798:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={icon:"CloseTimer-module_icon__-WKIH"};(0,r.default)(".CloseTimer-module_icon__-WKIH{color:var(--vkui--vkontakte_color_icon_outline_medium)}")},393576:(e,t,i)=>{i.d(t,{InterstitialBanner:()=>p});var r=i(474848),n=i(87871),o=i(220208),a=i(296540),s=i(424555),l=i(288227),d=i(176149),c=i(963921);const u={vertical:d.default.bannerVertical,horizontal:void 0},h={vertical:d.default.rootVertical,horizontal:void 0},p=({href:e,direction:t,image:i,captionBadge:p,captionBadgeIconUrl:m,disclaimer:f,headerLabel:b,iconAfterHeaderLabel:v,title:g,subtitle:_,buttonText:y,onClick:w,getRef:A,closeIcon:S,mode:x,isFullScreen:P,imageSize:E})=>{const k=(0,a.useRef)(null),[M,C]=(0,a.useState)(!1),I={url:i,captionBadge:p,captionBadgeIconUrl:m,disclaimer:f,direction:t,imageSize:E},O={direction:t,headerLabel:b,iconAfterHeaderLabel:v,title:g,subtitle:_,closeIcon:S};return(0,a.useLayoutEffect)((()=>{const e=k.current;e&&(0,s.nativeAdShouldBeSticky)(e)&&C(!0)}),[]),(0,r.jsx)("a",{target:"_blank",ref:k,href:e,className:(0,n.classNames)(d.default.root,P&&d.default.rootFullscreen,h[t],"multi"===x&&d.default.rootMulti),onClick:w,rel:"noreferrer","data-testid":"adsInterstitialContainer",children:(0,r.jsx)("div",{ref:A,className:(0,n.classNames)(d.default.banner,"interstitial"===x&&d.default.roundBorder,u[t],P&&d.default.bannerFullscreen,"interstitial"===x&&"vertical"!==t&&d.default.bannerCentered,"interstitial"===x&&M&&d.default.bannerCenteredScroll),children:"horizontal"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.MainImage,{...I}),(0,r.jsxs)("div",{className:d.default.right,children:[(0,r.jsx)(l.BannerInfo,{...O}),(0,r.jsx)(o.Div,{className:d.default.buttonHorizontal,children:(0,r.jsx)(o.Button,{stretched:!0,size:"l","data-testid":"adsInterstitialButton",children:y})})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.BannerInfo,{...O}),(0,r.jsx)(c.MainImage,{...I}),(0,r.jsx)(o.Div,{className:d.default.buttonVertical,children:(0,r.jsx)(o.Button,{stretched:!0,size:"l","data-testid":"adsInterstitialButton",children:y})})]})})})}},176149:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={root:"InterstitialBanner-module_root__ZCwnQ",rootMulti:"InterstitialBanner-module_rootMulti__WxhvK",rootVertical:"InterstitialBanner-module_rootVertical__egaqY",rootFullscreen:"InterstitialBanner-module_rootFullscreen__-fSW3",banner:"InterstitialBanner-module_banner__53h-N",roundBorder:"InterstitialBanner-module_roundBorder__Ya-2X",bannerFullscreen:"InterstitialBanner-module_bannerFullscreen__edB9q",bannerCentered:"InterstitialBanner-module_bannerCentered__HF6cX",bannerVertical:"InterstitialBanner-module_bannerVertical__FIrGB",buttonVertical:"InterstitialBanner-module_buttonVertical__H5y-3",buttonHorizontal:"InterstitialBanner-module_buttonHorizontal__vY7c1",right:"InterstitialBanner-module_right__FuswD",bannerCenteredScroll:"InterstitialBanner-module_bannerCenteredScroll__N4LMW"};(0,r.default)(".InterstitialBanner-module_root__ZCwnQ{background-color:var(--vkui--color_avatar_overlay);bottom:0;bottom:var(--vkui_internal--safe_area_inset_bottom,0);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;left:0;position:absolute;top:0;width:100%;z-index:1;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;text-align:left;text-decoration:none}.InterstitialBanner-module_root__ZCwnQ.InterstitialBanner-module_rootMulti__WxhvK{background-color:unset;position:unset}.InterstitialBanner-module_root__ZCwnQ.InterstitialBanner-module_root__ZCwnQ:hover{text-decoration:none}.InterstitialBanner-module_rootVertical__egaqY{-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;align-items:flex-start}.InterstitialBanner-module_banner__53h-N,.InterstitialBanner-module_rootFullscreen__-fSW3{background-color:var(--vkui--color_background_content)}.InterstitialBanner-module_banner__53h-N{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;max-height:100%}.InterstitialBanner-module_roundBorder__Ya-2X{border-radius:var(--vkui--size_border_radius_paper--regular)}.InterstitialBanner-module_bannerFullscreen__edB9q{border-radius:0;max-width:100%}.InterstitialBanner-module_bannerCentered__HF6cX{bottom:0;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:auto;position:absolute;top:0}.InterstitialBanner-module_bannerVertical__FIrGB{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;justify-content:flex-start}.InterstitialBanner-module_buttonVertical__H5y-3{bottom:var(--vkui--size_base_padding_horizontal--regular);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;left:0;position:absolute;width:100%}.InterstitialBanner-module_buttonHorizontal__vY7c1{padding-bottom:0;padding-top:0}.InterstitialBanner-module_right__FuswD{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;max-height:320px;max-width:320px;padding:4px 4px 20px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.InterstitialBanner-module_bannerCenteredScroll__N4LMW{position:-webkit-sticky;position:sticky;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.InterstitialBanner-module_bannerCentered__HF6cX.InterstitialBanner-module_bannerCenteredScroll__N4LMW{bottom:unset;margin:unset}")},963921:(e,t,i)=>{i.d(t,{MainImage:()=>d});var r=i(474848),n=i(87871),o=i(220208),a=i(575618);const s={vertical:a.default.boxVertical,horizontal:void 0},l={vertical:328,horizontal:280},d=({direction:e,captionBadge:t,captionBadgeIconUrl:i,disclaimer:d,url:c,imageSize:u})=>(0,r.jsx)(o.Div,{className:(0,n.classNames)(a.default.box,s[e]),children:(0,r.jsxs)(o.ImageBase,{className:a.default.image,size:u??l[e],src:c,"data-testid":"adsInterstitialImageContainer",children:[(0,r.jsx)("img",{src:c,className:a.default.blur,alt:"","data-testid":"adsInterstitialImage"}),(i||t)&&(0,r.jsxs)("div",{className:(0,n.classNames)(a.default.caption,!i&&a.default.captionNoImage),children:[i&&(0,r.jsx)(o.ImageBase,{size:16,className:a.default.icon,src:i}),t&&(0,r.jsx)(o.Caption,{level:"1","data-testid":"adsInterstitialImageCaption",children:t})]}),d&&(0,r.jsx)(o.Caption,{level:"1",className:a.default.disclaimer,"data-testid":"adsInterstitialImageDisclaimer",children:d})]})})},575618:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={box:"MainImage-module_box__ZYwd-",boxVertical:"MainImage-module_boxVertical__pDglL",blur:"MainImage-module_blur__eSsWK",image:"MainImage-module_image__6rZ4g",icon:"MainImage-module_icon__D8-W3",pixel:"MainImage-module_pixel__OL7IK",caption:"MainImage-module_caption__YL-5g",captionNoImage:"MainImage-module_captionNoImage__KFwYU",disclaimer:"MainImage-module_disclaimer__RwZTa"};(0,r.default)(".MainImage-module_box__ZYwd-{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:20px 0 20px 20px}.MainImage-module_boxVertical__pDglL{max-width:360px;padding:var(--vkui--size_base_padding_horizontal--regular);width:100%}.MainImage-module_blur__eSsWK{-webkit-filter:blur(20px);filter:blur(20px);height:100%;left:0;-o-object-fit:cover;object-fit:cover;position:absolute;top:0;-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);width:100%;z-index:-2}.MainImage-module_image__6rZ4g{border-radius:8px;max-height:100%;max-width:100%;overflow:hidden}.MainImage-module_image__6rZ4g>img{-o-object-fit:contain;object-fit:contain}.MainImage-module_icon__D8-W3{border-radius:4px;margin-right:4px}.MainImage-module_pixel__OL7IK{height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}.MainImage-module_caption__YL-5g{background-color:var(--vkui--color_overlay_primary);border-radius:6px;color:var(--vkui--color_text_contrast);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;left:8px;padding:4px 6px 4px 4px;position:absolute;top:8px;z-index:1;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center}.MainImage-module_captionNoImage__KFwYU{padding-left:6px}.MainImage-module_disclaimer__RwZTa{background-color:var(--vkui--color_overlay_primary);bottom:0;color:var(--vkui--color_text_contrast);left:0;padding:8px;position:absolute;right:0;z-index:1}")},46021:(e,t,i)=>{i.d(t,{ProgressCircle:()=>a});var r=i(474848),n=i(220208),o=i(298622);const a=({value:e,min:t,max:i,size:a})=>{const l=a/2-1,d=a/2,c=`${function(e,t){const i=s(t);return Math.round(i*((100-e)/100))}(Math.round(e/(i-t)*100),a)}px`,u=`${s(a)}px`;return(0,r.jsxs)("div",{className:o.default.box,style:{width:a,height:a},"data-testid":"adsInterstitialCloseProgress",children:[(0,r.jsx)("div",{className:o.default.wrapper,children:(0,r.jsx)("svg",{className:o.default.svg,width:a,height:a,viewBox:`0 0 ${a} ${a}`,version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("circle",{className:o.default.circle,r:l,cx:d,cy:d,strokeDashoffset:c,strokeDasharray:u})})}),(0,r.jsx)(n.Paragraph,{weight:"2",useAccentWeight:!0,children:e})]})};function s(e){return Math.PI*e}},298622:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={box:"ProgressCircle-module_box__dHXQZ",wrapper:"ProgressCircle-module_wrapper__PEu-K",svg:"ProgressCircle-module_svg__H2q1-",circle:"ProgressCircle-module_circle__hJ-R-"};(0,r.default)(".ProgressCircle-module_box__dHXQZ{color:var(--vkui--color_text_primary);position:relative}.ProgressCircle-module_box__dHXQZ,.ProgressCircle-module_wrapper__PEu-K{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center}.ProgressCircle-module_wrapper__PEu-K{height:100%;left:0;position:absolute;top:0;width:100%}.ProgressCircle-module_svg__H2q1-{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg)}.ProgressCircle-module_circle__hJ-R-{stroke-width:2px;stroke:var(--vkui--color_track_buffer);fill:transparent;stroke-linecap:round}")},521968:(e,t,i)=>{i.d(t,{INTERSTITIAL_AD_DURATION:()=>r,INTERSTITIAL_AD_DURATION_LONG:()=>n,LEAD_ADS_FORM_APP_ID:()=>o});const r=5,n=10,o=51478948},851896:(e,t,i)=>{i.d(t,{InterstitialBackground:()=>l});var r=i(474848),n=i(87871),o=i(220208),a=i(296540),s=i(95653);const l=(0,a.forwardRef)((({children:e},t)=>{const{viewWidth:i}=(0,o.useAdaptivityWithJSMediaQueries)(),a=i<=o.ViewWidth.MOBILE;return(0,r.jsx)("div",{ref:t,className:(0,n.classNames)(s.default.background,a&&s.default.mobile),children:e})}));l.displayName="InterstitialBackground"},95653:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={background:"InterstitialBackground-module_background__Al-e0",mobile:"InterstitialBackground-module_mobile__Op7AE"};(0,r.default)(".InterstitialBackground-module_background__Al-e0{background-color:var(--vkui--color_avatar_overlay);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:100%;left:0;position:absolute;top:0;width:100%;z-index:1;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;text-align:left;text-decoration:none}.InterstitialBackground-module_mobile__Op7AE{background-color:var(--vkui--color_background_content)}")},218746:(e,t,i)=>{i.d(t,{InterstitialMotionAd:()=>p});var r=i(474848),n=i(87871),o=i(220208),a=i(377401),s=i(296540),l=i(521968),d=i(42032),c=i(851896),u=i(369763),h=i(691614);const p=({motionAdParams:e,onClose:t})=>{const i=e.data,{isDesktop:p}=(0,o.useAdaptivityWithJSMediaQueries)(),m=(0,s.useRef)(null),f=(0,s.useRef)(!1),b=(0,s.useRef)(!1);return(0,s.useEffect)((()=>{f.current=!1,b.current=!1}),[e]),(0,s.useEffect)((()=>{(async()=>{const r=m.current;if(!r)return;const n={};i.creativeType===h.MOTION_ADS_LEADADS_TYPE&&(n.appApi={showModal:(t,i)=>{e.showMiniAppModal({hash:t,appId:l.LEAD_ADS_FORM_APP_ID},(()=>{i()}))}});try{await a.default.init(n);const o={container:r,banner:i,onClicked:()=>{f.current||(f.current=!0,e.onClick())},onClosed:t,onClosedByUser:t,onReady:()=>{b.current||(b.current=!0,e.onImpression())}};a.default.create(o)}catch(r){throw(0,d.errorLogger)(r),t(),r}})()}),[]),(0,r.jsx)(c.InterstitialBackground,{children:(0,r.jsx)("div",{className:(0,n.classNames)(u.default.banner,!p&&u.default.bannerFullscreen),children:(0,r.jsx)("div",{className:u.default.inner,children:(0,r.jsx)("div",{ref:m})})})})}},369763:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={banner:"InterstitialMotionAd-module_banner__6-8U8",bannerFullscreen:"InterstitialMotionAd-module_bannerFullscreen__-svJj",inner:"InterstitialMotionAd-module_inner__J8Zpb"};(0,r.default)(".InterstitialMotionAd-module_banner__6-8U8{background-color:var(--vkui--color_background_content);border-radius:var(--vkui--size_border_radius_paper--regular);bottom:0;height:320px;margin:auto;max-height:100%;max-width:100%;overflow:hidden;position:absolute;top:0;width:620px}.InterstitialMotionAd-module_banner__6-8U8.InterstitialMotionAd-module_bannerFullscreen__-svJj{border-radius:0;height:100%;left:0;top:0;width:100%}.InterstitialMotionAd-module_inner__J8Zpb{height:100%;width:100%}")},691614:(e,t,i)=>{i.d(t,{MOTION_ADS_LEADADS_TYPE:()=>r});const r="vkGames_interstitial_lead_form"},287734:(e,t,i)=>{i.d(t,{InterstitialMulti:()=>S});var r=i(474848),n=i(95608),o=i(87871),a=i(220208),s=i(296540),l=i(673730),d=i(76583),c=i(600414),u=i(920749),h=i(521968),p=i(851896),m=i(424555),f=i(796827),b=i(289927),v=i(950567);const g=0,_=.5,y=1,w=1.5,A=2,S=({interstitialMulti:e,onClose:t,leadAdsSupport:i})=>{const S=(0,f.useIsLandscape)(),x=(0,s.useRef)(null),[P,E]=(0,s.useState)(g),[k,M]=(0,s.useState)(!1),C=(0,s.useRef)(!1),I=e[0],O=e[1],T=(0,s.useRef)(null),R=(0,s.useRef)(null),{viewWidth:j}=(0,a.useAdaptivityWithJSMediaQueries)(),N=j<=a.ViewWidth.SMALL_TABLET,[L,D]=(0,s.useState)(null),B=(0,r.jsx)(d.AdChoiceButton,{onClick:e=>{e.stopPropagation(),e.preventDefault(),D((e=>null===e?{ref:T,options:(0,m.extractAdChoiceOptions)(I.data.adChoices?.options??[],(()=>{P===g||P===_?E(y):t()}))}:null))},ref:T,className:(0,o.classNames)(N&&b.default.adChoiceSmall),icon:N?"more":"info"}),V=(0,r.jsx)(d.AdChoiceButton,{onClick:e=>{e.stopPropagation(),e.preventDefault(),D((e=>null===e?{ref:R,options:(0,m.extractAdChoiceOptions)(O.data.adChoices?.options??[],(()=>{P===y||P===w?E(A):t()}))}:null))},ref:R,className:(0,o.classNames)(N&&b.default.adChoiceSmall),icon:N?"more":"info"}),H=()=>C.current,z={leadAdsSupport:i,mode:"multi",onClose:()=>{P===A&&t()},onShowLeadads:()=>{C.current=!0},onHideLeadads:()=>{C.current=!1}},U=()=>{E((e=>e===_?y:A))};return(0,s.useLayoutEffect)((()=>{const e=x.current;e&&e.clientHeight>1.5*document.documentElement.clientHeight&&M(!0)}),[]),(0,r.jsx)(p.InterstitialBackground,{ref:x,children:(0,r.jsxs)("div",{className:(0,o.classNames)(b.default.root,k&&b.default.rootSticky,N&&b.default.rootMobile,N&&S&&b.default.rootMobileLandscape,P===A&&!N&&b.default.rootMulti),children:[P<A&&(0,r.jsxs)("div",{className:b.default.progress,children:[(0,r.jsx)(v.ProgressAnimated,{fixedValue:P<y?void 0:100,maxShowTimeSeconds:h.INTERSTITIAL_AD_DURATION_LONG,onHalfProgress:()=>{E(_)},onCompleted:()=>{E(y)},isPaused:H}),(0,r.jsx)(v.ProgressAnimated,{fixedValue:P<y?0:void 0,maxShowTimeSeconds:h.INTERSTITIAL_AD_DURATION_LONG,onHalfProgress:()=>{E(w)},onCompleted:()=>{E(A)},isPaused:H})]}),P===_&&(0,r.jsx)(a.IconButton,{className:b.default.skip,onClick:U,children:(0,r.jsx)(n.Icon28SkipForward,{className:b.default.icon})}),P===w&&(0,r.jsx)(a.IconButton,{className:b.default.skip,onClick:U,children:(0,r.jsx)(n.Icon28SkipForward,{className:b.default.icon})}),P===A&&(0,r.jsx)("div",{className:b.default.closeTimer,children:(0,r.jsx)(u.CloseTimer,{onClose:e=>{e.stopPropagation(),t()},timerPaused:C})}),(0,r.jsxs)("div",{className:(0,o.classNames)(b.default.banner,P===A&&b.default.bannerMulti,!N&&b.default.bannerVertical,P===A&&N&&S&&b.default.bannerMobileLandscape),children:[P<y&&(0,r.jsx)(c.InterstitialAdV2,{...z,interstitialAdParams:I}),P<A&&P>=y&&(0,r.jsx)(c.InterstitialAdV2,{...z,interstitialAdParams:O}),P===A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.InterstitialAdV2,{...z,interstitialAdParams:I,mode:N?"small":"multi",imageSize:200,skipSendStats:!0,adChoice:B}),N&&S&&(0,r.jsx)("div",{className:b.default.divider}),(0,r.jsx)(c.InterstitialAdV2,{...z,interstitialAdParams:O,mode:N?"small":"multi",imageSize:200,skipSendStats:!0,adChoice:V})]})]}),L&&(0,r.jsx)(l.AdChoiceActionSheet,{toggleRef:L.ref,options:L.options,onClose:()=>{D(null)}})]})})}},289927:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={root:"InterstitialMulti-module_root__rplSV",rootMulti:"InterstitialMulti-module_rootMulti__iaOoi",rootMobile:"InterstitialMulti-module_rootMobile__7aeHX",rootMobileLandscape:"InterstitialMulti-module_rootMobileLandscape__dfhGS",rootSticky:"InterstitialMulti-module_rootSticky__KqDNw",banner:"InterstitialMulti-module_banner__g63zY",bannerMulti:"InterstitialMulti-module_bannerMulti__KRFol",bannerMobileLandscape:"InterstitialMulti-module_bannerMobileLandscape__E-Wxa",bannerVertical:"InterstitialMulti-module_bannerVertical__Hu0wV",progress:"InterstitialMulti-module_progress__lUZs1",progressItem:"InterstitialMulti-module_progressItem__gHAjy",skip:"InterstitialMulti-module_skip__TIkSL",closeTimer:"InterstitialMulti-module_closeTimer__wlu1v",icon:"InterstitialMulti-module_icon__0q9h8",adChoiceSmall:"InterstitialMulti-module_adChoiceSmall__mJNQY",divider:"InterstitialMulti-module_divider__dfT-o"};(0,r.default)(".InterstitialMulti-module_root__rplSV{background-color:var(--vkui--color_background_content);border-radius:var(--vkui--size_border_radius_paper--regular);bottom:0;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:auto;max-height:100%;max-width:100%;overflow:hidden;position:absolute;top:0;width:600px}.InterstitialMulti-module_rootMulti__iaOoi{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.InterstitialMulti-module_rootMobile__7aeHX{border-radius:0;height:100%}.InterstitialMulti-module_rootMobileLandscape__dfhGS{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;width:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column}.InterstitialMulti-module_rootSticky__KqDNw{position:-webkit-sticky;position:sticky;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.InterstitialMulti-module_root__rplSV.InterstitialMulti-module_rootSticky__KqDNw{bottom:unset;margin:unset}.InterstitialMulti-module_banner__g63zY{border-radius:inherit;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow:hidden;z-index:1}.InterstitialMulti-module_bannerMulti__KRFol{padding-left:var(--vkui--size_base_padding_horizontal--regular);padding-right:var(--vkui--size_base_padding_horizontal--regular);padding-top:44px}.InterstitialMulti-module_bannerMobileLandscape__E-Wxa{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:100%;padding:8px 44px 8px 8px}.InterstitialMulti-module_bannerMulti__KRFol.InterstitialMulti-module_bannerVertical__Hu0wV{padding:0}.InterstitialMulti-module_progress__lUZs1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;gap:4px;padding:var(--vkui--size_base_padding_vertical--regular) var(--vkui--size_base_padding_horizontal--regular) 0}.InterstitialMulti-module_progressItem__gHAjy{width:50%}.InterstitialMulti-module_skip__TIkSL{position:absolute;right:8px;top:18px;z-index:2}.InterstitialMulti-module_closeTimer__wlu1v{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;height:44px;position:absolute;right:0;top:0;width:44px;z-index:2;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center}.InterstitialMulti-module_icon__0q9h8{color:var(--vkui--color_icon_medium)}.InterstitialMulti-module_adChoiceSmall__mJNQY{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;background-color:var(--vkui--color_overlay_primary);border-radius:50%;color:var(--vkui--color_icon_contrast);height:20px;justify-content:center;position:absolute;right:4px;top:4px;width:20px;z-index:3}.InterstitialMulti-module_divider__dfT-o{width:8px}")},950567:(e,t,i)=>{i.d(t,{ProgressAnimated:()=>l});var r=i(474848),n=i(220208),o=i(296540),a=i(289927),s=i(478408);const l=({fixedValue:e,onHalfProgress:t,maxShowTimeSeconds:i,onCompleted:l,isPaused:d})=>{const[c,u]=(0,o.useState)(0);return(0,o.useEffect)((()=>{if(void 0===e){const e=(0,s.startUpdateFillRate)(i,u,t,l,d);return()=>e()}}),[e]),(0,r.jsx)(n.Progress,{value:e??c,className:a.default.progressItem})}},478408:(e,t,i)=>{function r(e,t,i,r,n){let o,a=!1,s=!1,l=0;return function d(){requestAnimationFrame((c=>{if(o=o??c,"hidden"===document.visibilityState||n())return o=c,void d();l+=c-o,o=c;const u=l/(1e3*e),h=Math.round(Math.min(100*u,100));t(h),h>50&&!s&&(s=!0,i()),h>=100&&!a&&r(),h<100&&!a&&d()}))}(),()=>{a=!0}}i.d(t,{startUpdateFillRate:()=>r})},943654:(e,t,i)=>{i.d(t,{InterstitialSmall:()=>c});var r=i(474848),n=i(87871),o=i(220208),a=i(872524),s=i(621999),l=i(367934),d=i(461431);const c=({href:e,adChoice:t,title:i,headerLabel:c,image:u,domainName:h,onClick:p,isFullScreen:m,isLandscape:f})=>{const{getLang:b}=(0,l.useLangProviderContext)();return(0,r.jsxs)("a",{href:e,target:"_blank",rel:"noreferrer",className:(0,n.classNames)(d.default.root,m&&d.default.rootFullscreen,m&&f&&d.default.rootFullscreenLandscape),onClick:p,children:[t,(0,r.jsxs)("div",{className:d.default.imageBox,children:[(0,r.jsx)("img",{src:u,className:d.default.image,alt:""}),(0,r.jsx)(a.AdsBadge,{advertisingLabel:c,ageRestrictions:""})]}),(0,r.jsxs)(o.Div,{className:d.default.bottom,children:[(0,r.jsx)(o.Subhead,{className:d.default.domain,"data-testid":"adsInterstitialHeaderLabel",children:h??""}),(0,r.jsx)(o.Title,{className:d.default.title,level:"2","data-testid":"adsInterstitialTitle",children:(0,r.jsx)(s.TextClamp,{lines:m?1:2,children:i})}),(0,r.jsx)(o.Button,{stretched:!0,size:"l","data-testid":"adsInterstitialButton",children:b("apps_ad_go_to_site")})]})]})}},461431:(e,t,i)=>{i.d(t,{default:()=>n});var r=i(214367),n={root:"InterstitialSmall-module_root__hZYDY",rootFullscreen:"InterstitialSmall-module_rootFullscreen__tFTr3",rootFullscreenLandscape:"InterstitialSmall-module_rootFullscreenLandscape__ZioDO",imageBox:"InterstitialSmall-module_imageBox__UsZeZ",image:"InterstitialSmall-module_image__KWZWQ",bottom:"InterstitialSmall-module_bottom__BC4YF",domain:"InterstitialSmall-module_domain__SMUtV",title:"InterstitialSmall-module_title__tfGns"};(0,r.default)(".InterstitialSmall-module_root__hZYDY{background-color:var(--vkui--color_background_content);border-radius:var(--vkui--size_border_radius_paper--regular);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;position:relative;text-decoration:none;width:100%}.InterstitialSmall-module_root__hZYDY:hover{text-decoration:none}.InterstitialSmall-module_rootFullscreen__tFTr3{max-width:100%}.InterstitialSmall-module_rootFullscreenLandscape__ZioDO{max-width:100%;width:50%}.InterstitialSmall-module_root__hZYDY:not(:last-child){margin-bottom:var(--vkui--size_base_padding_vertical--regular)}.InterstitialSmall-module_imageBox__UsZeZ{border-radius:inherit;overflow:hidden;padding-top:40%;position:relative;z-index:1}.InterstitialSmall-module_image__KWZWQ{height:100%;left:0;-o-object-fit:cover;object-fit:cover;position:absolute;top:0;width:100%}.InterstitialSmall-module_bottom__BC4YF{text-align:center}.InterstitialSmall-module_domain__SMUtV{color:var(--vkui--color_text_subhead);margin-bottom:4px;min-height:16px}.InterstitialSmall-module_title__tfGns{color:var(--vkui--color_text_primary);margin-bottom:4px}")},848526:(e,t,i)=>{i.d(t,{MiniAppIframe:()=>o});var r=i(474848),n=i(172671);const o=()=>{const{host:e}=(0,n.useHostServiceProviderContext)();if(!e)return null;const{buildUrl:t,getIframeRef:i}=e,o=i(),{iframePropsState:a}=e?.getMiniAppState()||{},[s]=a,l=t().toString();return(0,r.jsx)("iframe",{...s,ref:o,src:l})}},478108:(e,t,i)=>{i.d(t,{ADMAN3_SCRIPT_URL:()=>u,ADMAN_SCRIPT_EXECUTE_TIMEOUT_MS:()=>d,ADMAN_SCRIPT_LOAD_TIMEOUT_MS:()=>l,ADMAN_SCRIPT_URL:()=>c,ADS_REQUEST_URL:()=>s,AdFormats:()=>n,AdsQueryParams:()=>k,AdsSkippedReasons:()=>M,BASE_VIDEO_QUALITY:()=>p,DefaultBannerAvailability:()=>r,FPID_SCRIPT_LOAD_TIMEOUT_MS:()=>f,FPID_SCRIPT_URL:()=>m,FPID_STORAGE_KEY:()=>b,IMAGE_SIZE_BANNER_ALIGN:()=>w,IMAGE_SIZE_L:()=>A,IMAGE_SIZE_SLIM:()=>y,IMAGE_SIZE_VERTICAL_MOBILE:()=>x,IMAGE_SIZE_XL:()=>S,IMAGE_SIZE_XXL:()=>P,MAX_LAST_SHOWN_IDS_LENGTH:()=>v,MOTION_ADS_EXPERIMENT_ID:()=>h,NativeAdsFormat:()=>o,USER_IS_BANNED_SLOT:()=>a,browser:()=>g,config:()=>_,dot:()=>E});const r={isAvailable:!0,position:{top:!0,bottom:!0},heightType:{compact:!0,regular:!0},orientation:{horizontal:!0,vertical:!0},animated:!0,verticalOverlay:!0,verticalRight:!0},n={REWARD:"reward",INTERSTITIAL:"interstitial",BANNER:"banner"},o={REWARD:n.REWARD,INTERSTITIAL:n.INTERSTITIAL},a=-1,s="https://ad.mail.ru/adp/",l=2e3,d=2e3,c="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",u="//ad.mail.ru/static/vk-adman.js?sdk=1",h=16347,p=360,m="https://ad.mail.ru/static/sync-loader.js",f=2e3,b="rb_sync_id",v=5,g={mobile:/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent),FLASH_BLOCKED:0,FLASH_READY:1,FLASH_UNKNOWN:2,checkFlashStatus:e=>e(g.FLASH_UNKNOWN)},_={vpaidJsInterface:"https://ad.mail.ru/static/vpaid-js-interface.swf"},y=56,w=60,A=80,S=141,x=160,P=200,E="·",k={SlotID:"q",SiteId:"_SITEID",VKUserId:"vk_id",AppId:"content_id",Lang:"lang",Sign:"sign",Timestamp:"ts",TestMode:"test_mode",Rnd:"rnd",TypeLoad:"type_load",Rewarded:"rewarded",Fpid:"fpid",LastShownIds:"last_shown_ids",MotionAds:"feature_websdk",ExperimentId:"exp_id"},M={NETWORK_NO_AD:"network_no_ad",NETWORK_ERROR:"network_error",INTERNAL_TIMEOUT:"timeout",NO_AD_CONFIG:"no_ad_config"}},565151:(e,t,i)=>{i.d(t,{AppIDs:()=>r,AppIDsWithNarrowMinHeight:()=>o,AppIDsWithNarrowMinWidth:()=>n});const r={one_time_donut:51528700,donut_payment:7132546,vkpay:6217559},n=[r.donut_payment,r.one_time_donut],o=[r.one_time_donut]},48265:(e,t,i)=>{var r,n,o;i.d(t,{ANONYMOUS_UNSUPPORTED_EVENTS:()=>d,EventsToMiniApp:()=>o,INTERNAL_MINIAPP_EVENTS:()=>a,MODAL_EVENTS:()=>s,MiniAppEvents:()=>r,PRIVATE_EVENTS:()=>l,SHOW_ADS_EVENTS:()=>c}),(n=r||(r={})).Init="VKWebAppInit",n.GetAuthToken="VKWebAppGetAuthToken",n.CallApiMethod="VKWebAppCallAPIMethod",n.GetClientVersion="VKWebAppGetClientVersion",n.Close="VKWebAppClose",n.GetGeodata="VKWebAppGetGeodata",n.StorageGet="VKWebAppStorageGet",n.StorageSet="VKWebAppStorageSet",n.GetUserInfo="VKWebAppGetUserInfo",n.OpenApp="VKWebAppOpenApp",n.AllowNotifications="VKWebAppAllowNotifications",n.DenyNotifications="VKWebAppDenyNotifications",n.GetPhoneNumber="VKWebAppGetPhoneNumber",n.GetEmail="VKWebAppGetEmail",n.StorageGetKeys="VKWebAppStorageGetKeys",n.OpenPayForm="VKWebAppOpenPayForm",n.ActionDone="VKWebAppActionDone",n.AddToFavorites="VKWebAppAddToFavorites",n.AddToMenu="VKWebAppAddToMenu",n.CheckAllowedScopes="VKWebAppCheckAllowedScopes",n.AllowMessagesFromGroup="VKWebAppAllowMessagesFromGroup",n.JoinGroup="VKWebAppJoinGroup",n.LeaveGroup="VKWebAppLeaveGroup",n.GetGroupInfo="VKWebAppGetGroupInfo",n.CreateHash="VKWebAppCreateHash",n.Alert="VKWebAppAlert",n.GetConfig="VKWebAppGetConfig",n.GetLaunchParams="VKWebAppGetLaunchParams",n.RetargetingPixel="VKWebAppRetargetingPixel",n.ScrollTopStart="VKWebAppScrollTopStart",n.ScrollTopStop="VKWebAppScrollTopStop",n.ShowSlidesSheet="VKWebAppShowSlidesSheet",n.SetTitle="VKWebAppSetTitle",n.ShowImages="VKWebAppShowImages",n.SetLocation="VKWebAppSetLocation",n.CopyText="VKWebAppCopyText",n.ConversionHit="VKWebAppConversionHit",n.Scroll="VKWebAppScroll",n.TrackEvent="VKWebAppTrackEvent",n.ResizeWindow="VKWebAppResizeWindow",n.GetSilentToken="VKWebAppGetSilentToken",n.AuthByExchangeToken="VKWebAppAuthByExchangeToken",n.AppForceLogout="VKWebAppForceLogout",n.ScrollTop="VKWebAppScrollTop",n.Translate="VKWebAppTranslate",n.ShowBannerAd="VKWebAppShowBannerAd",n.HideBannerAd="VKWebAppHideBannerAd",n.CheckBannerAd="VKWebAppCheckBannerAd",n.CheckNativeAds="VKWebAppCheckNativeAds",n.ShowNativeAds="VKWebAppShowNativeAds",n.SetSupportedHandlers="SetSupportedHandlers",n.KeyboardLock="VKWebAppKeyboardLock",n.ShowGoodOrderBox="VKWebAppShowGoodOrderBox",function(e){e.BannerAdClosedByUser="VKWebAppBannerAdClosedByUser",e.BannerAdUpdated="VKWebAppBannerAdUpdated",e.ScrollTop="VKWebAppScrollTop",e.UpdateConfig="VKWebAppUpdateConfig",e.ChangeFragment="VKWebAppChangeFragment",e.LocationChanged="VKWebAppLocationChanged",e.ViewHide="VKWebAppViewHide",e.ViewRestore="VKWebAppViewRestore"}(o||(o={}));const a=["VKWebAppAlert","VKWebAppAuthByExchangeToken","VKWebAppChangePassword","VKWebAppGetCustomConfig","VKWebAppLogout","VKWebAppOpenLiveCoverCamera","VKWebAppOpenP2P","VKWebAppPrivacyEditSuccess"],s=["VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetSilentToken","VKWebAppAllowMessagesFromGroup","VKWebAppAllowNotifications","VKWebAppShowImages","VKWebAppShowSlidesSheet","VKWebAppAddToFavorites","VKWebAppAddToMenu","VKWebAppJoinGroup","VKWebAppGetAuthToken","VKWebAppAlert"],l=["SetSupportedHandlers"],d=["VKWebAppCheckAllowedScopes","VKWebAppAllowNotifications","VKWebAppDenyNotifications","VKWebAppGetEmail","VKWebAppGetPhoneNumber"],c=["VKWebAppShowNativeAds","VKWebAppShowBannerAd"]},62495:(e,t,i)=>{i.d(t,{FeatureEnabledKeys:()=>r});const r={AnonymousLaunch:"mini_apps_anonymous_launch",AdsTestMode:"apps_ads_test_mode",SendLaunchEvent:"mini_apps_send_launch_event",BannerRedesign:"mini_apps_ads_banner_redesign_v3",PerfomanceStatsInGames:"perfomance_stats_in_games",MiniAppsSDKMyTracker:"mini_apps_sdk_my_tracker_integration",MiniAppsLogOverriddenHandlers:"mini_apps_log_overridden_handlers",DisallowNotificationsForUntrusted:"disallow_notifications_for_untrusted",InterstitialMulti:"mini_apps_ads_interstitial_multi",RequestsLimitSentryFix:"mini_apps_ads_requests_limit_sentry_fix",ViewChangeEvents:"mini_apps_ads_view_change_events"}},217570:(e,t,i)=>{i.d(t,{API_HOST:()=>d,CLOSE_STATUS:()=>c,HOST_MESSAGE_TYPE:()=>a,LOGIN_HOST:()=>l,PACKAGE_VERSION:()=>n,VK_API_VERSION:()=>r,VK_PLATFORM:()=>o});const r="5.205",n="2.1.12",o="universal_web",a="vk-sak-sdk",s="vk.com",l=`https://login.${s}`,d=`https://api.${s}`,c=["success","failed"]},944740:(e,t,i)=>{i.d(t,{IFRAME_LOADING_TIMEOUT:()=>d,MINI_APP_PERFORMANCE_STORAGE_KEY:()=>s,MiniAppPerformanceErrors:()=>o,MiniAppPerformanceErrorsDescription:()=>a,MiniAppPerformanceRequiredSteps:()=>n,MiniAppPerformanceSteps:()=>r,PERFORMANCE_DELAY_TO_OLD:()=>c,PERFORMANCE_DELAY_TO_YOUNG:()=>u,PERFORMANCE_EMIT_TIMEOUT:()=>l});const r={Start:"start_time",ActResult:"act_result_time",ScreenOpen:"screen_open_time",WebviewStartLoad:"webview_start_load_time",WebviewEndLoad:"webview_end_load_time",AppInit:"app_init_time",End:"end_time"},n=[r.Start,r.ScreenOpen,r.WebviewStartLoad,r.WebviewEndLoad,r.AppInit,r.End],o={Unknown:0,Network:1,NoAppInit:2,Unavailable:3,OdrLoad:4,UserCanceled:5},a={StorageTroubles:"Storage troubles",IframeNotLoad:"App iframe not loaded",NotAppInit:"Not app init",EarlyClosing:"Early app closing"},s="mini_apps_performance_storage",l=1e4,d=3e4,c=6048e5,u=3e5},419721:(e,t,i)=>{i.d(t,{Scopes:()=>r});const r=["notify","friends","photos","audio","video","stories","pages","menu","wallmenu","status","notes","messages","wall","ads","offline","docs","groups","notifications","stats","email","adsweb","market","phone","group_messages"]},559189:(e,t,i)=>{i.d(t,{ONE_TICK_DURATION:()=>p,RETRY_REQUEST:()=>f,SESSION_PART_GOING_TIMER_VALUE:()=>n,SESSION_PART_TIMEOUT_DELAY:()=>a,SESSION_TIMEOUT_DELAY:()=>o,STORAGE_KEY:()=>s,STORAGE_KEY_PART:()=>l,SessionPartTrackerDefaultOptions:()=>r,SessionPartTrackerEvents:()=>c,SessionTrackerEvents:()=>d,TIMEOUT_FOR_END_TRACK:()=>m,TIMEOUT_FOR_REQUEST:()=>h,TrackVisitorType:()=>u});const r={triggerEvents:["mouseover","mousedown","keypress","scroll"],timeout:36e5,focusElement:window},n=1e4,o=72e5,a=6e4,s="app_sessions",l="app_session_parts",d={SessionPartEnd:"sessionPartEnd",SessionGoing:"sessionGoing",SessionPartStart:"sessionPartStart"},c={SessionPartTrackerEndEvent:"partEnd",SessionPartTrackerStartEvent:"partStart",SessionPartTrackerPartGoing:"partGoing"},u={Activity:"activity",Close:"close",Open:"open"},h=60,p=n/1e3,m=900+p,f=1e4},332689:(e,t,i)=>{i.d(t,{BRIDGE_LOG_MAX_LENGTH:()=>o,BRIDGE_STAT_CALL_ARGUMENTS_MAX_LENGTH:()=>n,BridgeMethodsToLogCallArgumentsDefault:()=>s,MAX_INT32:()=>a});var r=i(48265);const n=256,o=256,a=2147483647,s=[r.MiniAppEvents.TrackEvent]},788026:(e,t,i)=>{function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,{_class_call_check:()=>r})},997059:(e,t,i)=>{function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}i.d(t,{_create_class:()=>n})},9663:(e,t,i)=>{function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{_define_property:()=>r})},688082:(e,t,i)=>{function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}i.d(t,{_instanceof:()=>r})},192905:(e,t,i)=>{i.d(t,{_object_spread:()=>n});var r=i(9663);function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){(0,r._define_property)(e,t,i[t])}))}return e}},868870:(e,t,i)=>{function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}i.d(t,{_type_of:()=>r})},87871:(e,t,i)=>{i.d(t,{classNames:()=>n});var r=i(868870);function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=[];return t.forEach((function(e){if(e)switch(void 0===e?"undefined":(0,r._type_of)(e)){case"string":n.push(e);break;case"object":Object.keys(e).forEach((function(t){e[t]&&n.push(t)}));break;default:n.push("".concat(e))}})),n.join(" ")}},371713:(e,t,i)=>{function r(e){return new Promise((function(t,i){var r=document.createElement("textarea"),n=document.createRange();r.value=e,r.style.position="fixed",r.contentEditable="true",document.body.appendChild(r),r.focus(),r.select(),n.selectNodeContents(r);var o=window.getSelection();o&&(o.removeAllRanges(),o.addRange(n)),r.setSelectionRange(0,999999);try{document.execCommand("copy")?t(!0):i(new Error("copy failed"))}catch(e){i(e)}o&&o.removeAllRanges(),document.body.removeChild(r)}))}function n(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e).then((function(){return!0}))}(e).catch((function(){return r(e)})):r(e)}i.d(t,{copyTextToClipboard:()=>n})},728554:(e,t,i)=>{i.d(t,{debounce:()=>n,noop:()=>r});var r=function(){};function n(e,t){var i,r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"undefined"!=typeof window?window:void 0,o=function(){return e.apply(n,r)},a=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];r=n,clearTimeout(i),i=setTimeout(o,t)};return a.cancel=function(){clearTimeout(i)},a}},940670:(e,t,i)=>{i.d(t,{querystring:()=>n});var r=i(192905);var n={parse:function(e){if("string"!=typeof e)return{};var t=e.trim().replace(/^[?#&]/,"");return t?t.substring(t.indexOf("?")+1).split("&").reduce((function(e,t){var i=t.split("=");return i[1]&&(e[decodeURIComponent(i[0])]=decodeURIComponent(i[1].replace(/\+/g," "))),e}),{}):{}},stringify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=typeof e||null===e)return"";t=(0,r._object_spread)({encode:!0},t);var i=function(e){return t.encode?encodeURIComponent(e):String(e)};return Object.keys(e).reduce((function(r,n){var o=e[n];return void 0===o?r:null===o?(t.skipNull||r.push([i(n),""].join("=")),r):Array.isArray(o)?(o.map((function(e){r.push("".concat(i(n),"[]=").concat(i(e)))})).join(),r):(r.push([i(n),i(o)].join("=")),r)}),[]).join("&")}}},41050:(e,t,i)=>{i.d(t,{localStorage:()=>h});var r,n=i(788026),o=i(997059),a=i(9663),s=i(688082),l=function(){function e(){var t=this;(0,n._class_call_check)(this,e),(0,a._define_property)(this,"data",{}),(0,a._define_property)(this,"getItem",(function(e){return t.data.hasOwnProperty(e)?t.data[e]:null})),(0,a._define_property)(this,"keys",(function(){return Object.keys(t.data)}))}return(0,o._create_class)(e,[{key:"setItem",value:function(e,t){this.data[e]=String(t)}},{key:"removeItem",value:function(e){delete this.data[e]}},{key:"clear",value:function(){this.data={}}},{key:"length",get:function(){return Object.keys(this.data).length}},{key:"key",value:function(e){return Object.keys(this.data)[e]}}]),e}(),d="vk-ls-dummy",c="test";function u(){if(r)return r;try{if(window.localStorage.setItem(d,c),c!==window.localStorage.getItem(d))throw new Error("localStorage is broken");window.localStorage.removeItem(d),r=window.localStorage}catch(e){r=new l}return r}var h={setItem:function(e,t){return u().setItem(e,t)},getItem:function(e){return u().getItem(e)},removeItem:function(e){return u().removeItem(e)},clear:function(){return u().clear()},length:function(){return u().length},key:function(e){return u().key(e)},keys:function(){var e=u();return(0,s._instanceof)(e,l)?e.keys():Object.keys(e)},getPrefixedKeys:function(e){return h.keys().filter((function(t){return t.startsWith(e)}))}}},250879:(e,t,i)=>{i.d(t,{useInView:()=>u});var r=i(296540);const n=new Map,o=new WeakMap;let a,s=0;function l(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>`${t}_${"root"===t?function(e){return e?(o.has(e)||(s+=1,o.set(e,s.toString())),o.get(e)):"0"}(e.root):e[t]}`)).toString()}function d(e){let t=l(e),i=n.get(t);if(!i){const r=new Map;let o;const a=new IntersectionObserver((t=>{t.forEach((t=>{var i;const n=t.isIntersecting&&o.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=n),null==(i=r.get(t.target))||i.forEach((e=>{e(n,t)}))}))}),e);o=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:a,elements:r},n.set(t,i)}return i}function c(e,t,i={},r=a){if(void 0===window.IntersectionObserver&&void 0!==r){const n=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof i.threshold?i.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:o,observer:s,elements:l}=d(i);let c=l.get(e)||[];return l.has(e)||l.set(e,c),c.push(t),s.observe(e),function(){c.splice(c.indexOf(t),1),0===c.length&&(l.delete(e),s.unobserve(e)),0===l.size&&(s.disconnect(),n.delete(o))}}function u({threshold:e,delay:t,trackVisibility:i,rootMargin:n,root:o,triggerOnce:a,skip:s,initialInView:l,fallbackInView:d,onChange:u}={}){var h;const[p,m]=r.useState(null),f=r.useRef(),[b,v]=r.useState({inView:!!l,entry:void 0});f.current=u,r.useEffect((()=>{if(s||!p)return;let r;return r=c(p,((e,t)=>{v({inView:e,entry:t}),f.current&&f.current(e,t),t.isIntersecting&&a&&r&&(r(),r=void 0)}),{root:o,rootMargin:n,threshold:e,trackVisibility:i,delay:t},d),()=>{r&&r()}}),[Array.isArray(e)?e.toString():e,p,o,n,a,s,i,d,t]);const g=null==(h=b.entry)?void 0:h.target,_=r.useRef();p||!g||a||s||_.current===g||(_.current=g,v({inView:!!l,entry:void 0}));const y=[m,b.inView,b.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}},214367:(e,t,i)=>{function r(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}i.d(t,{default:()=>r})},296462:(e,t,i)=>{i.d(t,{default:()=>r});var r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},755852:(e,t,i)=>{let r;i.d(t,{default:()=>o});const n=new Uint8Array(16);function o(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)}},329496:(e,t,i)=>{i.d(t,{unsafeStringify:()=>n});const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function n(e,t=0){return r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]}},474407:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(296462),n=i(755852),o=i(329496);function a(e,t,i){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const a=(e=e||{}).random||(e.rng||n.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=a[e];return t}return(0,o.unsafeStringify)(a)}},45724:(e,t,i)=>{i.d(t,{MiniAppBase:()=>m,MiniAppBaseProvider:()=>p});var r=i(474848),n=i(220208),o=i(848526),a=i(945265),s=i(960340),l=i(146),d=i(806240),c=i(718818),u=i(367934),h=i(439186);const p=({children:e,...t})=>{const i=(0,s.useStatsProviderProps)(t);return(0,r.jsx)(h.StatsProvider,{...i,children:(0,r.jsx)(c.HostServiceProvider,{props:t,children:(0,r.jsx)(d.HandlersProvider,{children:e})})})},m=e=>{const t=(0,a.useMiniAppDefaultProps)(e);return(0,r.jsx)(n.AdaptivityProvider,{children:(0,r.jsx)(u.LangProvider,{getLang:t.getLang,children:(0,r.jsx)(p,{...t,children:(0,r.jsx)(l.AdsProviderWithAdaptivity,{children:(0,r.jsx)(o.MiniAppIframe,{})})})})})}},368126:(e,t,i)=>{i.d(t,{DefaultMiniAppProps:()=>l,GroupActions:()=>a,Scheme:()=>s});var r=i(220208),n=i(217570),o=i(958714);const a={JOIN:"join",LEAVE:"leave"},s={BRIGHT_LIGHT:"bright_light",SPACE_GRAY:"space_gray",VKCOM_LIGHT:"vkcom_light",VKCOM_DARK:"vkcom_dark"},l={iframeProps:{},loginUrl:n.LOGIN_HOST,apiVersion:n.VK_API_VERSION,featureToggles:{},featureEnabled:()=>!1,locale:"ru",config:{adaptivity:o.MiniAppAdaptivity.AUTO,backButton:o.MiniAppBackButton.CLOSE,integration:o.MiniAppIntegration.FULLSCREEN,appearance:r.ColorScheme.LIGHT,scrollTarget:document.documentElement}}},480261:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{get successDescriptor(){return this.handlerName}getSupportedHandlersList(){const e=new Set(r.INTERNAL_MINIAPP_EVENTS),t=this.controller.getOverrideHandlers(),i=Object.keys(t).filter((e=>!1!==t[e].supported));return Object.values(r.MiniAppEvents).forEach((n=>{!this.controller.modalRequest&&(this.controller.modalRequest||r.MODAL_EVENTS.includes(n))||i.includes(n)||e.has(n)||t.hasOwnProperty(n)&&!1===t[n].supported||i.push(n)})),i}constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.SetSupportedHandlers,this.handle=()=>(o.cachedSupportedHandlers||(o.cachedSupportedHandlers=this.getSupportedHandlersList()),this.handleSuccess({supportedHandlers:o.cachedSupportedHandlers}))}}},917842:(e,t,i)=>{i.d(t,{default:()=>d});var r,n,o=i(217570),a=i(365815),s=i(48265),l=i(969755);(r||(r={})).TRANSACTION="transaction",function(e){e.TRANSACTION="VKWebAppOpenPayFormResult"}(n||(n={}));class d extends l.default{get successDescriptor(){return"transaction"===this.params?.type?"VKWebAppOpenPayFormResult":super.successDescriptor}constructor(...e){super(...e),this.handlerName=s.MiniAppEvents.ActionDone,this.params=null,this.handle=(e,t)=>{if(t?.type===o.HOST_MESSAGE_TYPE)return this.parseHandlerParams(e).then((e=>(this.params=e,"transaction"===e.type?this.handleSuccess(e):Promise.reject({error_code:a.ERROR_CODES.UNKNOWN,error_reason:a.CommonErrorReasons.unsupportedPlatform()})))).catch(this.handleFailed);this.controller.sendMessageToHost({message:{params:e,handler:s.MiniAppEvents.ActionDone}})},this.parseHandlerParams=e=>Promise.resolve(e)}}},68307:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{confirm(){return new Promise(((e,t)=>{this.handleModal({type:"AddToFavoritesConfirmModal",data:{},actions:{onAccept:e,onDeny:()=>t({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()})}})}))}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.AddToFavorites,this.handle=e=>this.controller.requestApiMethod("apps.get",{app_id:this.controller.getMiniAppInfo().app.id}).then((t=>t.response.items[0].is_favorite?this.handleSuccess({result:!0}):this.parseHandlerParams(e).then((e=>this.confirm().then((()=>this.updateModalData({loading:!0}))).then((()=>this.addToFavorites(e))).finally((()=>this.updateModalData({shouldClosed:!0}))))))).catch(this.handleFailed),this.addToFavorites=e=>this.controller.requestApiMethod("apps.addToMenu",e).then((()=>this.handleSuccess({result:!0})))}}},759127:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(68307);class o extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.AddToMenu}}},906248:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.Alert,this.handle=e=>new Promise(((t,i)=>{this.parseHandlerParams(e).then((({actions:e,...i})=>{const r=e?.map((({handler:e,title:i,mode:r,style:n})=>({action:()=>t({response:e}),autoClose:!0,title:i,mode:r,style:n})));return this.controller.modalRequest?.({handlerName:n.MiniAppEvents.Alert,type:"Alert",data:{...i,actions:r}})})).catch(i)})).then(this.handleSuccess).catch(this.handleFailed),this.parseHandlerParams=({title:e,style:t,message:i,actions:n})=>{if(!e)return Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("title")});if("string"!=typeof e)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("title","string")});if(t&&"string"!=typeof t)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("style","string")});if(!i)return Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("message")});if("string"!=typeof i)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("message","string")});const o=["cancel","destructive","default"],a=n?.some((({title:e,handler:t,style:i,mode:r})=>"string"!=typeof e||t&&"object"!=typeof t||i&&"string"!=typeof i||r&&(e=>!o.some((t=>t===e)))(r)));return n&&a?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:'Param "actions" is invalid'}):Promise.resolve({title:e,style:t,message:i,actions:n})}}}},841420:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{confirm(e){return new Promise(((t,i)=>{this.handleModal({type:"AllowMessagesFromGroupModal",data:{avatar:e.photo_100||"",group:e.name||""},actions:{onAccept:()=>t(e),onDeny:()=>i({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()})}})}))}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.AllowMessagesFromGroup,this.handle=e=>this.parseHandlerParams(e).then((e=>this.getGroupInfo(e).then((t=>t.is_messages_blocked?this.confirm(t).then((()=>this.updateModalData({loading:!0}))).then((()=>this.allowMessageFromGroup(e))).finally((()=>this.updateModalData({shouldClosed:!0}))):this.handleSuccess({result:!0}))))).catch(this.handleFailed),this.getGroupInfo=e=>this.controller.requestApiMethod("groups.getById",{group_ids:e.group_id,fields:"is_messages_blocked"}).then((e=>e.response.groups[0])),this.allowMessageFromGroup=e=>this.controller.requestApiMethod("messages.allowMessagesFromGroup",e).then((()=>this.handleSuccess({result:!0}))),this.parseHandlerParams=({group_id:e,key:t})=>e?"number"!=typeof e?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("group_id","number")}):t&&"string"!=typeof t?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("key","string")}):Promise.resolve({key:t,group_id:e}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("group_id")})}}},478155:(e,t,i)=>{i.d(t,{default:()=>l});var r=i(365815),n=i(48265),o=i(62495),a=i(412236),s=i(969755);class l extends s.default{confirm(){return new Promise(((e,t)=>{this.handleModal({type:"AllowNotificationsModal",data:{},actions:{onAccept:e,onDeny:()=>t({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()})}})}))}get areAllowedForUntrusted(){return!this.controller.featureEnabled(o.FeatureEnabledKeys.DisallowNotificationsForUntrusted)}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.AllowNotifications,this.handle=e=>this.parseHandlerParams(e).then((e=>(this.areAllowedForUntrusted?this.checkUserNotificationsEnabledWithUntrusted(e):this.checkUserNotificationsEnabled()).then((t=>t||this.confirm().then((()=>this.updateModalData({loading:!0}))).then((()=>this.allowUserNotifications(e))).then((({response:e})=>Boolean(e))))).then(this.wrapResult).then(this.handleSuccess).finally((()=>this.updateModalData({shouldClosed:!0}))))).catch(this.handleFailed),this.checkUserNotificationsEnabled=async()=>{const{response:e}=await this.controller.requestApiMethod("apps.get",{fields:"are_notifications_enabled,is_trusted"}),{items:t}=e,[i]=t;if(!["game","html5_game"].includes(i?.type)&&!i?.is_trusted)throw new a.MiniAppHandlerError({error_code:r.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:r.CommonErrorReasons.unsupportedPlatform(this.handlerName,"Notifications are not allowed for untrusted apps.")});return Boolean(i.are_notifications_enabled)},this.checkUserNotificationsEnabledWithUntrusted=e=>this.controller.requestApiMethod("apps.isNotificationsAllowed",e).then((({response:e})=>e.is_allowed)).catch((()=>Promise.resolve(!1))),this.allowUserNotifications=e=>this.controller.requestApiMethod("apps.allowNotifications",e)}}},159309:(e,t,i)=>{i.d(t,{default:()=>l});var r=i(365815),n=i(48265),o=i(969755),a=i(292972),s=i(174852);class l extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.AuthByExchangeToken,this.handle=e=>{if(this.controller.featureToggles.disableAuthByExchangeToken)return this.handleFailed({error_code:r.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:r.CommonErrorReasons.unsupportedPlatform(this.handlerName)});const t=this.controller.getMiniAppInfo().exchangeHash;return this.parseHandlerParams(e).then((e=>{const{keep_alive:i,exchange_token:r}=e;return this.exchangeToken(r,t).then((()=>(this.controller.sendMessageToHost({message:{handler:n.MiniAppEvents.AuthByExchangeToken,params:{keep_alive:i}}}),this.handleSuccess({result:!0}))))})).catch(this.handleFailed)},this.exchangeToken=(e,t)=>{const{loginUrl:i,onCaptcha:n}=this.controller.getMiniAppInfo(),o={token:e,hash:t},l=new a.PendingTask;t||l.reject({error_code:r.ERROR_CODES.UNKNOWN});const d=e=>{const t=(0,s.makeParams)(e);fetch(`${i}/?act=connect_exchange_token&${t}`,{mode:"cors",credentials:"include"}).then((e=>e.json())).then((e=>{if("okay"!==e.type)if(e.error?.error_code!==r.ERROR_CODES.CAPTCHA_ERROR)l.reject(e);else if(n){const{captcha_sid:t,captcha_img:i}=e.error;n({captcha_sid:t,captcha_img:i}).then((e=>{const t=Object.assign({},o,e);d(t)}))}else l.reject({type:"error",error:"onCaptcha function is missing"});else l.resolve(e)})).catch(l.reject)};return d(o),l.get()},this.parseHandlerParams=e=>e.exchange_token?"string"!=typeof e.exchange_token?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("exchange_token","string")}):Promise.resolve(e):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("exchange_token")})}}},184031:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{sanitizeCallArguments(){const{method:e,params:t}=super.sanitizeCallArguments(),{v:i,version:r}=t;return{method:e,version:i||r}}getBridgeMethodLog(){return JSON.stringify(this.sanitizeCallArguments())}enrichErrorMessage(e,t){const i=(0,r.parseError)(e);return(0,r.isAPIError)(i)?{...i,error_msg:`API(${t}): ${i.error_msg}`}:i}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.CallApiMethod,this.handle=e=>this.parseHandlerParams(e).then((({method:e,params:t})=>{const{v:i,version:r,access_token:n,...o}=t,a={version:i||r,accessToken:n};return this.controller.requestApiMethodAsMiniApp(e,o,a)})).then(this.handleSuccess).catch((t=>this.handleFailed(this.enrichErrorMessage(t,e.method)))),this.parseHandlerParams=e=>{const{method:t,params:i}=e;return i?i.access_token?i.v||i.version?isNaN(parseInt(i.v,10))&&isNaN(parseInt(i.version,10))?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("v","number")}):Promise.resolve({params:i,method:t}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("v")}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("access_token")}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("params")})}}}},783725:(e,t,i)=>{i.d(t,{default:()=>l});var r=i(365815),n=i(48265),o=i(419721),a=i(969755),s=i(174852);class l extends a.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.CheckAllowedScopes,this.handle=e=>this.parseHandlerParams(e).then((e=>this.controller.requestApiMethod("apps.checkAllowedScopes",e))).then((({response:e})=>this.handleSuccess({result:e}))).catch(this.handleFailed),this.parseHandlerParams=({scopes:e})=>{if(!e)return Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("scopes")});if("string"!=typeof e)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("scopes","string")});const{whiteListScopes:t=o.Scopes}=this.controller.getMiniAppInfo();return!!this.controller.featureEnabled("mini_apps_check_allowed_scopes_no_validation")||(0,s.validateScopes)(e,t)?Promise.resolve({scopes:e}):Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("scopes",`"${t.join('", "')}"`)})}}}},223297:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.CheckBannerAd,this.handle=async()=>{const e=this.adsController.getOpenedBannerAd();return e?this.handleSuccess({result:!0,...e}):this.handleSuccess({result:!1})}}}},169855:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(62495),a=i(969755);class s extends a.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.CheckNativeAds,this.handle=async e=>{const t={...e},i=t.ad_format;void 0===t.use_waterfall&&"reward"===i&&(t.use_waterfall=!0);try{return"interstitial"===i?this.preloadInterstitialAds(!1):this.preloadRewardAds(Boolean(t.use_waterfall))}catch(e){return this.handleFailed({error_code:r.ERROR_CODES.CUSTOM,error_reason:e})}},this.preloadInterstitialAds=async e=>{try{const t=await this.adsController.preloadInterstitialAds({isCheckAds:!0,isWaterfallCall:!1,isRewardFallback:e});return this.handleSuccess({result:t})}catch(e){return e===r.CommonErrorReasons.userIsBanned()?this.handleFailed({error_reason:e,error_code:r.ERROR_CODES.CUSTOM}):this.handleSuccess({result:!1})}},this.preloadInterstitialMulti=async()=>{try{const e=await this.adsController.preloadInterstitialMulti({isCheckAds:!0});return this.handleSuccess({result:"multi"===e||"single"===e})}catch(e){return e===r.CommonErrorReasons.userIsBanned()?this.handleFailed({error_reason:e,error_code:r.ERROR_CODES.CUSTOM}):this.handleSuccess({result:!1})}},this.preloadRewardAds=async e=>{let t=!1,i=!1;const n=await this.adsController.preloadRewardAds({isCheckAds:!0,isWaterfallCall:!1,useWaterfall:e}).catch((e=>(e===r.CommonErrorReasons.requestsLimitReached()&&(t=!0),e===r.CommonErrorReasons.userIsBanned()&&(i=!0),!1)));return n?this.handleSuccess({result:n}):i?this.handleFailed({error_reason:r.CommonErrorReasons.userIsBanned(),error_code:r.ERROR_CODES.CUSTOM}):e&&!t?this.controller.featureEnabled(o.FeatureEnabledKeys.InterstitialMulti)&&!this.controller.featureToggles.motionAdsExperimentGroupB?this.preloadInterstitialMulti():this.preloadInterstitialAds(!0):this.handleSuccess({result:!1})}}}},207078:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(217570),n=i(365815),o=i(48265),a=i(969755);class s extends a.default{constructor(...e){super(...e),this.handlerName=o.MiniAppEvents.Close,this.handle=e=>this.parseHandlerParams(e).then((e=>(this.controller.sendMessageToHost({message:{params:e,handler:o.MiniAppEvents.Close}}),this.handleSuccess(e)))).catch(this.handleFailed),this.parseHandlerParams=e=>{const{status:t,payload:i}=e;if(void 0===t)return Promise.reject({error_code:n.ERROR_CODES.MISSING_PARAM,error_reason:n.CommonErrorReasons.missingParam("status")});if(o=t,!r.CLOSE_STATUS.includes(o))return Promise.reject({error_code:n.ERROR_CODES.INVALID_PARAMS,error_reason:n.CommonErrorReasons.invalidParam("status",'"success" or "failed"')});var o;const a={status:t};if(void 0!==i){if("object"!=typeof i)return Promise.reject({error_code:n.ERROR_CODES.INVALID_PARAMS,error_reason:n.CommonErrorReasons.invalidParam("payload","object")});a.payload=i}return Promise.resolve(a)}}}},870319:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.ConversionHit,this.handle=e=>this.parseHandlerParams(e).then((e=>this.controller.requestApiMethod("ads.conversionHit",e))).then((({response:e})=>this.handleSuccess({result:!e}))).catch(this.handleFailed),this.parseHandlerParams=e=>e.pixel_code?"string"!=typeof e.pixel_code?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("pixel_code","string")}):e.conversion_event?"string"!=typeof e.conversion_event?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("conversion_event","string")}):e.conversion_value?"number"!=typeof e.conversion_value?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("conversion_value","number")}):Promise.resolve(e):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("conversion_value")}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("conversion_event")}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("pixel_code")})}}},433646:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(371713),n=i(365815),o=i(48265),a=i(969755);class s extends a.default{constructor(...e){super(...e),this.handlerName=o.MiniAppEvents.CopyText,this.handle=e=>this.parseHandlerParams(e).then((e=>(0,r.copyTextToClipboard)(e.text).then((e=>e?{result:!0}:Promise.reject({error_code:n.ERROR_CODES.CUSTOM,error_reason:"Can’t copy text on this device"}))).then(this.handleSuccess))).catch(this.handleFailed),this.parseHandlerParams=e=>e.text?"string"!=typeof e.text?Promise.reject({error_code:n.ERROR_CODES.INVALID_PARAMS,error_reason:n.CommonErrorReasons.wrongType("text","string")}):Promise.resolve({request_id:e.request_id,text:e.text}):Promise.reject({error_code:n.ERROR_CODES.MISSING_PARAM,error_reason:n.CommonErrorReasons.missingParam("text")})}}},599532:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.CreateHash,this.handle=e=>this.parseHandlerParams(e).then((({payload:e})=>this.controller.requestApiMethod("apps.getSecretHash",{request_id:e}))).then((({response:e})=>{const t={sign:e.sign,ts:e.ts};return e.edu_sign&&(t.edu_sign=e.edu_sign),e.request_id&&(t.payload=e.request_id),this.handleSuccess(t)})).catch(this.handleFailed),this.parseHandlerParams=e=>e.hasOwnProperty("payload")&&"string"!=typeof e.payload?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("payload","string")}):Promise.resolve(e)}}},267868:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.DenyNotifications,this.handle=e=>this.parseHandlerParams(e).then((e=>this.controller.requestApiMethod("apps.denyNotifications",e).then((({response:e})=>this.wrapResult(Boolean(e)))).then(this.handleSuccess))).catch(this.handleFailed)}}},950123:(e,t,i)=>{i.d(t,{default:()=>d});var r=i(365815),n=i(48265),o=i(292972),a=i(42032),s=i(174852),l=i(969755);class d extends l.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.AppForceLogout,this.handle=()=>{const e=this.controller.getMiniAppInfo().logoutHash,t=this.controller.getMiniAppConfig().app_id;return this.logout({hash:e,app_id:t}).then((e=>(this.controller.sendMessageToHost({message:{handler:n.MiniAppEvents.AppForceLogout,params:e}}),this.handleSuccess({result:!0})))).catch(this.handleFailed)},this.logout=e=>{const t=this.controller.getMiniAppInfo().loginUrl,i={act:"connect_logout",hash:e.hash,app_id:e.app_id};if(Object.assign({},i,e.captchaResult),!e.hash)return Promise.reject({error_code:r.ERROR_CODES.UNKNOWN});const n=new o.PendingTask,l=e=>{const o=(0,s.makeParams)(e);fetch(`${t}/?${o}`,{mode:"cors",credentials:"include"}).then((e=>e.json())).then((e=>{if("okay"!==e.type)if(e.error?.error_code!==r.ERROR_CODES.CAPTCHA_ERROR)n.reject(e);else{const t=this.controller.getMiniAppInfo().onCaptcha;if(!t)return void n.reject({type:"error",error:"onCaptcha function is missing"});const{captcha_sid:r,captcha_img:o}=e.error;t({captcha_sid:r,captcha_img:o}).then((e=>{const t=Object.assign({},i,e);l(t)}))}else n.resolve(e)})).catch((()=>(0,a.errorLogger)("Can't logout")))};return l(i),n.get()}}}},420167:(e,t,i)=>{i.d(t,{default:()=>c});var r,n=i(940670),o=i(365815),a=i(48265),s=i(419721),l=i(174852),d=i(969755);(r||(r={})).INVALID_TOKEN="invalid_token";class c extends d.default{get successDescriptor(){return"VKWebAppAccessTokenReceived"}get errorDescriptor(){return"VKWebAppAccessTokenFailed"}constructor(...e){super(...e),this.handlerName=a.MiniAppEvents.GetAuthToken,this.getAppTokenTryTimes=1,this.maxGetAppTokenTryTimes=3,this.handle=(e,t=!1)=>(this.getAppTokenTryTimes=1,this.parseHandlerParams(e).then((e=>this.getMiniAppToken(e,!1,Number(t)))).then(this.handleSuccess).catch(this.handleFailed)),this.parseHandlerParams=({app_id:e,scope:t})=>{const{app:{id:i},whiteListScopes:r=s.Scopes}=this.controller.getMiniAppInfo();if(!t&&""!==t)return Promise.reject({error_code:o.ERROR_CODES.MISSING_PARAM,error_reason:o.CommonErrorReasons.missingParam("scope")});if(!e)return Promise.reject({error_code:o.ERROR_CODES.MISSING_PARAM,error_reason:o.CommonErrorReasons.missingParam("app_id")});if("string"!=typeof t)return Promise.reject({error_code:o.ERROR_CODES.MISSING_PARAM,error_reason:o.CommonErrorReasons.wrongType("scope","string")});if("number"!=typeof e)return Promise.reject({error_code:o.ERROR_CODES.MISSING_PARAM,error_reason:o.CommonErrorReasons.wrongType("app_id","number")});if(e!==i)return Promise.reject({error_code:o.ERROR_CODES.INVALID_PARAMS,error_reason:o.CommonErrorReasons.wrongAppId()});return(0,l.validateScopes)(t,r)?Promise.resolve({scope:t,app_id:e}):Promise.reject({error_code:o.ERROR_CODES.INVALID_PARAMS,error_reason:o.CommonErrorReasons.invalidParam("scopes",`one of "${r.join('", "')}" listed separated by commas`)})},this.getMiniAppToken=(e,t=!1,i=0)=>this.controller.getHostToken(t).then((t=>this.fetchMiniAppToken({...e,access_token:t,force:i}))).then((t=>!t.error&&t.response?.access_token?Promise.resolve(t.response):i||t.error?"invalid_token"===t.error_type&&this.getAppTokenTryTimes<=this.maxGetAppTokenTryTimes?(this.getAppTokenTryTimes++,this.getMiniAppToken(e,!0,i)):Promise.reject({code:o.ERROR_CODES.UNKNOWN,reason:t.error_type||""}):this.confirm(e).then((e=>(this.updateModalData({loading:!0}),e))).then((t=>this.getMiniAppToken({...e,scope:t},!1,1))).finally((()=>this.updateModalData({shouldClosed:!0}))))),this.fetchMiniAppToken=e=>{const t=this.controller.getMiniAppToken(e);if(t)return t;const i=n.querystring.stringify(e),{authUrl:r,anonymAuthUrl:o}=this.controller.getMiniAppInfo(),a=this.controller.isAnonymousLaunch;return fetch(`${a&&o?o:r}?${i}`,{mode:"cors",credentials:"include"}).then((e=>e.json()))},this.confirm=e=>{const{app:t}=this.controller.getMiniAppInfo();return new Promise(((i,r)=>{this.handleModal({type:"GetAuthTokenModal",data:{appTitle:t.title,scope:e.scope,isEditScope:!1},actions:{onAccept:e=>i(e),onDeny:()=>r({error_code:o.ERROR_CODES.USER_DENIED,error_reason:"User denied"}),onEditScopes:()=>this.updateModalData({isEditScope:!0})}})}))}}}},406145:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(217570),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.GetClientVersion,this.handle=()=>this.handleSuccess({platform:r.VK_PLATFORM,version:r.PACKAGE_VERSION})}}},475616:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.GetConfig,this.handle=()=>this.handleSuccess(this.controller.getMiniAppConfig())}}},60416:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(42032),a=i(969755);class s extends a.default{confirm(){return new Promise(((e,t)=>{this.handleModal({type:"GetEmailConfirmModal",data:{},actions:{onAccept:e,onDeny:()=>t({error_code:r.ERROR_CODES.ACCESS_DENIED,error_reason:r.CommonErrorReasons.userDenied()})}})}))}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.GetEmail,this.handle=e=>this.parseHandlerParams(e).then((e=>{const{hostSettings:t}=this.controller.getMiniAppInfo();return(t.permissions?.includes("email")?Promise.resolve(!0):this.confirm().then((()=>this.updateModalData({loading:!0})))).then((()=>this.controller.setHostPermissions("email",1).catch(o.errorLogger))).then((()=>this.getEmail(e))).finally((()=>this.updateModalData({shouldClosed:!0})))})).catch(this.handleFailed),this.getEmail=e=>this.controller.requestApiMethod("account.getEmail",e).then((({response:e})=>this.handleSuccess(e)))}}},388945:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.GetGeodata,this.timeoutFails=0,this.handle=()=>this.getGeoData(),this.getGeoData=()=>this.promisifyGetGeodata().then((e=>this.handleSuccess({available:!0,lat:e.coords.latitude,long:e.coords.longitude}))).catch(this.handleFailed),this.handleGeodataError=e=>{switch(e.code){case 3:return this.timeoutFails++,this.timeoutFails<2?this.getGeoData():Promise.reject({error_code:r.ERROR_CODES.CUSTOM,error_reason:"Geolocation timeout error"});case 2:return Promise.reject({error_code:r.ERROR_CODES.CUSTOM,error_reason:"Device can't get geodata"});case 1:return Promise.reject({error_code:r.ERROR_CODES.USER_DENIED,error_reason:"User didn't allowed"});default:return Promise.reject({error_code:r.ERROR_CODES.CUSTOM,error_reason:"Unknown error"})}},this.promisifyGetGeodata=()=>new Promise(((e,t)=>navigator.geolocation.getCurrentPosition(e,t))).catch(this.handleGeodataError)}}},225179:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(969755);const a=["id","name","screen_name","is_closed","type","description","members_count","is_member","photo_50","photo_100","photo_200"];class s extends o.default{confirm(e){return new Promise(((t,i)=>{this.handleModal({type:"GetGroupInfoConfirmModal",data:{avatar:e.photo_100||"",group:e.name||""},actions:{onAccept:()=>t(e),onDeny:()=>i({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()})}})}))}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.GetGroupInfo,this.handle=e=>this.parseHandlerParams(e).then(this.getGroupInfo).then(this.checkGroups).then(this.handleSuccess).catch(this.handleFailed),this.getGroupInfo=e=>this.controller.requestApiMethod("groups.getById",{group_ids:e.group_ids,fields:a.join(",")}).then((({response:e})=>e.groups)),this.checkGroups=e=>new Promise(((t,i)=>{const n=[];e.forEach((e=>{2!==e.is_closed?n.push(e):(e.is_member||i({error_code:r.ERROR_CODES.ACCESS_DENIED,error_reason:"User is not a member of the given private group"}),this.confirm(e).then((()=>n.push(e))).catch(i).finally((()=>this.updateModalData({shouldClosed:!0}))))})),t(n.length>1?this.wrapResult(n):n[0])})),this.parseHandlerParams=({request_id:e,group_id:t,group_ids:i})=>{if(!t&&!i)return Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:'Missing required param "group_id" or "group_ids".'});if(t&&"number"!=typeof t)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("group_id","number")});if(t&&t<=0)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.greaterThanZero("group_id")});if(i&&"string"!=typeof i)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("group_ids","string")});const n=(i||"").split(",").map((e=>Number(e.trim())));return n.push(t||0),Promise.resolve({request_id:e,group_ids:n.filter(Boolean).join(",")})}}}},185343:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{getSearchParams(e){try{return new URL(e).searchParams}catch{return new URLSearchParams}}constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.GetLaunchParams,this.handle=()=>{const{id:e,url:t}=this.controller.getMiniAppInfo().app,i=this.getSearchParams(t),r={vk_profile_id:"vk_profile_id",vk_group_id:"group_id"},n={mini_app_id:e,referer:i.get("vk_ref")||"other"};return Object.keys(r).forEach((e=>{const t=i.get(e),o=Number(t),a=r[e];null===t||isNaN(o)||(n[a]=o)}),n),this.controller.requestApiMethod("apps.getAppLaunchParams",n).then((({response:e})=>this.handleSuccess(e))).catch(this.handleFailed)}}}},934037:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(42032),a=i(969755);class s extends a.default{confirm(){return new Promise(((e,t)=>{this.handleModal({type:"GetPhoneNumberConfirmModal",data:{},actions:{onAccept:e,onDeny:()=>t({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()})}})}))}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.GetPhoneNumber,this.handle=e=>this.parseHandlerParams(e).then((e=>{const{hostSettings:t}=this.controller.getMiniAppInfo();return(t.permissions?.includes("phone_number")?Promise.resolve(!0):this.confirm().then((()=>this.updateModalData({loading:!0})))).then((()=>this.controller.setHostPermissions("phone_number",1).catch(o.errorLogger))).then((()=>this.getPhoneNumber(e))).finally((()=>this.updateModalData({shouldClosed:!0})))})).catch(this.handleFailed),this.getPhoneNumber=e=>this.controller.requestApiMethod("account.getPhone",e).then((({response:e})=>this.handleSuccess({...e,isValid:!0})))}}},9878:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(337574),a=i(969755);class s extends a.default{confirm(e){return new Promise((t=>{const i=new URLSearchParams({app_id:`${e}`,theme:this.controller.getMiniAppInfo().config.appearance,origin:"*"});this.handleModal({type:"GetSilentTokenOverlay",appearance:o.ModalAppearances.OVERLAY,data:{url:`${this.controller.getMiniAppInfo().policyConfirmationUrl}?${i}`},actions:{onAccept:i=>{s.successfullyConfirmed[e]=!0,t(i)}}})}))}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.GetSilentToken,this.handle=e=>this.parseHandlerParams(e).then((e=>this.controller.getMiniAppInfo().app.needPolicyConfirmation&&!s.successfullyConfirmed[e.app_id]?this.confirm(e.app_id):this.controller.requestApiMethod("auth.getCredentialsForApp",e).then((({response:e})=>e)))).then((e=>this.handleSuccess(e))).catch(this.handleFailed).finally((()=>this.updateModalData({shouldClosed:!0}))),this.parseHandlerParams=e=>(e.app_id||(e.app_id=e.app_id??this.controller.getMiniAppInfo().app.id),"number"!=typeof e.app_id?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("app_id","number")}):e.app_id<=0?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.greaterThanZero("app_id")}):Promise.resolve(e))}}s.successfullyConfirmed={}},762771:(e,t,i)=>{i.d(t,{UserBDateVisibility:()=>r});const r={HIDDEN:0,FULL:1,DAY_AND_MONTH_ONLY:2}},152386:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(969755),a=i(762771);class s extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.GetUserInfo,this.handle=e=>{const t=["id","first_name","last_name","sex","city","country","photo_100","photo_200","photo_max_orig","timezone","bdate","bdate_visibility","can_access_closed","is_closed"];return this.parseHandlerParams(e).then((e=>this.controller.isAnonymousLaunch?this.handleSuccess({id:0,first_name:this.getLang("vkconnect_mini_apps_catalog_anonymous_user_name"),last_name:this.getLang("vkconnect_mini_apps_catalog_anonymous_user_surname")}):this.controller.requestApiMethod("users.get",{...e,fields:t.join(",")}).then((({response:e})=>e.map(this.sanitizeUserInfo))).then(this.handleResult).then(this.handleSuccess))).catch(this.handleFailed)},this.parseHandlerParams=e=>{if(this.controller.isAnonymousLaunch&&(e.user_ids||e.user_id))return Promise.reject({error_code:r.ERROR_CODES.ANONYMOUS_ACCESS_UNSUPPORTED,error_reason:r.CommonErrorReasons.anonymousAccessUnsupported(n.MiniAppEvents.GetUserInfo)});if(e.user_ids&&"string"!=typeof e.user_ids)return Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.wrongType("user_ids","string")});const t={};return e.user_ids&&(t.user_ids=e.user_ids),e.user_id&&(t.user_ids=String(e.user_id)),Promise.resolve(t)},this.handleResult=e=>new Promise(((t,i)=>{if(0===e.length)return i({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("user_id","valid user ID")});t(e.length>1?this.wrapResult(e):e[0])})),this.sanitizeUserInfo=({...e})=>{if(e.bdate_visibility===a.UserBDateVisibility.HIDDEN)delete e.bdate;else if(e.bdate&&e.bdate_visibility===a.UserBDateVisibility.DAY_AND_MONTH_ONLY){const[t,i]=e.bdate.split(".");e.bdate=`${t}.${i}`}return e}}}},969755:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(62495),o=i(42032),a=i(174852);let s=class{get successDescriptor(){return`${this.handlerName}Result`}get errorDescriptor(){return`${this.handlerName}Failed`}get updateModalData(){return e=>this.updateModalDataHook?.({data:e})}handleModal(e){if(this.controller.modalRequest){const t={handlerName:this.handlerName,...e};this.updateModalDataHook=this.controller.modalRequest(t)}}sanitizeCallArguments(){if(!this.callArguments)return{};const e=["request_id"],t={...this.callArguments};for(const i of e)delete t[i];return t}logBridgeEvent(e){const{app:{id:t}}=this.controller.getMiniAppInfo();this.controller.logBridgeEvent({miniAppId:t,event:{event_type:this.handlerName,is_success:!(0,a.isHandlerError)(e)},bridgeLog:this.getBridgeMethodLog?.(),callArguments:this.sanitizeCallArguments(),...this.buildBridgeEventErrorData(e)})}constructor({handlers:e,ads:t}){if(this.handlerName="",this.updateModalDataHook=null,this.handle=e=>{this.parseHandlerParams(e).catch(console.error)},this.parseHandlerParams=e=>Promise.resolve({...e}),this.setData=e=>{this.callArguments=e},this.handleFailed=e=>{const t=(0,r.parseError)(e);return this.controller.featureEnabled(n.FeatureEnabledKeys.MiniAppsLogOverriddenHandlers)||this.logBridgeEventError(t),Promise.resolve({type:this.errorDescriptor,data:{error_type:(0,r.isAPIError)(t)?"api_error":"client_error",error_data:t}})},this.wrapResult=e=>({result:e}),this.handleSuccess=(e,t=!0)=>(t&&!this.controller.featureEnabled(n.FeatureEnabledKeys.MiniAppsLogOverriddenHandlers)&&this.logBridgeEventSuccess(),Promise.resolve({data:e,type:this.successDescriptor})),this.buildBridgeEventErrorData=e=>{if(!(0,a.isHandlerErrorWithData)(e))return{};const{error_type:t,error_data:i}=e.data;return{error:{error_type:t,error_code:i.error_code},bridgeLog:(0,r.getReadableMessage)(i)}},this.logBridgeEventError=e=>{const{app:{id:t}}=this.controller.getMiniAppInfo();this.controller.logBridgeEvent({miniAppId:t,event:{event_type:this.handlerName,is_success:!1},error:{error_type:(0,r.isAPIError)(e)?"api_error":"client_error",error_code:e.error_code},bridgeLog:(0,r.getReadableMessage)(e),callArguments:this.sanitizeCallArguments()})},this.logBridgeEventSuccess=()=>{const{app:{id:e}}=this.controller.getMiniAppInfo();this.controller.logBridgeEvent({miniAppId:e,event:{event_type:this.handlerName,is_success:!0},bridgeLog:this.getBridgeMethodLog?.(),callArguments:this.sanitizeCallArguments()})},this.getLang=(e,t)=>this.controller.getLang(e,t),!e||!t)throw(0,o.errorLogger)("Handler controllers are not initialized"),new Error("Handler controllers are not initialized");this.controller=e,this.adsController=t}}},611949:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(969755),o=i(174852);class a extends n.default{get isDryRunAllowed(){return(0,o.isDryRunOverrideHandler)(this.overrideHandler.supported)}async handleDryRun(e,t){const{modalRequested:i,supported:r}=t;i&&await new Promise((t=>{this.handleModal({type:"SkipActionModal",data:{handlerName:this.handlerName,params:e},actions:{onClose:t}})})).finally((()=>this.updateModalData({shouldClosed:!0})));const{dryRunResponse:n,dryRunError:a}=(0,o.getDryRunOptions)(r)||{};return a?this.handleFailed(a):this.handleSuccess(n||this.wrapResult(!0))}constructor(e,t,i,n){super(e),this.handle=e=>!1!==this.overrideHandler.supported&&this.overrideHandler.handle?this.isDryRunAllowed?this.handleDryRun(e,this.overrideHandler):this.overrideHandler.handle(e,this.defaultHandler?.handle):this.handleFailed({error_code:r.ERROR_CODES.UNKNOWN,error_reason:r.CommonErrorReasons.unsupportedPlatform()}),this.overrideHandler=i,this.defaultHandler=n,this.handlerName=t}}},722235:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.HideBannerAd,this.handle=async()=>{const e=this.adsController.hideBannerAd();return e?this.handleSuccess({result:!0,...e}):this.handleSuccess({result:!1})}}}},323723:(e,t,i)=>{i.d(t,{addAppInInitializedApps:()=>o,hasAppInInitializedApps:()=>n,removeAppFromInitializedApps:()=>a});const r=[],n=e=>r.includes(e),o=e=>{r.push(e)},a=e=>{r.splice(r.indexOf(e),1)}},331213:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(48265),n=i(323723),o=i(208109),a=i(969755);class s extends a.default{getHandleSuccess(e){return(0,n.addAppInInitializedApps)(e),this.handleSuccess({result:!0})}constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.Init,this.handle=()=>{const{app:{id:e}}=this.controller.getMiniAppInfo();if((0,n.hasAppInInitializedApps)(e))return this.handleSuccess({result:!1},!1);this.updateConfig();const t=this.sendSupportedHandlers();return t?t.then((()=>this.getHandleSuccess(e))).catch(this.handleFailed):this.getHandleSuccess(e)},this.sendSupportedHandlers=()=>this.controller.invoke({params:{},handler:r.MiniAppEvents.SetSupportedHandlers,type:o.BRIDGE_MESSAGE_TYPE}),this.updateConfig=()=>{this.controller.sendEventToMiniApp(r.EventsToMiniApp.UpdateConfig,this.controller.getMiniAppConfig())}}}},276033:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(368126),a=i(969755);class s extends a.default{confirm(e){return new Promise(((t,i)=>{this.handleModal({type:"JoinLeaveGroupModal",data:{action:o.GroupActions.JOIN,avatar:e.photo_100||"",group:e.name||""},actions:{onAccept:t,onDeny:()=>i({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()})}})}))}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.JoinGroup,this.handle=async e=>this.parseHandlerParams(e).then((e=>this.getGroupInfo(e).then((t=>t.is_member?this.handleSuccess({result:!0}):this.confirm(t).then((()=>this.updateModalData({loading:!0}))).then((()=>this.joinGroup(e))).then((()=>this.handleSuccess({result:!0}))))))).catch(this.handleFailed).finally((()=>this.updateModalData({shouldClosed:!0}))),this.getGroupInfo=({group_id:e})=>this.controller.requestApiMethod("groups.getById",{group_ids:e,fields:"is_member"}).then((e=>e.response.groups[0])),this.joinGroup=({group_id:e})=>this.controller.requestApiMethod("groups.join",{group_id:e}),this.parseHandlerParams=e=>e.group_id?"number"!=typeof e.group_id?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("group_id","number")}):Promise.resolve({request_id:e.request_id,group_id:e.group_id}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("group_id")})}}},205786:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(969755);const a=[51618648,6703670];class s extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.KeyboardLock,this.handle=e=>{const t=window.navigator.keyboard;if(!t)return this.handleFailed({error_code:r.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:r.CommonErrorReasons.unsupportedPlatform(n.MiniAppEvents.KeyboardLock,'Your browser does not support this bridge method: "keyboard" does not exist on type "Navigator"')});const{app:{id:i}}=this.controller.getMiniAppInfo();return a.includes(i)?this.parseHandlerParams(e).then((({keys:e,unlock:i=!1})=>(i?t.unlock(e):t.lock(e),this.handleSuccess({result:!0})))).catch(this.handleFailed):this.handleFailed({error_code:r.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:r.CommonErrorReasons.unsupportedPlatform(n.MiniAppEvents.KeyboardLock,"Your application is not allowed to use this method")})},this.parseHandlerParams=({request_id:e,keys:t,unlock:i})=>{if(i&&"boolean"!=typeof i)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("unlock","boolean")});if(t){if(!Array.isArray(t))return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("keys","array")});if(!t.every((e=>"string"==typeof e)))return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("keys","array of strings")})}return Promise.resolve({request_id:e,keys:t,unlock:i})}}}},223030:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(368126),a=i(969755);class s extends a.default{confirm(e){return new Promise(((t,i)=>{this.handleModal({type:"JoinLeaveGroupModal",data:{action:o.GroupActions.LEAVE,avatar:e.photo_100||"",group:e.name||""},actions:{onAccept:t,onDeny:()=>i({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()})}})}))}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.LeaveGroup,this.handle=e=>this.parseHandlerParams(e).then((e=>this.getGroupInfo(e).then((t=>t.is_member?this.confirm(t).then((()=>this.updateModalData({loading:!0}))).then((()=>this.leaveGroup(e))).then((()=>this.handleSuccess({result:!0}))):this.handleSuccess({result:!0}))))).catch(this.handleFailed).finally((()=>this.updateModalData({shouldClosed:!0}))),this.getGroupInfo=({group_id:e})=>this.controller.requestApiMethod("groups.getById",{group_ids:e,fields:"is_member"}).then((e=>e.response.groups[0])),this.leaveGroup=({group_id:e})=>this.controller.requestApiMethod("groups.leave",{group_id:e}).then((()=>this.handleSuccess({result:!0}))),this.parseHandlerParams=e=>e.group_id?"number"!=typeof e.group_id?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("group_id","number")}):Promise.resolve({request_id:e.request_id,group_id:e.group_id}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("group_id")})}}},816273:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.OpenApp,this.handle=e=>(this.controller.sendMessageToHost({message:{params:e,handler:r.MiniAppEvents.OpenApp}}),this.handleSuccess({result:!0}))}}},430834:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.OpenPayForm,this.handle=e=>{this.controller.sendMessageToHost({message:{params:e,handler:r.MiniAppEvents.OpenPayForm}})}}}},606284:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(565151),n=i(365815),o=i(48265),a=i(969755);class s extends a.default{get minWidth(){const e=this.controller.getMiniAppInfo().app.id;return r.AppIDsWithNarrowMinWidth.includes(e)?400:630}get minHeight(){const e=this.controller.getMiniAppInfo().app.id;return r.AppIDsWithNarrowMinHeight.includes(e)?400:500}constructor(...e){super(...e),this.handlerName=o.MiniAppEvents.ResizeWindow,this.handle=e=>this.parseHandlerParams(e).then((e=>(this.controller.resizeWindow(e.width,e.height),this.handleSuccess(e)))).catch(this.handleFailed),this.parseHandlerParams=({width:e,height:t})=>e||t?e&&"number"!=typeof e?Promise.reject({error_code:n.ERROR_CODES.INVALID_PARAMS,error_reason:n.CommonErrorReasons.invalidParam("width","number")}):t&&"number"!=typeof t?Promise.reject({error_code:n.ERROR_CODES.INVALID_PARAMS,error_reason:n.CommonErrorReasons.invalidParam("height","number")}):Promise.resolve({width:e&&Math.max(this.minWidth,Math.min(e,1e3)),height:t&&Math.max(this.minHeight,Math.min(t,1e4))}):Promise.reject({error_code:n.ERROR_CODES.MISSING_PARAM,error_reason:'Missing required param "width" or "height"'})}}},628296:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.RetargetingPixel,this.handle=e=>this.parseHandlerParams(e).then((e=>this.controller.requestApiMethod("ads.retargetingHit",{...e}))).then((()=>this.handleSuccess({result:!0}))).catch(this.handleFailed),this.parseHandlerParams=e=>{const{pixel_code:t,event:i,products_event:n,products_params:o,target_group_id:a,price_list_id:s}=e;return t?"string"!=typeof t?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("pixel_code","string")}):i&&"string"!=typeof i?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("event","string")}):s&&"number"!=typeof s?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("price_list_id","number")}):a&&"number"!=typeof a?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("target_group_id","number")}):n&&"string"!=typeof n?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("products_event","string")}):o&&"string"!=typeof o?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("products_params","string")}):Promise.resolve({request_id:e.request_id,pixel_code:t,event:i,products_event:n,products_params:o,target_group_id:a,price_list_id:s}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("pixel_code")})}}}},212881:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.Scroll,this.handle=e=>this.parseHandlerParams(e).then((e=>{const{scrollTarget:t}=this.controller.getMiniAppInfo().config,{top:i,speed:r}=e,n=r||400,o=window.scrollY,a=i-window.scrollY,s=performance.now();return new Promise((e=>{if("HTML"===t.tagName){const t=i=>{const r=(i-s)/n;window.scrollTo(window.scrollX,o+a*(r>1?1:r)),r>=1?e({top:window.scrollY,height:document.documentElement.clientHeight}):window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}else t.scrollTop=i,e({top:i,height:t.clientHeight})}))})).then(this.handleSuccess).catch(this.handleFailed),this.parseHandlerParams=e=>{const{top:t,speed:i}=e,n={request_id:e.request_id,top:t};if(void 0===t)return Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("top")});if("number"!=typeof t)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("top","number")});if(void 0!==i){if("number"!=typeof i)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("speed","number")});n.speed=i}return Promise.resolve(n)}}}},69351:(e,t,i)=>{i.d(t,{addAppInScrollSubscribers:()=>o,hasAppInScrollSubscribers:()=>n,removeAppFromScrollSubscribers:()=>a});const r=[],n=e=>r.includes(e),o=e=>{r.push(e)},a=e=>{r.splice(r.indexOf(e),1)}},597959:(e,t,i)=>{i.d(t,{default:()=>o});var r=i(48265),n=i(969755);class o extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.ScrollTop,this.handle=()=>{const{scrollTarget:e}=this.controller.getMiniAppInfo().config;return this.handleSuccess({scrollTop:e.scrollTop})}}}},318323:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(969755),a=i(69351);class s extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.ScrollTopStart,this.handle=()=>{const{app:{id:e},config:{scrollTarget:t}}=this.controller.getMiniAppInfo();return(0,a.hasAppInScrollSubscribers)(e)?this.handleFailed({error_code:r.ERROR_CODES.CUSTOM,error_reason:r.CommonErrorReasons.scrollSubscriberAlreadyExist()}):((0,a.addAppInScrollSubscribers)(e),this.handleSuccess({result:!0,scrollTop:t.scrollTop.toString()}))}}}},135023:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(48265),n=i(969755),o=i(69351);class a extends n.default{constructor(...e){super(...e),this.handlerName=r.MiniAppEvents.ScrollTopStop,this.handle=()=>{const{app:{id:e},config:{scrollTarget:t}}=this.controller.getMiniAppInfo();return(0,o.removeAppFromScrollSubscribers)(e),this.handleSuccess({result:!0,scrollTop:t.scrollTop.toString()})}}}},150209:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.SetLocation,this.handle=e=>this.parseHandlerParams(e).then((({location:e})=>this.controller.setLocation(e))).then((()=>this.handleSuccess({result:!0}))).catch(this.handleFailed),this.parseHandlerParams=({request_id:e,location:t})=>t?"string"!=typeof t?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("location","string")}):Promise.resolve({request_id:e,location:t}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("location")})}}},714642:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.SetTitle,this.handle=e=>this.parseHandlerParams(e).then((e=>(this.controller.sendMessageToHost({message:{params:e,handler:n.MiniAppEvents.SetTitle}}),this.handleSuccess({result:!0})))).catch(this.handleFailed),this.parseHandlerParams=e=>e.title?Promise.resolve({title:`${this.controller.getMiniAppInfo().app.title} — ${e.title}`}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("title")})}}},463566:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(62495),a=i(969755);class s extends a.default{getErrorCode(e){switch(e){case r.CommonErrorReasons.noAds():return r.ERROR_CODES.NO_ADS;case r.CommonErrorReasons.requestsLimitReached():return r.ERROR_CODES.REQUEST_LIMIT_REACHED;case r.CommonErrorReasons.userDenied():return r.ERROR_CODES.USER_DENIED;default:return r.ERROR_CODES.CUSTOM}}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.ShowBannerAd,this.handle=async e=>{const t=this.validateParams(e),i=this.adsController.getBannerAdAvailability();if(!i.isAvailable)return this.handleFailed({error_code:r.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:r.CommonErrorReasons.unsupportedPlatform(this.handlerName),error_description:r.ERROR_DESCRIPTIONS.BANNER_IN_INTERNAL_APP});if(!i.position?.[t.banner_location])return this.handleFailed({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam(),error_description:r.ERROR_DESCRIPTIONS.BANNER_TOP_IN_DIRECT_GAMES});if(t.orientation&&!i.orientation?.[t.orientation]&&(t.orientation="horizontal"),t.height_type&&!i.heightType?.[t.height_type]&&(t.height_type="regular"),"resize"===t.layout_type&&void 0!==t.banner_align&&"vertical"!==t.orientation)return this.handleFailed({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:'Param "banner_align" can not be used with layout_type="resize"'});if(!this.isVerticalBannerLayoutTypeValid(t,i))return this.handleFailed({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("layout_type","resize")});if(!this.isVerticalBannerAlignValid(t,i))return this.handleFailed({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("banner_align","left")});try{const e=await this.adsController.loadBannerAd();if(!e)return this.handleSuccess({result:!1});const i=await this.adsController.handleBannerAd(e,t);return this.handleSuccess({result:!0,...i,...t})}catch(e){return this.handleFailed({error_code:this.getErrorCode(e),error_reason:e})}},this.validateParams=e=>{const t={...e};void 0!==t.banner_location&&["bottom","top"].includes(t.banner_location)||(t.banner_location="bottom");void 0!==t.layout_type&&["resize","overlay"].includes(t.layout_type)||(t.layout_type="resize");void 0!==t.height_type&&["compact","regular"].includes(t.height_type)||(t.height_type="regular");return void 0!==t.orientation&&["vertical","horizontal"].includes(t.orientation)||(t.orientation="horizontal"),"vertical"===t.orientation&&(void 0!==t.banner_align&&"center"!==t.banner_align||(t.banner_align="right")),t},this.isVerticalBannerLayoutTypeValid=(e,t)=>!(this.controller.featureEnabled(o.FeatureEnabledKeys.BannerRedesign)&&"vertical"===e.orientation&&"overlay"===e.layout_type&&!t.verticalOverlay),this.isVerticalBannerAlignValid=(e,t)=>!(this.controller.featureEnabled(o.FeatureEnabledKeys.BannerRedesign)&&"vertical"===e.orientation&&"right"===e.banner_align&&!t.verticalRight)}}},728987:(e,t,i)=>{i.d(t,{default:()=>d});var r=i(365815),n=i(48265),o=i(969755),a=i(208109),s=i(42032),l=i(60871);class d extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.ShowGoodOrderBox,this.polingEnabled=!0,this.handle=e=>this.parseHandlerParams(e).then(this.showModalWithLoader).then(this.createOrder).then(this.insertPayFrame).then(this.pollOrderInfo).then(this.showSuccessModal).then(this.handleSuccess).catch(this.handleFailed).finally(this.handleFinally),this.showModalWithLoader=e=>(this.billingBridge=new a.default({handler:this.handleBridgeEvent,isValidEvent:this.isValidBillingEvent}),this.handleModal({type:"GoodOrderBoxModal",data:{state:l.HandlerState.CreateOrder,isMidasPaymentFrame:this.isMidasPaymentFrame},actions:{onUserDenied:this.onUserDenied,onCloseModal:()=>this.updateModalData({shouldClosed:!0})}}),e),this.createOrder=async e=>new Promise(((t,i)=>{this.rejectCreateOrder=i;(async()=>{try{const i=await this.controller.requestApiMethod("goodsOrders.createOrder",{item_id:e.external_item_id});t(i.response)}catch{this.updateModalData({state:l.HandlerState.Error}),i({error_code:r.ERROR_CODES.CREATE_GOOD_ORDER,error_reason:r.CommonErrorReasons.goodOrder("Create")})}})()})),this.insertPayFrame=async({payment_url:e,order_id:t})=>(this.updateModalData({url:e,state:l.HandlerState.AwaitFrame}),t),this.pollOrderInfo=e=>new Promise(((t,i)=>{this.rejectPolling=i;const n=async()=>{if(this.polingEnabled)try{const{response:{payment_status:o,order_status:a}}=await this.controller.requestApiMethod("goodsOrders.getOrder",{order_id:e}),s=o===l.PaymentStatus.Success,d=a===l.OrderStatus.Acknowledged,c=o===l.PaymentStatus.Failure,u=a===l.OrderStatus.Rejected;s&&d&&t({order_id:e}),(c||u)&&(this.updateModalData({state:l.HandlerState.Error}),i({error_code:r.ERROR_CODES.FAILURE_GOOD_ORDER_PAYMENT,error_reason:r.CommonErrorReasons.goodOrder("Payment")})),setTimeout((()=>{n()}),l.CHECK_ORDER_INTERVAL)}catch{this.updateModalData({state:l.HandlerState.Error}),i({error_code:r.ERROR_CODES.GET_GOOD_ORDER,error_reason:r.CommonErrorReasons.goodOrder("Get")})}};setTimeout((()=>{n()}),l.INIT_TIMEOUT_GET_ORDER)})),this.showSuccessModal=({order_id:e})=>(this.updateModalData({state:l.HandlerState.Success}),{order_id:e}),this.isValidBillingEvent=e=>{if("string"==typeof e.data)try{return JSON.parse(e.data)?.type===l.BILLING_BRIDGE_MESSAGE_TYPE}catch(e){throw this.rejectPolling?.({error_code:r.ERROR_CODES.CONNECTION_LOST,error_reason:r.CommonErrorReasons.parsingMessageError()}),(0,s.errorLogger)(r.CommonErrorReasons.parsingMessageError(),e),this.updateModalData({state:l.HandlerState.Error}),e}return!1},this.handleBridgeEvent=e=>{const t=JSON.parse(e),i={[l.BillingBridgeMessageActions.FormLoad]:this.handleBillingFormDataLoad,[l.BillingBridgeMessageActions.CloseWindow]:()=>this.handleBillingCloseWindow(t),[l.BillingBridgeMessageActions.PageLoad]:this.handleBillingPageLoad,[l.BillingBridgeMessageActions.PaySuccess]:this.handleBillingPaySuccess,[l.BillingBridgeMessageActions.FireEvent]:()=>this.handleBillingFireEvent(t)};t.action&&i[t.action]?.()},this.handleBillingPaySuccess=()=>{this.isMidasPaymentFrame||this.updateModalData({state:l.HandlerState.AwaitOrder})},this.handleBillingPageLoad=()=>{this.updateModalData({state:l.HandlerState.AwaitPayment})},this.handleBillingFireEvent=e=>{e.action_params?.eventName===l.BillingFireEventNames.FormCancelButtonClick&&this.onUserDenied()},this.handleBillingFormDataLoad=()=>{this.updateModalData({state:l.HandlerState.AwaitPayment})},this.handleBillingCloseWindow=e=>{e.action_params?.status===l.BillingEventsStatuses.Ok&&this.updateModalData({state:l.HandlerState.AwaitOrder})},this.handleFinally=()=>{this.billingBridge?.destroy(),this.polingEnabled=!1},this.onUserDenied=()=>{this.updateModalData({shouldClosed:!0}),this.rejectPolling?.({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()}),this.rejectCreateOrder?.({error_code:r.ERROR_CODES.USER_DENIED,error_reason:r.CommonErrorReasons.userDenied()})},this.parseHandlerParams=e=>e.type?e.type!==l.GoodsOrderType.GoodsOrder&&e.type!==l.GoodsOrderType.GoodsSubscription?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("type",`"${l.GoodsOrderType.GoodsOrder}" or "${l.GoodsOrderType.GoodsSubscription}"`)}):e.external_item_id?e.hasOwnProperty("external_item_id")&&"string"!=typeof e.external_item_id?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.invalidParam("external_item_id","string")}):(this.isMidasPaymentFrame=e.type===l.GoodsOrderType.GoodsOrder,Promise.resolve({type:e.type,external_item_id:e.external_item_id})):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("external_item_id")}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("type")})}}},60871:(e,t,i)=>{i.d(t,{BILLING_BRIDGE_MESSAGE_TYPE:()=>r,BillingBridgeMessageActions:()=>n,BillingEventsStatuses:()=>h,BillingFireEventNames:()=>u,CHECK_ORDER_INTERVAL:()=>o,GoodsOrderType:()=>c,HandlerState:()=>d,INIT_TIMEOUT_GET_ORDER:()=>a,OrderStatus:()=>l,PaymentStatus:()=>s});const r="billing",n={FormLoad:"formLoad",CloseWindow:"closeWindow",PageLoad:"pageLoad",PaySuccess:"paySuccess",FireEvent:"fireEvent"},o=1e3,a=5e3,s={Failure:-1,InProgress:0,Success:1},l={Wait:0,Acknowledged:1,Rejected:2,Refunded:3,Created:4},d={CreateOrder:"CreateOrder",AwaitFrame:"AwaitFrame",AwaitPayment:"AwaitPayment",AwaitOrder:"AwaitOrder",Success:"Success",Error:"Error"},c={GoodsOrder:"goods_order",GoodsSubscription:"goods_subscription"},u={FormCancelButtonClick:"form_cancel-button-click"},h={Ok:"ok"}},491883:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{checkUrlString(e){try{return!!new URL(e)}catch{return!1}}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.ShowImages,this.handle=e=>this.parseHandlerParams(e).then((e=>this.controller.modalRequest&&this.controller.modalRequest({data:e,handlerName:n.MiniAppEvents.ShowImages,type:"ShowImages"}))).then((()=>this.handleSuccess({result:!0}))).catch(this.handleFailed),this.parseHandlerParams=e=>{const{images:t,start_index:i}=e;if(!e.hasOwnProperty("images"))return Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("images")});if(!Array.isArray(t))return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("images","array")});if(!t.length)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:'Param "array" should have minimum one element.'});if(!t.every((e=>this.checkUrlString(e))))return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:'Param "array" should contain valid links.'});if(!t.every((e=>e.startsWith("https://"))))return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:'Param "array" should contain https links.'});if(e.hasOwnProperty("start_index")){if("number"!=typeof i)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("start_index","number")});if(i<0)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:'Param "start_index" should be non-negative number.'});if(void 0===t[i])return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:'Param "start_index" should be a valid index in the pictures array.'})}return Promise.resolve(e)}}}},652274:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(62495),a=i(969755);class s extends a.default{getErrorCode(e){return e===r.CommonErrorReasons.requestsLimitReached()?r.ERROR_CODES.REQUEST_LIMIT_REACHED:r.ERROR_CODES.CUSTOM}constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.ShowNativeAds,this.handle=async e=>{const t={...e},i=t.ad_format;void 0===t.use_waterfall&&"reward"===i&&(t.use_waterfall=!0);try{if("interstitial"===i){const e=await this.showInterstitialAds(!1);return e?this.handleSuccess({result:e}):this.handleFailed({error_code:r.ERROR_CODES.NO_ADS,error_reason:r.CommonErrorReasons.noAds()})}const e=await this.showRewardAds(Boolean(t.use_waterfall));return e?this.handleSuccess({result:e}):this.handleFailed({error_code:r.ERROR_CODES.NO_ADS,error_reason:r.CommonErrorReasons.noAds()})}catch(e){return this.handleFailed({error_code:this.getErrorCode(e),error_reason:e})}},this.showInterstitialAds=async e=>this.adsController.preloadInterstitialAds({isRewardFallback:e,isCheckAds:!1,isWaterfallCall:!1}).then((t=>!!t&&this.adsController.showInterstitialAds(e,this.handleMiniAppModal))),this.showInterstitialMulti=async()=>this.adsController.preloadInterstitialMulti({isCheckAds:!1}).then((e=>{switch(e){case"multi":return this.adsController.showInterstitialMulti(this.handleMiniAppModal);case"single":return this.adsController.showInterstitialAds(!0,this.handleMiniAppModal);default:return!1}})),this.handleMiniAppModal=(e,t)=>{this.handleModal({type:"MiniAppModal",data:e,actions:{onAccept:t}})},this.showRewardAds=async e=>await this.adsController.preloadRewardAds({useWaterfall:e,isCheckAds:!1,isWaterfallCall:!1})?this.adsController.showRewardAds():!!e&&(this.controller.featureEnabled(o.FeatureEnabledKeys.InterstitialMulti)?this.controller.featureEnabled(o.FeatureEnabledKeys.RequestsLimitSentryFix)?await this.showInterstitialMulti():this.showInterstitialMulti():this.controller.featureEnabled(o.FeatureEnabledKeys.RequestsLimitSentryFix)?await this.showInterstitialAds(!0):this.showInterstitialAds(!0))}}},171780:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.ShowSlidesSheet,this.handle=e=>new Promise(((t,i)=>{const r=e=>t({result:!0,action:"reject",slide_index:e}),o=()=>t({result:!0,action:"confirm"}),a=()=>t({result:!0,action:"cancel"});this.parseHandlerParams(e).then((e=>this.controller.modalRequest&&this.controller.modalRequest({type:"SlidesSheetModal",data:e,handlerName:n.MiniAppEvents.ShowSlidesSheet,actions:{onDeny:r,onConfirm:o,onClose:a}}))).catch(i)})).then(this.handleSuccess).catch(this.handleFailed),this.parseHandlerParams=e=>{if(!e.slides)return Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("slides")});if(!Array.isArray(e.slides))return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("slides","array")});if(!e.slides.length||e.slides.length>10)return Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS});return e.slides.some((e=>!e.title||!e.subtitle||!e.media.blob||"image"!==e.media.type))?Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingOrWrongTypeParam()}):Promise.resolve(e)}}}},670087:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(969755),a=i(315565);class s extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.StorageGet,this.handle=e=>this.parseHandlerParams(e).then((e=>this.controller.requestApiMethod("storage.get",{global:e.global,keys:e.keys.join(",")}).then((({response:e})=>this.prepareAnonymStorageData(e))).then(this.handleSuccess))).catch(this.handleFailed),this.parseHandlerParams=e=>e.keys?Array.isArray(e.keys)?e.hasOwnProperty("global")&&"boolean"!=typeof e.global?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("global","boolean")}):Promise.resolve({request_id:e.request_id,global:e.global?1:0,keys:e.keys}):Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("keys","array")}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("keys")}),this.prepareAnonymStorageData=async e=>{if(!this.controller.isAnonymousLaunch)return{keys:e};if(!window.hasOwnProperty("crypto"))return Promise.reject({error_code:r.ERROR_CODES.CRYPTO_UNSUPPORTED,error_reason:r.CommonErrorReasons.cryptoUnsupported()});const{localStorageKey:t,localStorageIV:i}=await(0,a.getCryptoKeyFromLocalStorage)();if(!t||!i)return Promise.reject({error_reason:r.CommonErrorReasons.missingCryptoKey(),error_code:r.ERROR_CODES.MISSING_CRYPTO_KEY});try{const{key:r,iv:n}=await(0,a.getCryptoKey)(t,i);for(let t=0;t<e.length;t++)e[t].value=await(0,a.decrypt)(r,n,e[t].value);return{keys:e}}catch{return Promise.reject({error_reason:r.CommonErrorReasons.missingCryptoKey(),error_code:r.ERROR_CODES.MISSING_CRYPTO_KEY})}}}}},619675:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.StorageGetKeys,this.handle=e=>this.parseHandlerParams(e).then((e=>this.controller.requestApiMethod("storage.getKeys",e).then((({response:e})=>this.handleSuccess({keys:e}))))).catch(this.handleFailed),this.parseHandlerParams=e=>"number"!=typeof e.count?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("count","number")}):"number"!=typeof e.offset?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("offset","number")}):Promise.resolve({request_id:e.request_id,count:e.count,offset:e.offset})}}},863651:(e,t,i)=>{i.d(t,{default:()=>s});var r=i(365815),n=i(48265),o=i(969755),a=i(315565);class s extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.StorageSet,this.handle=e=>this.parseHandlerParams(e).then((e=>this.prepareAnonymStorageData(e))).then((e=>this.controller.requestApiMethod("storage.set",e))).then((({response:e})=>this.wrapResult(Boolean(e)))).then(this.handleSuccess).catch(this.handleFailed),this.parseHandlerParams=e=>e.key?e.hasOwnProperty("value")&&"string"!=typeof e.value?Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.invalidParam("value","string")}):e.hasOwnProperty("global")&&"boolean"!=typeof e.global?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("global","boolean")}):Promise.resolve({request_id:e.request_id,global:e.global?1:0,key:e.key,value:e.value}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("key")}),this.prepareAnonymStorageData=async e=>{if(!this.controller.isAnonymousLaunch)return e;if(!window.hasOwnProperty("crypto"))return Promise.reject({code:r.ERROR_CODES.CRYPTO_UNSUPPORTED,reason:r.CommonErrorReasons.cryptoUnsupported()});const{localStorageKey:t,localStorageIV:i}=await(0,a.getCryptoKeyFromLocalStorage)(),n=t&&i,{key:o,iv:s}=n?await(0,a.getCryptoKey)(t,i):await(0,a.generateCryptoKey)();return e.value=await(0,a.encrypt)(o,s,e.value),e}}}},175565:(e,t,i)=>{i.d(t,{default:()=>l});var r=i(365815),n=i(48265),o=i(969755),a=i(467e3),s=i(326426);class l extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.TrackEvent,this.handle=e=>this.parseHandlerParams(e).then(this.transformParams).then((e=>this.controller.trackMyTrackerEvent?.(s.MyTrackerMiniAppEvents.CUSTOM,e))).then((()=>this.handleSuccess(this.wrapResult(!0)))).catch(this.handleFailed),this.transformParams=({event_name:e,custom_user_id:t})=>Promise.resolve((0,a.cleanUndefinedFields)({eventName:e,customUserId:t})),this.parseHandlerParams=({event_name:e,custom_user_id:t,request_id:i})=>e?"string"!=typeof e?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("event_name","string")}):t&&"string"!=typeof t?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("custom_user_id","string")}):Promise.resolve({event_name:e,custom_user_id:t,request_id:i}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("event_name")})}}},802188:(e,t,i)=>{i.d(t,{default:()=>a});var r=i(365815),n=i(48265),o=i(969755);class a extends o.default{constructor(...e){super(...e),this.handlerName=n.MiniAppEvents.Translate,this.handle=e=>this.parseHandlerParams(e).then((({texts:e,translation_language:t})=>this.controller.requestApiMethod("translations.translate",{translation_language:t,texts:e.join(",")}))).then((({response:e})=>this.handleSuccess({result:e}))).catch(this.handleFailed),this.parseHandlerParams=({request_id:e,texts:t,translation_language:i})=>t?Array.isArray(t)?i?"string"!=typeof i?Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("translation_language","string")}):Promise.resolve({request_id:e,texts:t,translation_language:i}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("translation_language")}):Promise.reject({error_code:r.ERROR_CODES.INVALID_PARAMS,error_reason:r.CommonErrorReasons.wrongType("texts","array")}):Promise.reject({error_code:r.ERROR_CODES.MISSING_PARAM,error_reason:r.CommonErrorReasons.missingParam("texts")})}}},880204:(e,t,i)=>{i.d(t,{default:()=>ie});var r=i(480261),n=i(917842),o=i(68307),a=i(759127),s=i(906248),l=i(841420),d=i(478155),c=i(159309),u=i(184031),h=i(783725),p=i(223297),m=i(169855),f=i(207078),b=i(870319),v=i(433646),g=i(599532),_=i(267868),y=i(950123),w=i(420167),A=i(406145),S=i(475616),x=i(60416),P=i(388945),E=i(225179),k=i(185343),M=i(934037),C=i(9878),I=i(152386),O=i(722235),T=i(331213),R=i(276033),j=i(205786),N=i(223030),L=i(816273),D=i(430834),B=i(606284),V=i(628296),H=i(212881),z=i(597959),U=i(318323),F=i(135023),W=i(150209),G=i(714642),K=i(463566),Z=i(728987),Y=i(491883),q=i(652274),Q=i(171780),J=i(670087),X=i(619675),$=i(863651),ee=i(175565),te=i(802188),ie={VKWebAppInit:T.default,VKWebAppGetClientVersion:A.default,VKWebAppGetAuthToken:w.default,VKWebAppCallAPIMethod:u.default,VKWebAppCheckAllowedScopes:h.default,VKWebAppGetGeodata:P.default,VKWebAppGetLaunchParams:k.default,VKWebAppStorageGet:J.default,VKWebAppStorageSet:$.default,VKWebAppGetUserInfo:I.default,VKWebAppCreateHash:g.default,VKWebAppConversionHit:b.default,VKWebAppAllowNotifications:d.default,VKWebAppDenyNotifications:_.default,VKWebAppGetPhoneNumber:M.default,VKWebAppGetEmail:x.default,VKWebAppStorageGetKeys:X.default,VKWebAppActionDone:n.default,VKWebAppAddToFavorites:o.default,VKWebAppAllowMessagesFromGroup:l.default,VKWebAppJoinGroup:R.default,VKWebAppLeaveGroup:N.default,VKWebAppTrackEvent:ee.default,VKWebAppClose:f.default,VKWebAppOpenApp:L.default,VKWebAppOpenPayForm:D.default,VKWebAppGetGroupInfo:E.default,VKWebAppAlert:s.default,VKWebAppGetConfig:S.default,VKWebAppScrollTop:z.default,VKWebAppScrollTopStart:U.default,VKWebAppScrollTopStop:F.default,VKWebAppShowImages:Y.default,VKWebAppRetargetingPixel:V.default,VKWebAppSetTitle:G.default,VKWebAppSetLocation:W.default,SetSupportedHandlers:r.default,VKWebAppCopyText:v.default,VKWebAppScroll:H.default,VKWebAppResizeWindow:B.default,VKWebAppGetSilentToken:C.default,VKWebAppShowSlidesSheet:Q.default,VKWebAppForceLogout:y.default,VKWebAppAuthByExchangeToken:c.default,VKWebAppTranslate:te.default,VKWebAppShowBannerAd:K.default,VKWebAppHideBannerAd:O.default,VKWebAppCheckBannerAd:p.default,VKWebAppCheckNativeAds:m.default,VKWebAppShowNativeAds:q.default,VKWebAppKeyboardLock:j.default,VKWebAppAddToMenu:a.default,VKWebAppShowGoodOrderBox:Z.default}},292972:(e,t,i)=>{i.d(t,{PendingTask:()=>n});var r=i(728554);class n{constructor(){this.resolveHandler=r.noop,this.rejectHandler=r.noop,this.get=()=>this.promise,this.resolve=e=>this.resolveHandler(e),this.reject=e=>this.rejectHandler(e),this.promise=new Promise(((e,t)=>{this.resolveHandler=e,this.rejectHandler=t}))}}},31346:(e,t,i)=>{i.d(t,{UpdateManager:()=>r});class r{static getDefaultEventParams(){return{selectedSlot:0,alreadyUsedSlots:[],skippedReasons:[]}}getUpdateTs(){return this.lastUpdateTimestamp}saveUpdateTs(){this.lastUpdateTimestamp=Date.now()}setInProgress(e){this.updateInProgress=e}getInProgress(){return this.updateInProgress}getAbortController(){return this.abortController}setAbortController(e){this.abortController=e}setAdsEvent(e){this.adsEventParams=e}getAdsEventParams(){return this.adsEventParams}constructor(){this.lastUpdateTimestamp=0,this.updateInProgress=!1,this.abortController=new AbortController,this.adsEventParams=r.getDefaultEventParams()}}},333702:(e,t,i)=>{i.d(t,{ANIMATION_DURATION:()=>n,HOVER_ANIMATION_DURATION:()=>o,getImageAttributes:()=>u,getImageSize:()=>h,getVideoSize:()=>c});var r=i(478108);const n=20,o=7,a=1.7625;function s(e,t){if(!e||!t)return!1;const i=e/t-a;return Math.abs(i)<.2}function l(e,t){return e&&t?t>e?"vertical":t<e?"horizontal":null:null}function d(e,t){return e&&t?e/t:1}function c(e,t){const{width:i,height:r}=function(e){let t=null;return e.video?.mediafiles.forEach((({width:e,height:i})=>{e&&i&&(null===t||e<t.width)&&(t={width:e,height:i})})),t}(e)??{width:1,height:1};return h(d(i,r),t)}function u(e){return e.imageLink?{src:e.imageLink,aspectRatio:d(e.imageWidth,e.imageHeight),orientation:l(e.imageWidth,e.imageHeight),alternativeAnimation:s(e.imageWidth,e.imageHeight)}:e.iconLink?{src:e.iconLink,aspectRatio:d(e.iconWidth,e.iconHeight),orientation:l(e.iconWidth,e.iconHeight),alternativeAnimation:s(e.iconWidth,e.iconHeight)}:null}function h(e,t){const{isBannerAlign:i,isBannerSlim:n,isBannerVertical:o,isDesktop:a}=t;let s=r.IMAGE_SIZE_L;i&&(s=r.IMAGE_SIZE_BANNER_ALIGN),n&&(s=r.IMAGE_SIZE_SLIM),o&&(s=a?r.IMAGE_SIZE_XXL:r.IMAGE_SIZE_VERTICAL_MOBILE);const l={width:s,height:s};if(e){const t=l.width;let i=t*e;o?(i=t/e,l.height=Math.min(i,s)):l.width=i}return l}},424555:(e,t,i)=>{i.d(t,{convertBannerAdTypeToBannerAdParams:()=>s,extractAdChoiceOptions:()=>h,extractAppHash:()=>u,extractHeaderLabel:()=>l,extractMainImage:()=>d,extractPixelsOfType:()=>c,extractReasons:()=>m,extractSlots:()=>p,isMotionAd:()=>f,nativeAdShouldBeSticky:()=>v,sendStatistics:()=>a});var r=i(371713),n=i(478108),o=i(42032);function a(e){e?.forEach((e=>{(new Image).src=e}))}function s(e,t){return{bannerData:e,adChoices:{options:h(e.adChoices?.options??[],t)}}}function l(e,t){let i=e;const r=t?.ageRestrictions??t?.age_restrictions;return r&&(i+=` ${n.dot} ${r}`),i}function d(e){let t="";return e.image&&(t=e.image),e.image_600x600&&(t=e.image_600x600),e.imageLink&&(t=e.imageLink),t}function c(e,t){return e?.statistics?.filter((e=>e.type===t)).map((({url:e})=>e))}function u(e){let t=null;try{t=e.split("#")[1]}catch(e){(0,o.errorLogger)("Failed to extract LeadAds hash",e)}return t}function h(e,t){return e.map((e=>({name:e.name,onClick:()=>{"default"===e.type?e.clickLink?window.open(e.clickLink,"_blank")?.focus():e.url&&((new Image).src=e.url):"copy"===e.type&&(0,r.copyTextToClipboard)(e.copyText),e.shouldCloseAd&&t()}})))}function p(e){return e.map((({slot:e})=>e))}function m(e){return e.map((({reason:e})=>e))}function f(e){return"motion-ads"===e.data.type}const b=1.3;function v(e){return e.clientHeight>document.documentElement.clientHeight*b}},630430:(e,t,i)=>{i.d(t,{loadAdManSdk:()=>o});var r=i(478108);function n(e,t,i=10,o=400){if("function"==typeof window.AdManSDK)e();else if(i)if(document.getElementById("adman3-instance")||"function"==typeof window.AdManSDK)"function"!=typeof window.AdManSDK?setTimeout((()=>{n(e,t,--i,o+200)}),o):e();else{const i=document.createElement("script");i.src=r.ADMAN3_SCRIPT_URL,i.type="application/javascript",i.id="adman3-instance",i.async=!0,i.onload=e,i.onerror=t;const n=document.getElementsByTagName("script")[0];n.parentNode?.insertBefore(i,n)}}function o(){return new Promise(n)}},127294:(e,t,i)=>{i.d(t,{loadScript:()=>r});const r=async(e,t,i)=>new Promise(((r,n)=>{const o=document.createElement("script");let a;function s(){o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(d(),r())}function l(){d(),n()}function d(){clearTimeout(a),o.removeEventListener("load",s),o.removeEventListener("readystatechange",s),o.removeEventListener("error",l)}o.addEventListener("load",s),o.addEventListener("readystatechange",s),o.addEventListener("error",l),i?.nonce&&(o.nonce=i.nonce),i?.crossOrigin&&(o.crossOrigin=i.crossOrigin),i?.async&&(o.async=i.async),o.src=e,document.head.appendChild(o),t&&(a=window.setTimeout(l,t))}))},796827:(e,t,i)=>{i.d(t,{isLandscapeOrientation:()=>a,useIsLandscape:()=>s});var r=i(296540);const n=[-90,90],o=["landscape-secondary","landscape-primary"],a=()=>{if(void 0!==window.orientation)return n.includes(Number(window.orientation));const{screen:e}=window,t=(e.orientation||{}).type||e.mozOrientation||e.msOrientation;return o.includes(t)};const s=()=>{const[e,t]=(0,r.useState)(a()),i=()=>{t(a())};return(0,r.useEffect)((()=>{var e;return e=i,window.screen?.orientation?window.screen.orientation.addEventListener("change",e):window.addEventListener("orientationchange",e),()=>function(e){window.screen?.orientation?window.screen.orientation.removeEventListener("change",e):window.removeEventListener("orientationchange",e)}(i)}),[]),e}},945265:(e,t,i)=>{i.d(t,{useMiniAppDefaultProps:()=>a});var r=i(220208),n=i(296540),o=i(368126);const a=e=>(0,n.useMemo)((()=>{const{config:t,...i}=e,{config:n,...a}=o.DefaultMiniAppProps,s=t?.scrollTarget||n.scrollTarget,l=t?.scheme||(e=>e===r.ColorScheme.LIGHT?o.Scheme.BRIGHT_LIGHT:o.Scheme.SPACE_GRAY)(t?.appearance||n.appearance);return{...a,...i,config:{...n,...t,scheme:l,scrollTarget:s}}}),[e])},676058:(e,t,i)=>{i.d(t,{useOnCallback:()=>o});var r=i(296540),n=i(338577);const o=(e,t)=>{const i=(0,r.useRef)(new n.Hook);return(0,r.useEffect)((()=>{e()&&i.current.fire()}),t),(0,r.useEffect)((()=>()=>i.current.clear()),[]),i.current.add.bind(i.current)}},960340:(e,t,i)=>{i.d(t,{useStatsProviderProps:()=>n});var r=i(296540);const n=({sendStatEvent:e,forceSendStatEvent:t,bridgeMethodsToLogCallArguments:i,featureToggles:n,sessionUuid:o,app:a,config:{performance:s}={},featureEnabled:l,onExternalSessionStart:d,launchEventParams:c,userId:u})=>(0,r.useMemo)((()=>({sendStatEvent:e,forceSendStatEvent:t,bridgeMethodsToLogCallArguments:i,featureToggles:n,sessionUuidFromProps:o,app:a,performanceFromProps:s,onExternalSessionStart:d,featureEnabled:l,launchEventParams:c,userId:u})),[e,t,i,n,o,a,s,d,l,c,u])},208109:(e,t,i)=>{i.d(t,{BRIDGE_MESSAGE_TYPE:()=>n,default:()=>o});var r=i(42032);const n="vk-connect";class o{isValidEvent(e){const{isValidEvent:t}=this.config;return t?t(e):e.data?.type===n&&this.config.iframe?.contentWindow===e.source}constructor(e){this.destroy=()=>{window.removeEventListener("message",this.handleMessage)},this.sendMessage=e=>{if(!this.config.iframe)throw new Error("No iframe passed for bridge!");const{originMessage:t,message:i}=e;t?.params&&t.params.request_id&&(i.data.request_id=t.params.request_id),(0,r.infoLogger)("send to app",e.message);const n=this.config.iframe?.contentWindow;n?.postMessage(i,"*")},this.handleMessage=e=>{this.isValidEvent(e)&&((0,r.infoLogger)("received from app",e.data),this.config.handler(e.data)?.catch(r.errorLogger))},this.config=e,window.addEventListener("message",this.handleMessage)}}},128196:(e,t,i)=>{i.d(t,{ActionStatCollector:()=>n});var r=i(748921);class n{logEvent({event:e,options:t}){const i={...this.productionStatCollector.getBaseEvent(),type:r.ProductionStatEventTypes.TYPE_ACTION,[r.ProductionStatEventTypes.TYPE_ACTION]:e};this.productionStatCollector.logEvent({event:i,options:t})}constructor(e){this.productionStatCollector=e}}},333495:(e,t,i)=>{i.d(t,{BenchmarkStatCollector:()=>o});var r=i(332689),n=i(42032);class o{logEvent({event:e}){e.type&&e[e.type]?this.sendStatEvent("saveBenchmarkMainStats","benchmarkMainStats",e):(0,n.errorLogger)("BenchmarkMainStatCollector: invalid event.",e)}getBaseEvent(){return{id:this.getIntId(),timestamp:this.getCurrentTime()}}getIntId(){return Math.floor(Math.random()*r.MAX_INT32)}getCurrentTime(){return(1e3*Date.now()).toString(10)}constructor(e){this.sendStatEvent=e}}},685716:(e,t,i)=>{i.d(t,{NavigationStatCollector:()=>n});var r=i(748921);class n{logEvent({event:e,options:t}){const i={...this.productionStatCollector.getBaseEvent(),type:r.ProductionStatEventTypes.TYPE_NAVGO,[r.ProductionStatEventTypes.TYPE_NAVGO]:e};this.productionStatCollector.logEvent({event:i,options:t})}constructor(e){this.productionStatCollector=e}}},494227:(e,t,i)=>{i.d(t,{ProductionStatCollector:()=>o});var r=i(332689),n=i(42032);class o{getCurrentTime(){return Date.now().toString(10)+"000"}getIntId(){return Math.floor(Math.random()*r.MAX_INT32)}logEvent({event:e,options:t}){e.type&&e[e.type]?this.sendStatEvent?(this.sendStatEvent("saveProductionStats","productionStats",e,t),this.lastEvent=e):(0,n.errorLogger)("ProductionStatCollector: sendStatEvent not provided."):(0,n.errorLogger)("ProductionStatCollector: invalid event.",e)}getBaseEvent(e){return{id:this.getIntId(),prev_id:this.lastEvent?.id,timestamp:this.getCurrentTime(),url:window.location.href,screen:e}}constructor(e){this.lastEvent=null,this.sendStatEvent=e}}o.MAX_INT32=2147483647},926520:(e,t,i)=>{i.d(t,{AdEventStatCollector:()=>s});var r=i(478108),n=i(748921),o=i(128196),a=i(494227);class s{logEvent({miniAppId:e,adFormat:t,options:i,adAvailable:r,eventType:o,updated:a}){const s={mini_app_id:e,event:{event_type:o,ad_format:t,ad_available:r,actual_slot_id:Number(i.selectedSlot),skipped_slots:i.alreadyUsedSlots||[],actual_ad_format:i.actualAdFormat||t,skipped_reasons:i.skippedReasons||[],banner_updated:a,banner_id:i.bannerId||0}},l={type:n.ActionProductionStatEventTypes.TYPE_AD_MINI_APPS_EVENT_ITEM,[n.ActionProductionStatEventTypes.TYPE_AD_MINI_APPS_EVENT_ITEM]:s};this.actionStatCollector.logEvent({event:l})}logBannerAdsShown(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.BANNER,options:t,adAvailable:!0,eventType:n.BannerAdEventType.SHOW_BANNER_AD})}logBannerAdsNotFound(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.BANNER,options:t,adAvailable:!1,eventType:n.BannerAdEventType.SHOW_BANNER_AD})}logBannerAdsHidden(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.BANNER,options:t,adAvailable:!0,eventType:n.BannerAdEventType.HIDE_BY_APP})}logBannerAdsHiddenByUser(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.BANNER,options:t,adAvailable:!0,eventType:n.BannerAdEventType.HIDE_BY_USER})}logBannerAdsUpdated(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.BANNER,options:t,adAvailable:!0,eventType:n.BannerAdEventType.SHOW_BANNER_AD,updated:n.AdMiniAppsBannerUpdated.BANNER_UPDATED})}logBannerAdsUpdateNotFound(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.BANNER,options:t,adAvailable:!1,eventType:n.BannerAdEventType.SHOW_BANNER_AD,updated:n.AdMiniAppsBannerUpdated.BANNER_NOT_CHANGED})}logBannerAdsClick(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.BANNER,options:t,adAvailable:!0,eventType:n.BannerAdEventType.CLICK_BANNER_AD})}logRewardAdsNotFound(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.REWARD,options:t,adAvailable:!1,eventType:n.FullScreenAdEventType.SHOW_AD})}logRewardAdsHidden(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.REWARD,options:t,adAvailable:!0,eventType:n.FullScreenAdEventType.SHOW_AD})}logRewardAdsClick(e,t){this.logEvent({miniAppId:e,adFormat:r.AdFormats.REWARD,options:t,adAvailable:!0,eventType:n.FullScreenAdEventType.CLICK_AD})}logInterstitialAdsShown(e,t){this.logEvent({miniAppId:e,adFormat:t.type||r.AdFormats.INTERSTITIAL,options:t,adAvailable:!0,eventType:n.FullScreenAdEventType.SHOW_AD})}logInterstitialAdsNotFound(e,t){this.logEvent({miniAppId:e,adFormat:t.type||r.AdFormats.INTERSTITIAL,options:t,adAvailable:!1,eventType:n.FullScreenAdEventType.SHOW_AD})}logInterstitialAdsClick(e,t){this.logEvent({miniAppId:e,adFormat:t.type||r.AdFormats.INTERSTITIAL,options:t,adAvailable:!0,eventType:n.FullScreenAdEventType.CLICK_AD})}constructor(e){this.productStatCollector=new a.ProductionStatCollector(e),this.actionStatCollector=new o.ActionStatCollector(this.productStatCollector)}}},981756:(e,t,i)=>{i.d(t,{BridgeEventStatsCollector:()=>l});var r=i(332689),n=i(174852),o=i(748921),a=i(128196),s=i(494227);class l{logEvent({webviewUrl:e,miniAppId:t,event:i,error:a,sessionUuid:s,bridgeLog:l,callArguments:d}){const c=this.bridgeMethodsToLogCallArguments.includes(i.event_type),u={...i};c&&d&&(u.call_arguments=(0,n.transformCallArgumentsForLogging)(d));const h={webview_url:e,mini_app_id:t,event:u,error:a,session_uuid:s,bridge_log:l?.slice(0,r.BRIDGE_LOG_MAX_LENGTH)},p={type:o.ActionProductionStatEventTypes.TYPE_BRIDGE_EVENT_ITEM,[o.ActionProductionStatEventTypes.TYPE_BRIDGE_EVENT_ITEM]:h};this.actionStatCollector.logEvent({event:p})}constructor(e,t){this.productStatCollector=new s.ProductionStatCollector(e),this.actionStatCollector=new a.ActionStatCollector(this.productStatCollector),this.bridgeMethodsToLogCallArguments=t||r.BridgeMethodsToLogCallArgumentsDefault}}},60275:(e,t,i)=>{i.d(t,{SessionEventStatCollector:()=>a});var r=i(748921),n=i(128196),o=i(494227);class a{logEvent({appUrl:e,sessionPart:t,session:i}){const n=this.createSessionPartEventStats(t,e),o=this.createSessionEndEventStats(i,e);if(this.forceSendStatEvent){const e=this.createGeneralStatEvents(),t=n&&{...this.productStatCollector.getBaseEvent(),type:r.ProductionStatEventTypes.TYPE_ACTION,[r.ProductionStatEventTypes.TYPE_ACTION]:n},i=o&&{...this.productStatCollector.getBaseEvent(),type:r.ProductionStatEventTypes.TYPE_ACTION,[r.ProductionStatEventTypes.TYPE_ACTION]:o};return t&&e.productionStats.push(t),i&&e.productionStats.push(i),void(e.productionStats.length&&this.forceSendStatEvent(e))}this.sendStatEvent&&(n&&this.actionStatCollector.logEvent({event:n}),o&&this.actionStatCollector.logEvent({event:o}))}createGeneralStatEvents(){return{jsErrorLogs:[],statlogEvents:[],productionStats:[],storyViewStats:[],networkStats:[],customStats:[],webPerfStats:[],benchmarkMainStats:[],vkResStats:[]}}createSessionPartEventStats(e,t){if(!e)return null;const{sessionUuid:i,appId:n,partId:o,duration:a}=e;return{type:r.ActionProductionStatEventTypes.TYPE_MINI_APPS_SESSION,[r.ActionProductionStatEventTypes.TYPE_MINI_APPS_SESSION]:{type:r.SessionEventTypes.SESSION_PART,event:r.SessionEventTypes.SESSION_PART,webview_url:t,session_uuid:i,mini_app_id:n,part_id:o,session_duration:a}}}createSessionEndEventStats(e,t){if(!e||!e.duration)return null;const{sessionUuid:i,appId:n,duration:o}=e;return{type:r.ActionProductionStatEventTypes.TYPE_MINI_APPS_SESSION,[r.ActionProductionStatEventTypes.TYPE_MINI_APPS_SESSION]:{type:r.SessionEventTypes.SESSION_END,event:r.SessionEventTypes.SESSION_END,webview_url:t,session_uuid:i,mini_app_id:n,session_duration:o}}}constructor(e,t){this.productStatCollector=new o.ProductionStatCollector(e),this.actionStatCollector=new n.ActionStatCollector(this.productStatCollector),this.forceSendStatEvent=t,this.sendStatEvent=e}}},907608:(e,t,i)=>{i.d(t,{MiniAppPerformanceCollector:()=>o});var r=i(748921),n=i(333495);class o{logEvent({event:e,callback:t}){const i={...this.benchmarkMainStatCollector.getBaseEvent(),type:r.BenchmarkStatEventTypes.MINI_APPS_PERFORMANCE,[r.BenchmarkStatEventTypes.MINI_APPS_PERFORMANCE]:e};this.benchmarkMainStatCollector.logEvent({event:i}),t?.()}constructor(e){this.benchmarkMainStatCollector=new n.BenchmarkStatCollector(e)}}},313405:(e,t,i)=>{i.d(t,{NavigationMiniAppStatCollector:()=>l});var r=i(467e3),n=i(748921),o=i(685716),a=i(494227),s=i(967303);class l{logEvent({appId:e,...t}){const i={...s.DefaultNavigationItem,destination_item:{type:s.DEFAULT_DESTINATION_ITEM_TYPE,id:e},type:n.NavigationStatEventTypes.TYPE_MINI_APP_NAVGO_ITEM,[n.NavigationStatEventTypes.TYPE_MINI_APP_NAVGO_ITEM]:this.getEventObject(t)};this.navigationStatCollector.logEvent({event:i})}getEventObject({ref:e,webviewUrl:t,sessionUuid:i,sectionId:n,sectionType:o,adId:a,groupId:s,trackCode:l,profileId:d,notificationId:c,collectionId:u,genreId:h}){const p={webview_url:t,session_uuid:i,ref:e,section_id:n,section_type:o,ad_id:a,group_id:s,track_code:l,collection_id:u,notification_id:c,genre_id:h,profile_id:d};return(0,r.cleanUndefinedFields)(p)}constructor(e){this.productStatCollector=new a.ProductionStatCollector(e),this.navigationStatCollector=new o.NavigationStatCollector(this.productStatCollector)}}},967303:(e,t,i)=>{i.d(t,{DEFAULT_DESTINATION_ITEM_TYPE:()=>n,DefaultNavigationItem:()=>r});const r={screen:"apps_catalog",screen_to:"app",subtype:"go"},n="app"},315565:(e,t,i)=>{i.d(t,{decrypt:()=>u,encrypt:()=>c,generateCryptoKey:()=>s,getCryptoKey:()=>d,getCryptoKeyFromLocalStorage:()=>l});const r="AES-GCM",n="anonym_crypto_key",o="anonym_crypto_iv",a=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))).buffer,s=async()=>{const e=await window.crypto.subtle.generateKey({name:r,length:256},!0,["encrypt","decrypt"]),t=window.crypto.getRandomValues(new Uint8Array(12)),i=await window.crypto.subtle.exportKey("jwk",e);return localStorage.setItem(n,JSON.stringify(i)),localStorage.setItem(o,btoa(String.fromCharCode(...t))),{key:e,iv:t}},l=async()=>({localStorageKey:localStorage.getItem(n)||"",localStorageIV:localStorage.getItem(o)||""}),d=async(e,t)=>({key:await crypto.subtle.importKey("jwk",JSON.parse(e),r,!0,["encrypt","decrypt"]),iv:a(t)}),c=async(e,t,i)=>{if(!i)return"";const n=(e=>(new TextEncoder).encode(e))(i);return(e=>btoa(String.fromCharCode(...new Uint8Array(e))))(await window.crypto.subtle.encrypt({name:r,iv:t},e,n))},u=async(e,t,i)=>{if(!i)return"";return(e=>(new TextDecoder).decode(e))(await window.crypto.subtle.decrypt({name:r,iv:t},e,a(i)))}},151289:(e,t,i)=>{function r(){return/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(window.navigator.userAgent.toLowerCase())}function n(){return/iphone/i.test(window.navigator.userAgent.toLowerCase())}function o(){return/ipad/i.test(window.navigator.userAgent.toLowerCase())}function a(){return/ipod/i.test(window.navigator.userAgent.toLowerCase())}i.d(t,{isIpad:()=>o,isIphone:()=>n,isIpod:()=>a,isMobileBrowser:()=>r})},412236:(e,t,i)=>{i.d(t,{MiniAppHandlerError:()=>r});class r extends Error{constructor(e){super(`${e.error_code}: ${e.error_reason}`),this.error=e}}},125764:(e,t,i)=>{var r,n;i.d(t,{LifecycleHooksKeys:()=>r}),(n=r||(r={})).onBeforeMount="onBeforeMount",n.onMount="onMount",n.onDestroy="onDestroy",n.onBridgeMethod="onBridgeMethod",n.onInit="onInit",n.onIframeTimeoutError="onIframeTimeoutError"},892881:(e,t,i)=>{i.d(t,{PageActiveStateShared:()=>o});var r=i(338577),n=i(681194);class o{destroy(){Object.values(this.eventHooks).forEach((e=>e.clear())),window.removeEventListener("visibilitychange",this.onVisibilityChange.bind(this)),window.removeEventListener("pagehide",this.onPageHide.bind(this))}activate(){this.eventHooks[n.PageActiveStateEventNames.ACTIVATE].fire()}deactivate(){this.eventHooks[n.PageActiveStateEventNames.DEACTIVATE].fire()}onVisibilityChange(){document.hidden?this.deactivate():this.activate()}onPageHide(){this.eventHooks[n.PageLeaveEventNames.BEFORE_LEAVE].fire()}constructor(){this.eventHooks={[n.PageActiveStateEventNames.ACTIVATE]:new r.Hook(n.PageActiveStateEventNames.ACTIVATE),[n.PageActiveStateEventNames.DEACTIVATE]:new r.Hook(n.PageActiveStateEventNames.DEACTIVATE),[n.PageLeaveEventNames.BEFORE_LEAVE]:new r.Hook(n.PageLeaveEventNames.BEFORE_LEAVE)},window.addEventListener("visibilitychange",this.onVisibilityChange.bind(this)),window.addEventListener("pagehide",this.onPageHide.bind(this))}}},681194:(e,t,i)=>{var r,n,o;i.d(t,{PageActiveStateEventNames:()=>r,PageLeaveEventNames:()=>o}),(n=r||(r={})).ACTIVATE="activate",n.DEACTIVATE="deactivate",function(e){e.BEFORE_LEAVE="beforeLeave"}(o||(o={}))},369475:(e,t,i)=>{i.d(t,{invokeVKMethod:()=>n,isApiErrorResponse:()=>o});var r=i(940670);const n=(e,t,i)=>{const n=((e,t)=>{delete t.callback,Object.keys(t).forEach((e=>{"object"!=typeof t[e]||Array.isArray(t[e])||(t[e]=JSON.stringify(t[e]))}));const i={method:e,format:"json",...t};return r.querystring.stringify(i)})(t,i);return fetch(`${e}/${t}`,{method:"POST",mode:"cors",body:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((e=>e.json()))},o=e=>e.error},467e3:(e,t,i)=>{i.d(t,{cleanUndefinedFields:()=>r});const r=({...e})=>(Object.keys(e).forEach((t=>void 0===e[t]&&delete e[t])),e)},572469:(e,t,i)=>{i.d(t,{getIdleCallback:()=>r});const r=()=>window.requestIdleCallback||window.setTimeout},174852:(e,t,i)=>{i.d(t,{deepEqual:()=>s,getDryRunOptions:()=>f,getInitialHash:()=>h,isDesktopView:()=>u,isDryRunOverrideHandler:()=>m,isHandlerError:()=>b,isHandlerErrorWithData:()=>v,isHiddenWindow:()=>d,isStrictObject:()=>a,makeParams:()=>l,transformCallArgumentsForLogging:()=>p,validateScopes:()=>c});var r=i(220208),n=i(332689);function o(e){return"object"==typeof e&&null!=e}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){if(e===t)return!0;if(o(e)&&o(t)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(!s(e[i],t[i]))return!1;return!0}}function l(e){return Object.keys(e).map((t=>{let i=e[t];return t=encodeURIComponent(t||""),i=encodeURIComponent(i||""),`${t}=${i}`})).join("&")}function d(){return!document.hasFocus()}function c(e,t){const i=e.split(",").map((e=>e.trim()));return i.every((e=>!e||t.includes(e)))}const u=e=>Boolean(e&&e>=r.ViewWidth.SMALL_TABLET),h=({url:e,hash:t=""})=>{const i=new URL(e).hash.substring(1);return t||i};function p(e){const t=JSON.stringify(e);if(!(t.length>n.BRIDGE_STAT_CALL_ARGUMENTS_MAX_LENGTH))return t}function m(e){return o(e)&&"dryRun"in e&&e.dryRun}function f(e){if(!m(e))return;const t={};return"dryRunResponse"in e&&e.dryRunResponse&&(t.dryRunResponse=e.dryRunResponse),"dryRunError"in e&&e.dryRunError&&(t.dryRunError=e.dryRunError),t}function b(e){return e.type.endsWith("Failed")}function v(e){return b(e)&&"error_data"in e.data&&"error_type"in e.data}},146:(e,t,i)=>{i.d(t,{AdsProviderWithAdaptivity:()=>P});var r=i(474848),n=i(41050),o=i(220208),a=i(296540),s=i(415622),l=i(659298),d=i(600414),c=i(218746),u=i(287734),h=i(478108),p=i(365815),m=i(48265),f=i(62495),b=i(31346),v=i(424555),g=i(127294),_=i(796827),y=i(42032),w=i(174852),A=i(255471),S=i(172671);class x extends a.Component{componentDidUpdate(e,t){const i=t.rewardAd?.admanContainer,r=this.state.rewardAd?.admanContainer,n=this.rewardAdsContainerRef.current;n&&r!==i&&(i&&n.contains(i.getPlayer)&&n?.removeChild(i.getPlayer),r&&n?.appendChild(r.getPlayer)),this.setIframeStyles()}async componentDidMount(){this.setIframeStyles(),this.context.registerAdsController(this.getAdsController),this.adsConfig=await this.getCurrentAdsConfig().catch((()=>{}))}get miniAppId(){return this.hostController.getMiniAppInfo().app.id}render(){const e={getBannerAdAutoUpdateInterval:this.getBannerAdAutoUpdateInterval,handleBannerAdUserClose:this.handleBannerAdUserClose,handleBannerAdClick:this.handleBannerAdClick,...this.getAdsController()},{bannerAd:t,bannerAdParams:i,onBannerAdReady:n,onBannerAdShown:o,interstitialAd:a,interstitialMulti:l}=this.state;let h=null,p=null;return a&&((0,v.isMotionAd)(a)?h=a:p=a),(0,r.jsx)(A.AdsProviderContext.Provider,{value:e,children:(0,r.jsxs)(r.Fragment,{children:[this.props.children,t&&i&&n&&o&&(0,r.jsx)(s.AdBannerV2,{bannerData:t,bannerAdParams:i,onUserClose:this.handleBannerAdUserClose,onUserClick:this.handleBannerAdClick,onAdReady:n,onAdShown:o,bannerAnimationEnabled:this.getBannerAdAvailability().animated,onUpdateDimensions:this.handleBannerUpdateDimensions,BannerRedesign:this.hostController.featureEnabled(f.FeatureEnabledKeys.BannerRedesign)},t.bannerData.bannerID),p&&(0,r.jsx)(d.InterstitialAdV2,{interstitialAdParams:p,mode:"interstitial",onClose:this.hideInterstitialAds,leadAdsSupport:this.getLeadAdsModalSupport()}),l&&(0,r.jsx)(u.InterstitialMulti,{interstitialMulti:l,onClose:this.hideInterstitialAds,leadAdsSupport:this.getLeadAdsModalSupport()}),h&&(0,r.jsx)(c.InterstitialMotionAd,{motionAdParams:h,onClose:this.hideInterstitialAds}),(0,r.jsx)("div",{ref:this.rewardAdsContainerRef})]})})}get hostController(){if(!this.context.host)throw(0,y.errorLogger)("MiniApp is not initialized"),new Error("MiniApp is not initialized");return this.context.host}get adEventStatCollector(){return this.context.stats?.adEventStatCollector}get disableGetAdsConfigFromApi(){return Boolean(this.hostController.featureToggles.disableGetAdsConfigFromApi)}async fetchAdsConfig(){if(this.disableGetAdsConfigFromApi||!this.context.props?.userId)return;const{getHostToken:e,getMiniAppInfo:t,requestApiMethod:i}=this.hostController,{app:{id:r},apiVersion:n}=t();try{const t=await e(),o=await i("apps.getAppAdvertisementConfig",{app_id:r,v:n,access_token:t});if(!o?.response)throw(0,y.errorLogger)("Fetch Ads config error"),new Error("Fetch Ads config error");const{sign_timestamp:a,id:s,sign:l,rewarded:d,banner:c,interstitial:u}=o?.response,h={site_id:s,sign:l,sign_timestamp:a,rewarded:d,banner:c,interstitial:u,user_id:this.context.props?.userId,lang:this.context.props?.locale};if(this.checkAdsConfig(h))return h}catch(e){throw(0,y.errorLogger)(e),e}}getAdsConfigFromProps(){if(!this.context.props?.adsConfig)return;const{adsConfig:e,userId:t,locale:i}=this.context.props,r={...e,user_id:t||e.user_id,lang:i||e.lang};return this.checkAdsConfig(r)?r:void 0}async getAdsConfigFromApi(){const e=this.context.props?.adsPlatformConfig,t=await this.fetchAdsConfig();if(!t)return;const i=(e,t)=>({...e,...t}),r={...t,rewarded:i(t.rewarded,e?.rewarded),interstitial:i(t.interstitial,e?.interstitial),banner:i(t.banner,e?.banner)};return this.checkAdsConfig(r)?r:void 0}async getCurrentAdsConfig(){const e=this.getAdsConfigFromProps();if(this.adsConfig||e)return this.adsConfig??e;this.adsConfigPromise=this.adsConfigPromise||this.getAdsConfigFromApi();const t=await this.adsConfigPromise;return this.adsConfigPromise=null,t}checkAdsConfig(e){return Boolean(e.rewarded&&e.interstitial&&e.banner&&e.user_id&&e.lang)||(()=>{throw(0,y.errorLogger)(p.CommonErrorReasons.invalidAdConfig()),p.CommonErrorReasons.invalidAdConfig()})()}setIframeStyles(){const{bannerAdParams:e,bannerAdDimensions:t}=this.state,{iframePropsState:i}=this.hostController.getMiniAppState(),[r,n]=i,o={};if("resize"===e?.layout_type&&t){const i=t.banner_height,r=t.banner_width;o.boxSizing="border-box";const n=this.props.isDesktop||(0,_.isLandscapeOrientation)();"vertical"===e.orientation&&n?"left"===e.banner_align?o.paddingLeft=r:o.paddingRight=r:"top"===e.banner_location?o.paddingTop=i:o.paddingBottom=i}(0,w.deepEqual)(o,this.iframeStyle)||(this.iframeStyle=o,n({...r,style:o}))}componentWillUnmount(){this.state.bannerAdAutoUpdateIntervalId&&window.clearInterval(this.state.bannerAdAutoUpdateIntervalId)}logBannerAdShown(e){this.adEventStatCollector?.logBannerAdsShown(this.miniAppId,e)}logBannerAdUpdated(e){this.adEventStatCollector?.logBannerAdsUpdated(this.miniAppId,e)}logInterstitialAdShown(e){this.adEventStatCollector?.logInterstitialAdsShown(this.miniAppId,e)}constructor(e){super(e),this.iframeStyle={},this.savedInterstitialAds=[],this.savedInterstitialMulti=null,this.usedInterstitialSlots=[],this.selectedInterstitialAdsSlot=0,this.skippedInterstitialAdsReasons=[],this.savedRewardAds=[],this.skippedRewards=[],this.adsConfigPromise=null,this.selectedRewardAdsSlot=0,this.rewardAdsTimeRemained=!1,this.rewardAdsContainerRef=(0,a.createRef)(),this.updateManagers={banner:new b.UpdateManager,interstitial:new b.UpdateManager,interstitialCheck:new b.UpdateManager,reward:new b.UpdateManager,rewardCheck:new b.UpdateManager},this.lastShownIds={},this.getAdsController=()=>({loadBannerAd:()=>this.loadBannerAd(!1,b.UpdateManager.getDefaultEventParams()),handleBannerAd:(e,t)=>this.handleBannerAd(e,t,!1),hideBannerAd:this.hideBannerAd,getOpenedBannerAd:this.getOpenedBannerAd,preloadInterstitialAds:this.preloadInterstitialAds,preloadInterstitialMulti:this.preloadInterstitialMulti,preloadRewardAds:this.preloadRewardAds,showInterstitialAds:this.showInterstitialAds,showInterstitialMulti:this.showInterstitialMulti,hideInterstitialAds:this.hideInterstitialAds,handleInterstitialAdsClick:this.handleInterstitialAdsClick,showRewardAds:this.showRewardAds,getBannerAdAvailability:this.getBannerAdAvailability,...this.state}),this.isValidBannerResponse=e=>{const[t]=e;return!(!t?.banner||!t?.json||0===Object.keys(t.json).length)},this.loadBannerAd=async(e,t)=>{const i=await this.getCurrentAdsConfig();if(!i)return this.failIfNoAdsConfig(),null;0===i.banner.slot_ids.length&&this.failIfNoAdsConfig(),await this.loadFpidScript();const r=this.updateManagers.banner.getUpdateTs(),n=Date.now();if(!e){if(this.getOpenedBannerAd()||this.state.bannerAdAutoUpdateIntervalId)throw p.CommonErrorReasons.bannerAdAlreadyShown();if(r+this.getBannerAdLimitMs()>n)throw p.CommonErrorReasons.requestsLimitReached()}if(this.updateManagers.banner.getInProgress())throw p.CommonErrorReasons.requestsLimitReached();const o=i.banner.slot_ids,a=o.find((e=>!t.alreadyUsedSlots.includes(e))),s=async i=>{if(a&&t.alreadyUsedSlots.push(a),t.skippedReasons.push(i),o.length===t.alreadyUsedSlots.length)throw this.state.bannerAdAutoUpdateIntervalId?this.adEventStatCollector?.logBannerAdsUpdateNotFound(this.miniAppId,t):this.adEventStatCollector?.logBannerAdsNotFound(this.miniAppId,t),this.updateManagers.banner.saveUpdateTs(),this.updateManagers.banner.setAdsEvent(t),p.CommonErrorReasons.noAds();return this.loadBannerAd(e,t)};if(!a)return s(h.AdsSkippedReasons.NETWORK_NO_AD);this.failIfUserIsBanned(a),this.lastShownIds[a]||(this.lastShownIds[a]=[]);const l=this.lastShownIds[a],d=l.length?{[h.AdsQueryParams.LastShownIds]:l.join(",")}:void 0,c=this.getSearchParams(a,d),u=`${h.ADS_REQUEST_URL}?${c.toString()}`,m=new AbortController,f=m.signal;this.updateManagers.banner.setAbortController(m),this.updateManagers.banner.setInProgress(!0);const b=await fetch(u,{signal:f}).then((e=>e.json())).catch((e=>{if((0,y.errorLogger)("Failed to fetch banner"),"AbortError"===e.name)throw p.CommonErrorReasons.customError();throw p.CommonErrorReasons.noAds()})).finally((()=>{this.updateManagers.banner.setInProgress(!1)}));if(this.isValidBannerResponse(b)){const e=b[0].json;return t.selectedSlot=a,this.updateManagers.banner.saveUpdateTs(),this.updateManagers.banner.setAdsEvent(t),e.bannerID&&l.push(e.bannerID),l.length>h.MAX_LAST_SHOWN_IDS_LENGTH&&l.shift(),(0,v.convertBannerAdTypeToBannerAdParams)(e,this.handleBannerAdUserClose)}return s(h.AdsSkippedReasons.NETWORK_NO_AD)},this.getSearchParams=(e,t)=>{const i=new URLSearchParams;if(!this.adsConfig)return i;i.set(h.AdsQueryParams.SlotID,e.toString()),i.set(h.AdsQueryParams.SiteId,this.adsConfig.site_id.toString()),i.set(h.AdsQueryParams.Lang,this.adsConfig.lang),i.set(h.AdsQueryParams.VKUserId,this.adsConfig.user_id.toString()),i.set(h.AdsQueryParams.AppId,this.miniAppId.toString()),i.set(h.AdsQueryParams.Sign,this.adsConfig.sign),i.set(h.AdsQueryParams.Rnd,this.adsConfig.sign_timestamp.toString()),this.hostController.featureEnabled(f.FeatureEnabledKeys.AdsTestMode)&&i.set(h.AdsQueryParams.TestMode,"1");const r=this.getFpid();return r&&i.set(h.AdsQueryParams.Fpid,r),t&&Object.entries(t).forEach((([e,t])=>{i.set(e,t)})),i},this.handleBannerAd=(e,t,i)=>{let r;const n=this.getBannerAdAutoUpdateInterval();return!this.state.bannerAdAutoUpdateIntervalId&&n>0&&(r=window.setInterval((async()=>{if((0,w.isHiddenWindow)())return;const e=await this.loadBannerAd(!0,b.UpdateManager.getDefaultEventParams()).catch((e=>{if(e===p.CommonErrorReasons.noAds())return null;throw e})),i=this.updateManagers.banner.getAdsEventParams();if(e){const i=await this.handleBannerAd(e,t,!0);i&&this.context.handlers?.sendEventToMiniApp(m.EventsToMiniApp.BannerAdUpdated,{result:!0,...i,...t})}else this.adEventStatCollector?.logBannerAdsUpdateNotFound(this.miniAppId,i)}),n)),new Promise((n=>{r&&this.setState({bannerAdAutoUpdateIntervalId:r}),this.setState({bannerAd:e,bannerAdParams:t,onBannerAdShown:()=>{i?this.logBannerAdUpdated(this.updateManagers.banner.getAdsEventParams()):this.logBannerAdShown(this.updateManagers.banner.getAdsEventParams())},onBannerAdReady:e=>{this.setState({bannerAdDimensions:e}),n(e)}})}))},this.getBannerAdAutoUpdateInterval=()=>this.adsConfig?.banner.autoupdate_ms||0,this.getBannerAdLimitMs=()=>this.adsConfig?.banner.limit_ms||0,this.getRewardAdLimitMs=()=>this.adsConfig?.rewarded.limit_ms||0,this.getInterstitialAdLimitMs=()=>this.adsConfig?.interstitial.limit_ms||0,this.hideBannerAd=()=>{this.updateManagers.banner.getAbortController().abort();const e=this.getOpenedBannerAd();if(!e)return!1;this.state.bannerAdAutoUpdateIntervalId&&window.clearInterval(this.state.bannerAdAutoUpdateIntervalId);const t=this.updateManagers.banner.getAdsEventParams();return this.adEventStatCollector?.logBannerAdsHidden(this.miniAppId,t),this.setState({bannerAd:void 0,bannerAdParams:void 0,bannerAdDimensions:void 0,bannerAdAutoUpdateIntervalId:void 0}),e},this.handleBannerAdUserClose=()=>{const e=this.getOpenedBannerAd();if(!e||!this.context.handlers?.sendEventToMiniApp)return;this.context.handlers?.sendEventToMiniApp(m.EventsToMiniApp.BannerAdClosedByUser,{...e});const t=this.updateManagers.banner.getAdsEventParams();this.adEventStatCollector?.logBannerAdsHiddenByUser(this.miniAppId,t),this.setState({bannerAd:void 0,bannerAdParams:void 0,bannerAdDimensions:void 0})},this.handleBannerAdClick=()=>{const e=this.updateManagers.banner.getAdsEventParams();this.adEventStatCollector?.logBannerAdsClick(this.miniAppId,e)},this.handleBannerUpdateDimensions=e=>{this.setState({bannerAdDimensions:e})},this.getOpenedBannerAd=()=>{const{bannerAdParams:e,bannerAdDimensions:t}=this.state;return e&&t?{...t,...e}:null},this.checkInterstitialPreload=(e,t)=>e?(t||this.failIfInterOrRewardOpened(),0===e.interstitial.slot_ids.length&&this.failIfNoAdsConfig(),e):(this.failIfNoAdsConfig(),!1),this.preloadInterstitialAds=async({isRewardFallback:e,isWaterfallCall:t,isCheckAds:i})=>{const r=await this.getCurrentAdsConfig(),n=this.checkInterstitialPreload(r,i);if(!n)return!1;if(this.hostController.featureEnabled(f.FeatureEnabledKeys.InterstitialMulti)&&!t&&(this.usedInterstitialSlots=[],this.skippedInterstitialAdsReasons=[]),!e&&!t){const e=i?this.updateManagers.interstitialCheck:this.updateManagers.interstitial,t=e.getUpdateTs(),r=Date.now();if(t+this.getInterstitialAdLimitMs()>r)throw p.CommonErrorReasons.requestsLimitReached();e.saveUpdateTs()}await this.loadFpidScript();const o=n.interstitial.slot_ids,a=o.find((e=>!this.usedInterstitialSlots.includes(e)));if(this.savedInterstitialAds.length>0)return!0;const s=async t=>{if(a&&this.usedInterstitialSlots.push(a),this.skippedInterstitialAdsReasons.push(t),o.length===this.usedInterstitialSlots.length){const t={selectedSlot:0,type:e?h.NativeAdsFormat.REWARD:h.NativeAdsFormat.INTERSTITIAL,alreadyUsedSlots:[...this.usedInterstitialSlots],skippedReasons:[...this.skippedInterstitialAdsReasons],actualAdFormat:h.NativeAdsFormat.INTERSTITIAL};return e&&(t.alreadyUsedSlots=[...(0,v.extractSlots)(this.skippedRewards),...this.usedInterstitialSlots],t.skippedReasons=[...(0,v.extractReasons)(this.skippedRewards),...this.skippedInterstitialAdsReasons],this.skippedRewards=[]),this.adEventStatCollector?.logInterstitialAdsNotFound(this.miniAppId,t),this.usedInterstitialSlots=[],this.skippedInterstitialAdsReasons=[],!1}return this.preloadInterstitialAds({isCheckAds:i,isRewardFallback:e,isWaterfallCall:!0})};if(!a)return s(h.AdsSkippedReasons.NETWORK_NO_AD);if(a===h.USER_IS_BANNED_SLOT){if(e)return!1;this.failIfUserIsBanned(a)}try{const e=await this.loadInterstitial(a,!1);if(this.isValidBannerResponse(e)){const[t]=e;return this.savedInterstitialAds.push(t.json),this.selectedInterstitialAdsSlot=a,!0}return s(h.AdsSkippedReasons.NETWORK_NO_AD)}catch(e){return this.context.host?.onError?.(e),s(h.AdsSkippedReasons.NETWORK_ERROR)}},this.loadInterstitial=async(e,t)=>{const i=this.getSearchParams(e);t||((this.hostController.featureToggles.motionAdsExperimentGroupA||this.hostController.featureToggles.motionAdsExperimentGroupB)&&i.set(h.AdsQueryParams.ExperimentId,String(h.MOTION_ADS_EXPERIMENT_ID)),this.hostController.featureToggles.motionAdsExperimentGroupB&&i.set(h.AdsQueryParams.MotionAds,"1"));const r=`${h.ADS_REQUEST_URL}?${i.toString()}`,n=await fetch(r).then((e=>e.json()));return n},this.interstitialWaterfall=async e=>{let t={interstitialAd:null,selectedSlot:null,skipped:[]};for(const i of e.interstitial.slot_ids)try{const e=await this.loadInterstitial(i,!0);if(this.isValidBannerResponse(e)){const[r]=e;t={...t,interstitialAd:r.json,selectedSlot:i};break}t.skipped.push({slot:i,reason:h.AdsSkippedReasons.NETWORK_NO_AD})}catch(e){this.context.host?.onError?.(e),t.skipped.push({slot:i,reason:h.AdsSkippedReasons.NETWORK_ERROR});break}return t},this.preloadInterstitialMulti=async({isCheckAds:e})=>{const t=this.checkInterstitialPreload(this.adsConfig,e);if(!t||t.interstitial.slot_ids.includes(h.USER_IS_BANNED_SLOT))return!1;if(this.savedInterstitialMulti)return"multi";if(this.savedInterstitialAds.length>0)return"single";await this.loadFpidScript();const[i,r]=await Promise.all([this.interstitialWaterfall(t),this.interstitialWaterfall(t)]);if(i.interstitialAd&&r.interstitialAd)return this.savedInterstitialMulti=[{...i,skipped:[...this.skippedRewards,...i.skipped]},{...r,skipped:[...this.skippedRewards,...r.skipped]}],this.skippedRewards=[],"multi";let n=null,o=null;if(i.interstitialAd?n=i:o=i,r.interstitialAd?n=r:o=r,n){if(this.savedInterstitialAds.push(n.interstitialAd),this.skippedInterstitialAdsReasons=(0,v.extractReasons)(n.skipped),this.usedInterstitialSlots=(0,v.extractSlots)(n.skipped),this.selectedInterstitialAdsSlot=n.selectedSlot,o){const e={selectedSlot:0,type:h.NativeAdsFormat.REWARD,alreadyUsedSlots:[...(0,v.extractSlots)(this.skippedRewards),...(0,v.extractSlots)(o.skipped)],skippedReasons:[...(0,v.extractReasons)(this.skippedRewards),...(0,v.extractReasons)(o.skipped)],actualAdFormat:h.NativeAdsFormat.INTERSTITIAL};this.adEventStatCollector?.logInterstitialAdsNotFound(this.miniAppId,e)}return this.skippedRewards=[],"single"}for(const e of[i,r]){const t={selectedSlot:0,type:h.NativeAdsFormat.REWARD,alreadyUsedSlots:[...(0,v.extractSlots)(this.skippedRewards),...(0,v.extractSlots)(e.skipped)],skippedReasons:[...(0,v.extractReasons)(this.skippedRewards),...(0,v.extractReasons)(e.skipped)],actualAdFormat:h.NativeAdsFormat.INTERSTITIAL};this.adEventStatCollector?.logInterstitialAdsNotFound(this.miniAppId,t)}return this.skippedRewards=[],!1},this.preloadRewardAds=async({isCheckAds:e,isWaterfallCall:t,useWaterfall:i})=>{const r=await this.getCurrentAdsConfig();if(!r)return this.failIfNoAdsConfig(),!1;if(e||this.failIfInterOrRewardOpened(),0===r.rewarded.slot_ids.length&&this.failIfNoAdsConfig(),!t){this.skippedRewards=[];const t=e?this.updateManagers.rewardCheck:this.updateManagers.reward,i=t.getUpdateTs(),n=Date.now();if(i+this.getRewardAdLimitMs()>n)throw p.CommonErrorReasons.requestsLimitReached();t.saveUpdateTs(),this.failIfUserIsBanned((r.rewarded.slot_ids??[])[0])}return this.savedRewardAds.length>0||this.loadAdmanScript().then((()=>new Promise((t=>{if(!window.AdmanHTML)return void t(!1);const r=new l.AdmanHTMLContainer,n=this.adsConfig?.rewarded.slot_ids.filter((e=>!this.skippedRewards.find((t=>t.slot===e)))),o={type:h.NativeAdsFormat.REWARD,selectedSlot:0},a={[h.AdsQueryParams.VKUserId]:this.adsConfig?.user_id,[h.AdsQueryParams.AppId]:this.miniAppId,[h.AdsQueryParams.TypeLoad]:2,[h.AdsQueryParams.Rewarded]:1,[h.AdsQueryParams.Sign]:this.adsConfig?.sign,[h.AdsQueryParams.Rnd]:this.adsConfig?.sign_timestamp.toString()};this.hostController.featureEnabled(f.FeatureEnabledKeys.AdsTestMode)&&(a[h.AdsQueryParams.TestMode]=1);const s=new window.AdmanHTML,d=n[0];this.selectedRewardAdsSlot=d,s.init({slot:d,wrapper:r.getContent,videoEl:r.getVideoContainer,videoQuality:h.BASE_VIDEO_QUALITY,params:a,browser:h.browser,config:h.config});const c={},u=(e,t)=>{s[e](((...i)=>{t(...i),c[e]&&c[e](...i)})),s[e]=t=>{c[e]=t}},p=s.start;s.start=()=>{r.admanStart(s),p.apply(s,[])};const m=s.destroy;s.destroy=()=>{m.apply(s,[])};const b=r=>{if(s.destroy(),this.skippedRewards.push({slot:d,reason:r}),this.adsConfig?.rewarded.slot_ids.length!==this.skippedRewards.length)this.preloadRewardAds({useWaterfall:i,isCheckAds:e,isWaterfallCall:!0}).then(t);else{if(!i){const e={selectedSlot:this.selectedRewardAdsSlot,alreadyUsedSlots:[...(0,v.extractSlots)(this.skippedRewards)],skippedReasons:[...(0,v.extractReasons)(this.skippedRewards)]};this.adEventStatCollector?.logRewardAdsNotFound(this.miniAppId,e),this.skippedRewards=[]}t(!1)}};u("onError",(()=>{b(h.AdsSkippedReasons.NETWORK_ERROR)})),u("onReady",(()=>{s.getBannersForSection("preroll").some((e=>e.type&&"statistics"!==e.type))?(this.savedRewardAds.push({adman:s,admanContainer:r,stats:o,timestamp:Date.now()}),t(!0)):b(h.AdsSkippedReasons.NETWORK_NO_AD)})),u("onStarted",((e,t)=>{t?.hasVolume||r.hideMutedButton(),s.setVolume(0)})),u("onCompleted",(()=>{s.destroy()})),u("onPlayed",(()=>r.hideControls()))})))).catch((e=>(this.context.host?.onError?.(e),!1)))},this.loadAdmanScript=async()=>{if(!this.admanInitialized())return(0,g.loadScript)(h.ADMAN_SCRIPT_URL,h.ADMAN_SCRIPT_LOAD_TIMEOUT_MS).then((()=>new Promise(((e,t)=>{let i;const r=()=>{clearTimeout(i),this.admanInitialized()?e(!0):(this.context.host?.onError?.(new Error("Adman script could not be initialized")),t())};this.admanInitialized()?e(!0):i=window.setTimeout(r,h.ADMAN_SCRIPT_EXECUTE_TIMEOUT_MS)}))))},this.loadFpidScript=async()=>{if(!this.fpidInitialized())return(0,g.loadScript)(h.FPID_SCRIPT_URL,h.FPID_SCRIPT_LOAD_TIMEOUT_MS,{nonce:"",crossOrigin:"anonymous",async:!0}).catch((()=>{this.context.host?.onError?.(new Error("Failed to load fpid script"))}))},this.getFpidFromStorage=()=>{let e=null;const t=n.localStorage.getItem(h.FPID_STORAGE_KEY);if(t)try{e=JSON.parse(t).fpid}catch(e){(0,y.errorLogger)("Failed to get fpId from localStorage")}return e},this.getFpid=()=>window.rb_sync?.id||this.getFpidFromStorage(),this.admanInitialized=()=>!!window.AdmanHTML,this.fpidInitialized=()=>!!n.localStorage.getItem(h.FPID_STORAGE_KEY),this.showInterstitialAds=(e,t)=>{const i=this.savedInterstitialAds.shift();return i?new Promise((r=>{const n={type:e?h.NativeAdsFormat.REWARD:h.NativeAdsFormat.INTERSTITIAL,selectedSlot:this.selectedInterstitialAdsSlot,alreadyUsedSlots:[...this.usedInterstitialSlots],skippedReasons:[...this.skippedInterstitialAdsReasons],actualAdFormat:h.NativeAdsFormat.INTERSTITIAL};e&&(n.alreadyUsedSlots=[...(0,v.extractSlots)(this.skippedRewards),...this.usedInterstitialSlots],n.skippedReasons=[...(0,v.extractReasons)(this.skippedRewards),...this.skippedInterstitialAdsReasons]),this.setState({interstitialAd:{data:i,onImpression:()=>{this.logInterstitialAdShown(n)},onClick:()=>{this.handleInterstitialAdsClick(n)},onDestroy:()=>{this.sendViewRestore(),r(!0)},showMiniAppModal:t}}),this.sendViewHide(),this.adsConfig?.interstitial.callbacks?.onInterstitialAdsShown?.()})):Promise.resolve(!1)},this.showInterstitialMulti=e=>{if(!this.savedInterstitialMulti)return Promise.resolve(!1);const[t,i]=this.savedInterstitialMulti;return this.savedInterstitialMulti=null,new Promise((r=>{const n=t=>{const i={type:h.NativeAdsFormat.REWARD,selectedSlot:t.selectedSlot,alreadyUsedSlots:(0,v.extractSlots)(t.skipped),skippedReasons:(0,v.extractReasons)(t.skipped),actualAdFormat:h.NativeAdsFormat.INTERSTITIAL};return{data:t.interstitialAd,onImpression:()=>{this.logInterstitialAdShown(i)},onClick:()=>{this.handleInterstitialAdsClick(i)},onDestroy:()=>{this.sendViewRestore(),r(!0)},showMiniAppModal:e}};this.setState({interstitialMulti:[n(t),n(i)]}),this.sendViewHide(),this.adsConfig?.interstitial.callbacks?.onInterstitialAdsShown?.()}))},this.hideInterstitialAds=()=>{this.state.interstitialAd?.onDestroy(),this.state.interstitialMulti?.[0].onDestroy(),this.adsConfig?.interstitial.callbacks?.onInterstitialAdsHidden?.({selectedSlot:this.selectedInterstitialAdsSlot,alreadyUsedSlots:this.usedInterstitialSlots,skippedReasons:this.skippedInterstitialAdsReasons}),this.setState({interstitialAd:void 0,interstitialMulti:void 0})},this.handleInterstitialAdsClick=e=>{this.adEventStatCollector?.logInterstitialAdsClick(this.miniAppId,e)},this.showRewardAds=async()=>{const e=this.savedRewardAds.shift();if(!e)return!1;const t=e.adman;return this.setState({rewardAd:e},(()=>{const t=e.admanContainer.getPlayer;(0,v.nativeAdShouldBeSticky)(t)&&e.admanContainer.addStickyClass()})),new Promise((e=>{t.start("preroll"),this.sendViewHide(),this.adsConfig?.rewarded.callbacks?.onRewardAdsShown?.({selectedSlot:this.selectedRewardAdsSlot,alreadyUsedSlots:[...(0,v.extractSlots)(this.skippedRewards)],skippedReasons:[...(0,v.extractReasons)(this.skippedRewards)]}),t.onTimeRemained((()=>{this.rewardAdsTimeRemained=!0})),t.onCompleted((()=>{this.setState({rewardAd:void 0}),this.adsConfig?.rewarded.callbacks?.onRewardAdsFinished?.();const t={selectedSlot:this.selectedRewardAdsSlot,alreadyUsedSlots:[...(0,v.extractSlots)(this.skippedRewards)],skippedReasons:[...(0,v.extractReasons)(this.skippedRewards)]};this.rewardAdsTimeRemained?this.adEventStatCollector?.logRewardAdsHidden(this.miniAppId,t):this.adEventStatCollector?.logRewardAdsNotFound(this.miniAppId,t),this.sendViewRestore(),e(this.rewardAdsTimeRemained),this.rewardAdsTimeRemained=!1}));let i=!1;t.onClicked((()=>{if(!i){i=!0;const e={selectedSlot:this.selectedRewardAdsSlot,alreadyUsedSlots:[...(0,v.extractSlots)(this.skippedRewards)],skippedReasons:[...(0,v.extractReasons)(this.skippedRewards)]};this.adEventStatCollector?.logRewardAdsClick(this.miniAppId,e)}}))}))},this.getLeadAdsModalSupport=()=>Boolean(this.adsConfig?.interstitial.leadAdsModal),this.getBannerAdAvailability=()=>{const{position:e={},orientation:t={},heightType:i={},isAvailable:r,animated:n,verticalOverlay:o,verticalRight:a}=this.adsConfig?.banner.bannerAvailability||{};return{isAvailable:r??h.DefaultBannerAvailability.isAvailable,animated:n??h.DefaultBannerAvailability.animated,position:{...h.DefaultBannerAvailability.position,...e},heightType:{...h.DefaultBannerAvailability.heightType,...i},orientation:{...h.DefaultBannerAvailability.orientation,...t},verticalOverlay:o??h.DefaultBannerAvailability.verticalOverlay,verticalRight:a??h.DefaultBannerAvailability.verticalRight}},this.failIfUserIsBanned=e=>{if(e===h.USER_IS_BANNED_SLOT)throw p.CommonErrorReasons.userIsBanned()},this.failIfInterOrRewardOpened=()=>{if(this.state.rewardAd||this.state.interstitialAd||this.state.interstitialMulti){if(this.hostController.featureEnabled(f.FeatureEnabledKeys.RequestsLimitSentryFix))throw p.CommonErrorReasons.nativeAdAlreadyShown();throw p.CommonErrorReasons.requestsLimitReached()}},this.failIfNoAdsConfig=()=>{throw p.CommonErrorReasons.invalidAdConfig()},this.sendViewHide=()=>{this.hostController.featureEnabled(f.FeatureEnabledKeys.ViewChangeEvents)&&this.context.handlers?.sendEventToMiniApp(m.EventsToMiniApp.ViewHide,{})},this.sendViewRestore=()=>{this.hostController.featureEnabled(f.FeatureEnabledKeys.ViewChangeEvents)&&this.context.handlers?.sendEventToMiniApp(m.EventsToMiniApp.ViewRestore,{})},this.state={}}}x.contextType=S.HostServiceProviderContext;const P=e=>{const t=(0,o.useAdaptivityWithJSMediaQueries)();return(0,r.jsx)(x,{...e,isDesktop:t.isDesktop})}},255471:(e,t,i)=>{i.d(t,{AdsProviderContext:()=>o});var r=i(296540),n=i(478108);const o=(0,r.createContext)({loadBannerAd:async()=>null,getBannerAdAutoUpdateInterval:()=>0,handleBannerAd:async()=>({banner_width:0,banner_height:0}),hideBannerAd:()=>!1,getOpenedBannerAd:()=>null,handleBannerAdUserClose:()=>null,handleBannerAdClick:()=>null,preloadInterstitialAds:async()=>!0,preloadRewardAds:async()=>!0,showInterstitialAds:async()=>!0,hideInterstitialAds:()=>null,handleInterstitialAdsClick:()=>null,showRewardAds:async()=>!0,getBannerAdAvailability:()=>n.DefaultBannerAvailability})},806240:(e,t,i)=>{i.d(t,{HandlersProvider:()=>y});var r=i(474848),n=i(728554),o=i(296540),a=i(217570),s=i(365815),l=i(48265),d=i(62495),c=i(880204),u=i(611949),h=i(323723),p=i(69351),m=i(208109),f=i(42032),b=i(174852),v=i(172671),g=i(605365),_=i(313479);class y extends o.Component{render(){return(0,r.jsx)(g.HandlersProviderContext.Provider,{value:{},children:this.props.children})}componentDidMount(){this.context.registerHandlersController(this.getHandlersController),this.context.props?.onReady?.({sendMessageToMiniApp:this.sendMessageToMiniApp,sendEventToMiniApp:this.sendEventToMiniApp,lifecycle:this.context.lifecycle,getMessageHandler:e=>this.getMessageHandler({handler:e,params:{},type:m.BRIDGE_MESSAGE_TYPE})}),this.lifecycleHooks.onMount.add((()=>{const{getIframeRef:e}=this.hostController,{current:t}=e();if(!t)throw new Error("no iframe to create bridge");this.bridge=new m.default({iframe:t,handler:this.invoke}),this.initHostEventsHandlers(),this.initSessionManager()}),{once:!0})}initHostEventsHandlers(){const{onHostEventResize:e,onConfigChange:t,onHostEventMessage:i,onHostEventScroll:r,onHostEventHashChange:n,getMiniAppInfo:o}=this.hostController;o().config.viewportSize||e(this.triggerUpdateConfig),t(this.triggerUpdateConfig),i(this.handleHostMessage),r(this.handleScrollTop),n(this.handleHashChange)}componentWillUnmount(){(0,h.removeAppFromInitializedApps)(this.hostController.getMiniAppInfo().app.id),this.bridge?.destroy()}get sessionUuid(){return this.context.stats?.sessionUuid||""}get lifecycleHooks(){return this.context.lifecycle.hooks}async handle(e,t){try{const i=await e.handle(t.params);i&&(this.sendMessageToMiniApp({message:i,originMessage:t}),e.logBridgeEvent(i))}catch(e){return(0,f.errorLogger)("[Client Error]",e)}}get hostController(){if(!this.context.host)throw(0,f.errorLogger)("MiniApp is not initialized"),new Error("MiniApp is not initialized");return this.context.host}async requestApiMethod(e,t){const i={...t};if(!this.context.host)throw(0,f.errorLogger)("Mini-app controller is not initialized"),new Error("Mini-app controller is not initialized");const{apiVersion:r,app:n}=this.hostController.getMiniAppInfo(),o=await this.context.host.getHostToken();return this.context.host.requestApiMethod(e,{...i,v:r,app_id:n.id,access_token:o})}requestApiMethodAsMiniApp(e,t,i){if(!this.context.host)throw(0,f.errorLogger)("Mini-app controller is not initialized"),new Error("Mini-app controller is not initialized");const{app:r}=this.hostController.getMiniAppInfo();return this.context.host.requestApiMethod(e,{...t,api_id:r.id},i)}initSessionManager(){this.context.stats?.initSessionManager?.({requestApiMethod:this.requestApiMethod.bind(this)})}constructor(e){super(e),this.handlers=c.default,this.invoke=async e=>{const t=this.checkSupportStatus(e);if(t)return this.sendErrorToMiniApp(e,t);if(!(0,b.isStrictObject)(e.params))return void this.sendErrorToMiniApp(e,{error_code:s.ERROR_CODES.INVALID_PARAMS,error_reason:"Parameters should be passed as object"});this.lifecycleHooks.onBridgeMethod.fire({params:e,miniAppInfo:this.hostController.getMiniAppInfo()}),e.params.request_id||l.PRIVATE_EVENTS.includes(e.handler)||(0,f.warnLogger)("[Client Error]",e.handler,s.CommonErrorReasons.missingParam("request_id"));const i=this.getMessageHandler(e);if(i)if(this.hostController.featureEnabled(d.FeatureEnabledKeys.MiniAppsLogOverriddenHandlers))await this.handle(i,e);else{const t=i.handle(e.params);if(t)return t.then((t=>this.sendMessageToMiniApp({message:t,originMessage:e}))).catch((t=>{if(!t.data)return(0,f.errorLogger)("[Client Error]",t);this.sendMessageToMiniApp({message:t,originMessage:e})}))}else this.sendErrorToMiniApp(e,{error_code:s.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:s.CommonErrorReasons.unsupportedPlatform(e.handler)})},this.getOverrideHandlers=()=>this.context.props?.handlers??{},this.getOverrideHandler=e=>{const{[e]:t}=this.getOverrideHandlers();return t},this.triggerUpdateConfig=(0,n.debounce)((()=>{this.sendEventToMiniApp(l.EventsToMiniApp.UpdateConfig,this.hostController.getMiniAppConfig())}),50),this.handleHostMessage=e=>{e.data?.type===a.HOST_MESSAGE_TYPE&&((0,f.infoLogger)("received from host",e.data),this.invoke(e.data)?.catch(f.errorLogger))},this.handleScrollTop=()=>{const{app:e,config:t}=this.hostController.getMiniAppInfo(),{scrollTarget:i}=t;(0,p.hasAppInScrollSubscribers)(e.id)&&this.sendEventToMiniApp(l.EventsToMiniApp.ScrollTop,{scrollTop:i.scrollTop})},this.handleHashChange=e=>{const{hashState:t}=this.hostController.getMiniAppState(),[i,r]=t;try{const t=new URL(e.newURL).hash.replace("#","");if(t===i)return;r(t),this.sendEventToMiniApp(l.EventsToMiniApp.ChangeFragment,{location:decodeURIComponent(t)})}catch(e){return}},this.sendErrorToMiniApp=(e,t)=>{e.type===a.HOST_MESSAGE_TYPE||this.sendMessageToMiniApp({message:{type:`${e.handler}Failed`,data:{error_type:"client_error",error_data:t}},originMessage:e})},this.sendMessageToMiniApp=e=>{this.bridge?.sendMessage(e)},this.getInternalHandlerCheck=e=>{const{app:t}=this.hostController.getMiniAppInfo();if(!t?.internal&&l.INTERNAL_MINIAPP_EVENTS.includes(e.handler))return{error_code:s.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:s.CommonErrorReasons.unsupportedPlatform(e.handler)}},this.getDryRunHandlerCheck=e=>{const t=this.getOverrideHandler(e.handler);if((0,b.isDryRunOverrideHandler)(t?.supported)&&_.MiniAppEventsDryRunProhibited.some((t=>t===e.handler)))return{error_code:s.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:s.CommonErrorReasons.unsupportedPlatform(e.handler)}},this.getModalRequestedHandlerCheck=e=>{const t=this.getOverrideHandler(e.handler);if((l.MODAL_EVENTS.includes(e.handler)||t?.modalRequested)&&!this.context.props?.onModalRequest)return{error_code:s.ERROR_CODES.UNSUPPORTED_PLATFORM,error_reason:s.CommonErrorReasons.unsupportedPlatformNoModal(e.handler)}},this.getAnonymousHandlerCheck=e=>{if(this.hostController.isAnonymousLaunch&&l.ANONYMOUS_UNSUPPORTED_EVENTS.includes(e.handler))return{error_code:s.ERROR_CODES.ANONYMOUS_ACCESS_UNSUPPORTED,error_reason:s.CommonErrorReasons.anonymousAccessUnsupported(e.handler)}},this.getShowAdsHandlerCheck=e=>{if(this.hostController.appIsInFullscreen()&&l.SHOW_ADS_EVENTS.includes(e.handler))return{error_code:s.ERROR_CODES.CUSTOM,error_reason:s.CommonErrorReasons.appIsInFullscreen()}},this.checkSupportStatus=e=>this.getAnonymousHandlerCheck(e)||this.getInternalHandlerCheck(e)||this.getModalRequestedHandlerCheck(e)||this.getDryRunHandlerCheck(e)||this.getShowAdsHandlerCheck(e),this.getMessageHandler=e=>{let t,i;const r=this.getOverrideHandlers(),{ads:n,handlers:o}=this.context;return this.handlers.hasOwnProperty(e.handler)&&(t=new this.handlers[e.handler]({ads:n,handlers:o})),r.hasOwnProperty(e.handler)&&(i=new u.default({ads:n,handlers:o},e.handler,r[e.handler],t)),i?.setData(e.params),t?.setData(e.params),i||t},this.logBridgeEvent=({miniAppId:e,event:t,error:i,bridgeLog:r,callArguments:n})=>{const{current:o}=this.hostController.getIframeRef(),a=this.context.stats?.bridgeEventStatsCollector;if(o){const s={webviewUrl:o.src,miniAppId:e,event:t,error:i,bridgeLog:r,callArguments:n};a?a.logEvent({...s,sessionUuid:this.sessionUuid}):this.context.props?.logBridgeEvent?.(s)}},this.resizeWindow=(e,t)=>{this.context.props?.onResizeWindow?.(e,t)},this.logBridgeEventSuccess=e=>{const{app:{id:t}}=this.hostController.getMiniAppInfo();this.logBridgeEvent({miniAppId:t,event:{event_type:e,is_success:!0}})},this.logBridgeEventError=e=>{const{app:{id:t}}=this.hostController.getMiniAppInfo();this.logBridgeEvent({miniAppId:t,event:{event_type:e,is_success:!1},error:{error_type:"client_error",error_code:s.ERROR_CODES.CUSTOM}})},this.sendEventToMiniApp=(e,t)=>{try{this.sendMessageToMiniApp({message:{type:e,data:t}}),this.logBridgeEventSuccess(e)}catch(t){this.logBridgeEventError(e)}},this.setLocation=e=>{const{hashState:[,t]}=this.hostController.getMiniAppState();history.pushState(null,"",e?`#${e}`:""),t(e),this.sendEventToMiniApp(l.EventsToMiniApp.LocationChanged,{location:e})},this.getLang=(e,t)=>this.context.props?.getLang?this.context.props?.getLang(e,t):e,this.getHandlersController=()=>{if(!this.context.host)throw(0,f.errorLogger)("Mini-app controller is not initialized"),new Error("Mini-app controller is not initialized");return{...this.context.host,invoke:this.invoke,getOverrideHandlers:this.getOverrideHandlers,requestApiMethod:this.requestApiMethod.bind(this),requestApiMethodAsMiniApp:this.requestApiMethodAsMiniApp.bind(this),getMiniAppToken:this.context.props?.onGetMiniAppToken??n.noop,sendMessageToMiniApp:this.sendMessageToMiniApp,sendEventToMiniApp:this.sendEventToMiniApp,resizeWindow:this.context.props?.onResizeWindow??n.noop,modalRequest:this.context.props?.onModalRequest,logBridgeEvent:this.logBridgeEvent,setLocation:this.setLocation,getLang:this.getLang,trackMyTrackerEvent:this.context.stats?.trackMyTrackerEvent}}}}y.contextType=v.HostServiceProviderContext},605365:(e,t,i)=>{i.d(t,{HandlersProviderContext:()=>r});const r=(0,i(296540).createContext)({})},313479:(e,t,i)=>{i.d(t,{MiniAppEventsDryRunProhibited:()=>n});var r=i(48265);const n=[r.MiniAppEvents.Init,r.MiniAppEvents.SetSupportedHandlers,r.MiniAppEvents.ActionDone,r.MiniAppEvents.Alert,r.MiniAppEvents.AuthByExchangeToken,r.MiniAppEvents.CallApiMethod,r.MiniAppEvents.CheckAllowedScopes,r.MiniAppEvents.Close,r.MiniAppEvents.CreateHash,r.MiniAppEvents.GetAuthToken,r.MiniAppEvents.GetClientVersion,r.MiniAppEvents.GetConfig,r.MiniAppEvents.GetEmail,r.MiniAppEvents.GetGeodata,r.MiniAppEvents.GetGroupInfo,r.MiniAppEvents.GetLaunchParams,r.MiniAppEvents.GetPhoneNumber,r.MiniAppEvents.GetSilentToken,r.MiniAppEvents.GetUserInfo,r.MiniAppEvents.ResizeWindow,r.MiniAppEvents.Scroll,r.MiniAppEvents.ShowSlidesSheet,r.MiniAppEvents.StorageGet,r.MiniAppEvents.StorageGetKeys,r.MiniAppEvents.TrackEvent,r.MiniAppEvents.Translate]},390451:(e,t,i)=>{i.d(t,{useHostService:()=>g});var r=i(728554),n=i(940670),o=i(296540),a=i(217570),s=i(565151),l=i(365815),d=i(62495),c=i(292972),u=i(42032),h=i(369475),p=i(174852),m=i(572469),f=i(486373),b=i(916065),v=i(183955);const g=e=>{const t=(0,o.useRef)(null),[i,g]=(0,o.useState)(null),{hostSettingsState:_,hashState:y,exchangeHashState:w,logoutHashState:A,iframePropsState:S}=(0,v.useHostState)(e),{onHostEventHashChange:x,onHostEventMessage:P,onHostEventResize:E,onHostEventScroll:k}=(0,b.useHostEvents)({scrollTarget:e.config.scrollTarget}),{onConfigChange:M}=(0,f.useConfigUpdate)(e),[C,I]=_,[O]=y,[T,R]=w,[j,N]=A,[L,D]=S,B=()=>({...e,hash:O,logoutHash:j,exchangeHash:T,hostSettings:C}),V=()=>t,H=(0,o.useCallback)((async t=>{if(i&&!t)return i;{const i=await e.onGetHostToken(t);return g(i),i}}),[!!i]),z=(0,o.useCallback)(((t,i,r)=>{const n={...i};return Object.entries(n).forEach((([e,t])=>{void 0===t&&delete n[e]})),e.requestApiMethod?e.requestApiMethod(t,n,r):(0,h.invokeVKMethod)(e.apiUrl,t,n).then((e=>(0,h.isApiErrorResponse)(e)?Promise.reject(e.error):e))}),[]),U=(0,o.useCallback)((()=>H().then((t=>z("apps.getDevicePermissions",{access_token:t,device_id:e.host.id,app_id:e.app.id,v:5.128}))).then((({response:e})=>{I({...e})})).catch((()=>{(0,u.errorLogger)("Can't get host permissions")}))),[e.app.id]),F=(0,o.useCallback)(((t,i,r,n)=>{const{onCaptcha:o}=e;if(o){const{captcha_sid:e,captcha_img:t}=n.error;o({captcha_sid:e,captcha_img:t}).then((e=>{const t=Object.assign({},r,e);i(t)}))}else t.reject({type:"error",error:"onCaptcha function is missing"})}),[]),W=(0,o.useCallback)((()=>{const t={app_id:e.host.id,version:1};if(!e.app.internal)return Promise.reject();const i=new c.PendingTask,r=e.loginUrl,n={mode:"cors",credentials:"include"},o=e=>{const a=(0,p.makeParams)(e);fetch(`${r}/?act=web_token&${a}`,n).then((e=>e.json())).then((e=>{if(e.data.logout_hash)return N(e.data.logout_hash),void i.resolve(e);e.error?.error_code!==l.ERROR_CODES.CAPTCHA_ERROR?i.reject(e):F(i,o,t,e)})).catch((()=>(0,u.errorLogger)("Can't get logout hash")))};return o(t),i.get()}),[e.app.internal]),G=(0,o.useCallback)((()=>{const t={app_id:e.host.id};if(!e.app.internal)return Promise.reject();const i=new c.PendingTask,r=e.loginUrl,n={mode:"cors",credentials:"include"},o=e=>{const a=(0,p.makeParams)(e);fetch(`${r}/?act=connect_exchange_hash&${a}`,n).then((e=>e.json())).then((e=>{if("okay"===e.type)return R(e.data.hash),void i.resolve(e);e.error?.error_code!==l.ERROR_CODES.CAPTCHA_ERROR?i.reject(e):F(i,o,t,e)})).catch((()=>(0,u.errorLogger)("Can't get exchange hash")))};return o(t),i.get()}),[e.app.internal]),K=()=>{g(null)},Z=t=>{(0,u.infoLogger)("send to host",t.message),e.onMessage&&e.onMessage(t)},Y=(0,o.useCallback)(((t,i)=>H().then((r=>z("apps.setDevicePermissions",{name:t,value:i,access_token:r,device_id:e.host.id,app_id:e.app.id,v:e.apiVersion||5.128}))).then(U).catch((()=>{(0,u.errorLogger)("Can't set host permissions")}))),[e.app.id]),q=(0,o.useMemo)((()=>{if(!e.featureEnabled(d.FeatureEnabledKeys.AnonymousLaunch))return!1;const t=new URLSearchParams(e.app.url).get("vk_is_unauth");return!!Number(t)}),[e.app.url]),Q=(0,o.useCallback)((()=>H().then((t=>z("apps.install",{access_token:t,app_id:e.app.id,v:e.apiVersion}))).catch((()=>{throw(0,u.errorLogger)("Can't installed game"),new Error("MiniAppSDK: Cant installed game")}))),[e.app.id]),J=(0,o.useMemo)((()=>{const{app:t}=e;return void 0!==t.isInstalled&&!t.isInstalled&&!q}),[]),X=(0,o.useCallback)((()=>{if(!J)return;(0,m.getIdleCallback)()((()=>{Q().catch(u.errorLogger)}))}),[]),$=(0,o.useCallback)((()=>{const{__vkPayLegacyForceMobile:t,app:i}=e,r=Number(i.id)===s.AppIDs.vkpay,o={...i.query};r&&(o.is_mobile=t?"":"1");const a=r&&o.action?`https://web-view.vkpay.io/${o.action}`:i.url,l=new URL(a);return Object.keys(o).length>0&&(l.search=`${l.search?`${l.search}&`:"?"}${n.querystring.stringify(o)}`),l.hash=O,l.toString()}),[O]),ee=()=>{const{config:e,host:t,apiUrl:i,app:r}=B(),{isLayer:n,insets:o,scheme:s,appearance:l,adaptivity:d,integration:c,backButton:h,viewportSize:p}=e,{id:m,title:f}=t,b={insets:o,scheme:s,appearance:l,adaptivity:d,integration:c,app:f,app_id:m,vk_platform:a.VK_PLATFORM,back_button:h,api_host:new URL(i).host,viewport_width:p?.width??window.innerWidth,viewport_height:p?.height??window.innerHeight,avail_width:p?.width??window.innerWidth,avail_height:p?.height??window.innerHeight,is_layer:n};try{const e=new URLSearchParams(r.url).get("vk_platform");e&&Object.assign(b,{vk_platform:e})}catch(e){(0,u.errorLogger)(e)}return b},te=()=>({hostSettingsState:_,hashState:y,exchangeHashState:w,logoutHashState:A,iframePropsState:S}),ie=()=>{const e=document.fullscreenElement;return null!==e&&t.current===e};return(0,o.useEffect)((()=>{t.current&&e.setRef?.(t.current)}),[t.current]),(0,o.useEffect)((()=>{D({...L,...e.iframeProps}),e.featureToggles?.disableAuthByExchangeToken||(G().catch(u.errorLogger),W().catch(u.errorLogger)),U().catch(u.errorLogger),X()}),[]),(0,o.useMemo)((()=>({getIframeRef:V,getMiniAppState:te,onConfigChange:M,onHostEventHashChange:x,onHostEventMessage:P,onHostEventResize:E,onHostEventScroll:k,buildUrl:$,getHostToken:H,clearHostToken:K,getMiniAppConfig:ee,getMiniAppInfo:B,sendMessageToHost:Z,setHostPermissions:Y,requestApiMethod:z,onError:e.onError??r.noop,featureEnabled:e.featureEnabled,featureToggles:e.featureToggles||{},isAnonymousLaunch:q,appIsInFullscreen:ie})),[e,O,j,T,C,L])}},718818:(e,t,i)=>{i.d(t,{HostServiceProvider:()=>u});var r=i(474848),n=i(296540),o=i(543273),a=i(125764),s=i(390451),l=i(849674),d=i(19951),c=i(172671);const u=({props:e,children:t})=>{const{id:i}=e.app,u=(0,o.useMiniAppLifecycle)(i),h=(0,s.useHostService)(e),{getMiniAppInfo:p}=h,m=(0,d.useStatsProviderContext)(),f=h.getIframeRef(),b=(0,n.useRef)(null),v=(0,n.useRef)(null),g=(0,n.useMemo)((()=>({iframeRef:f,lifecycle:u,props:e,get ads(){return b.current?.()||null},get handlers(){return v.current?.()||null},host:h,stats:m,registerAdsController:e=>{b.current=e},registerHandlersController:e=>{v.current=e}})),[f.current,e,h]);return(0,n.useEffect)((()=>e.onExternalInit?.((()=>u.fire(a.LifecycleHooksKeys.onInit,p())))),[]),(0,r.jsx)(c.HostServiceProviderContext.Provider,{value:g,children:(0,r.jsx)(l.LifecycleHooksProvider,{...p(),iframe:f.current,lifecycle:u,children:t})})}},172671:(e,t,i)=>{i.d(t,{HostServiceProviderContext:()=>a,useHostServiceProviderContext:()=>s});var r=i(728554),n=i(296540),o=i(543273);const a=(0,n.createContext)({lifecycle:o.lifecycle,handlers:null,ads:null,stats:null,registerHandlersController:r.noop,registerAdsController:r.noop});function s(){return(0,n.useContext)(a)}},486373:(e,t,i)=>{i.d(t,{useConfigUpdate:()=>a});var r=i(296540),n=i(676058),o=i(174852);const a=e=>{const t=(0,r.useRef)(e.config),i=(0,n.useOnCallback)((()=>!(0,o.deepEqual)(e.config,t.current)),[e.config]);return(0,r.useEffect)((()=>{t.current=e.config}),[e.config]),{onConfigChange:i}}},916065:(e,t,i)=>{i.d(t,{useHostEvents:()=>o});var r=i(296540),n=i(338577);const o=({scrollTarget:e})=>{const t=(0,r.useRef)({hashchange:new n.Hook("window(hashchange)"),resize:new n.Hook("window(resize)"),message:new n.Hook(""),scroll:new n.Hook("window(scroll)")}),i=(0,r.useCallback)((e=>i=>t.current[e].add(i)),[]),o=(0,r.useCallback)((()=>{Object.keys(t.current).forEach((i=>{const r=i,n=t.current[r],o=n.fire;"scroll"===r&&e&&"HTML"!==e.tagName?e.removeEventListener(r,o):window.removeEventListener(r,o),n.clear()}))}),[]);return(0,r.useEffect)((()=>(Object.keys(t.current).forEach((i=>{const r=i,n=t.current[r].fire;"scroll"===r&&e&&"HTML"!==e.tagName?e.addEventListener(r,n):window.addEventListener(r,n)})),o)),[]),(0,r.useMemo)((()=>({onHostEventHashChange:i("hashchange"),onHostEventResize:i("resize"),onHostEventMessage:i("message"),onHostEventScroll:i("scroll")})),[])}},183955:(e,t,i)=>{i.d(t,{useHostState:()=>a});var r=i(296540),n=i(174852);const o={width:"100%",height:"100%",scrolling:"yes",frameBorder:"0"},a=e=>({hostSettingsState:(0,r.useState)({}),hashState:(0,r.useState)((0,n.getInitialHash)(e.app)),exchangeHashState:(0,r.useState)(""),logoutHashState:(0,r.useState)(""),iframePropsState:(0,r.useState)({...o,...e.iframeProps})})},367934:(e,t,i)=>{i.d(t,{LangProvider:()=>a,useLangProviderContext:()=>s});var r=i(474848),n=i(296540),o=i(295611);function a(e){const t={getLang:e.getLang};return(0,r.jsx)(o.LangProviderContext.Provider,{value:t,children:e.children})}function s(){return(0,n.useContext)(o.LangProviderContext)}},295611:(e,t,i)=>{i.d(t,{LangProviderContext:()=>r});const r=(0,i(296540).createContext)({getLang:()=>""})},849674:(e,t,i)=>{i.d(t,{LifecycleHooksProvider:()=>u});var r=i(474848),n=i(296540),o=i(48265),a=i(944740),s=i(125764),l=i(451143),d=i(892881),c=i(681194);const u=({children:e,iframe:t,lifecycle:i,...u})=>{const{onBridgeMethod:h,onInit:p,onDestroy:m}=i.hooks;return(0,n.useEffect)((()=>{i.fire(s.LifecycleHooksKeys.onBeforeMount,u);const e=new d.PageActiveStateShared,t=()=>{e.destroy(),i.fire(s.LifecycleHooksKeys.onDestroy,u)};e.eventHooks[c.PageLeaveEventNames.BEFORE_LEAVE].add(t);const r=h.add((({params:{handler:e}})=>{e===o.MiniAppEvents.Init&&(i.fire(s.LifecycleHooksKeys.onInit,u),r())}));return t}),[]),(0,n.useEffect)((()=>{if(t){i.fire(s.LifecycleHooksKeys.onMount,{...u,iframe:t});const e=()=>{i.fire(s.LifecycleHooksKeys.onInit,u),t.removeEventListener("load",e)};u.app.isWithoutInitApp&&t.addEventListener("load",e);const r=setTimeout((()=>{i.fire(s.LifecycleHooksKeys.onIframeTimeoutError,u),t.removeEventListener("load",e)}),a.IFRAME_LOADING_TIMEOUT),n=()=>{window.clearTimeout(r),t.removeEventListener("load",e)};p.add(n,{once:!0}),m.add(n,{once:!0})}}),[t]),(0,r.jsx)(l.LifecycleHooksProviderContext.Provider,{value:i,children:e})}},451143:(e,t,i)=>{i.d(t,{LifecycleHooksProviderContext:()=>o});var r=i(296540),n=i(543273);const o=(0,r.createContext)(n.lifecycle)},439186:(e,t,i)=>{i.d(t,{StatsProvider:()=>b});var r=i(474848),n=i(296540),o=i(62495),a=i(896774),s=i(19951),l=i(474407),d=i(981756),c=i(926520),u=i(313405),h=i(60275),p=i(408550),m=i(907608),f=i(247738);const b=({children:e,sendStatEvent:t,forceSendStatEvent:i,bridgeMethodsToLogCallArguments:b,featureToggles:v,sessionUuidFromProps:g,app:{id:_,url:y,myTrackerTimeSpentCounterId:w},performanceFromProps:A,onExternalSessionStart:S,featureEnabled:x,launchEventParams:P,userId:E})=>{const k=x?.(o.FeatureEnabledKeys.MiniAppsSDKMyTracker),M=Boolean(w),C=(0,n.useMemo)((()=>g||(0,l.default)()),[]),I=(0,n.useMemo)((()=>t&&new d.BridgeEventStatsCollector(t,b)),[]),O=(0,n.useMemo)((()=>t&&new c.AdEventStatCollector(t)),[]),T=(0,n.useMemo)((()=>t&&new u.NavigationMiniAppStatCollector(t)),[]),R=(0,n.useMemo)((()=>(t||i)&&new h.SessionEventStatCollector(t,i)),[]),j=(0,n.useMemo)((()=>{if(!v?.enableCollectPerformance||!t)return;const e={miniAppPerformanceCollector:new m.MiniAppPerformanceCollector(t),sessionUuid:C,appId:_,webviewUrl:y,performanceFromProps:A};return new p.PerformanceStatsService(e)}),[]),N=(0,n.useMemo)((()=>{if(k||M)return new a.MyTrackerService({id:_,url:y,isEnabledMyTrackerTrackEvents:k})}),[]);return(0,n.useEffect)((()=>{if(x?.(o.FeatureEnabledKeys.SendLaunchEvent)){const e={sessionUuid:C,appId:_,webviewUrl:y,...P};T?.logEvent(e)}}),[]),(0,r.jsx)(s.StatsProviderContext.Provider,{value:{bridgeEventStatsCollector:I,adEventStatCollector:O,initSessionManager:({requestApiMethod:e})=>{if(!R||!v?.enableSessionManager)return;const t=x?.(o.FeatureEnabledKeys.PerfomanceStatsInGames),i={requestApiMethod:e,sessionEventStatCollector:R,disableVisitorTrackerService:v?.disableVisitorTrackerService,onExternalSessionStart:S,isExternalInitAvailable:t,appId:_,sessionUuid:C,appUrl:y,onMyTrackerTrackTimeSpentEvent:e=>{w&&N?.trackTimeSpentEvent({activityId:w,eventType:e,userId:E})}};f.SessionsManager.create(i)},sessionUuid:C,performanceStatsService:j,trackMyTrackerEvent:(()=>{if(k)return N?.trackEvent})()},children:e})}},19951:(e,t,i)=>{i.d(t,{StatsProviderContext:()=>n,useStatsProviderContext:()=>o});var r=i(296540);const n=(0,r.createContext)({sessionUuid:""});function o(){return(0,r.useContext)(n)}},789662:(e,t,i)=>{i.d(t,{IdleManager:()=>d});var r=i(728554),n=i(151289),o=i(338577),a=i(486870),s=i(60822);const l=(0,n.isIphone)()||(0,n.isIpad)()||(0,n.isIpod)();class d{stop(){this.started=!1,u(this.opts.element,this.opts.triggerEvents,this.cbActive),(0,n.isMobileBrowser)()&&this._isTopLevel()&&u(document,["visibilitychange"],this.onVisiblityChange),(0,n.isMobileBrowser)()&&l||(u(this.opts.focusElement,["focus"],this.cbActive),u(this.opts.focusElement,["blur"],this.cbInactive)),clearTimeout(this.setIdleTo),clearTimeout(this.checkIdleCbTo),clearTimeout(this.sendCbTO),this.is_idle=!0}idle(e){this.is_idle=!0,e||this.opts.onIdleCb(),this.eventHooks[s.IdleEvents.IDLE].fire()}unidle(e){this.is_idle=!1,e||this.opts.onUnIdleCb(),this.eventHooks[s.IdleEvents.UNIDLE].fire()}start(){this.started=!0,this.is_idle=!this._isFocused(),(0,n.isMobileBrowser)()&&this._isTopLevel()&&c(document,["visibilitychange"],this.onVisiblityChange),(0,n.isMobileBrowser)()&&l||(c(this.opts.focusElement,["focus"],this.cbActive),c(this.opts.focusElement,["blur"],this.cbInactive)),clearTimeout(this.checkIdleCbTo),this.checkIdleCb(),this.checkIdleCbTo=setTimeout(this.checkIdleCb,this.opts.idleTimeout)}constructor(e){this.started=!1,this.is_idle=!0,this.eventHooks={[s.IdleEvents.IDLE]:new o.Hook(s.IdleEvents.IDLE),[s.IdleEvents.UNIDLE]:new o.Hook(s.IdleEvents.UNIDLE)},this.activeTimeStart=null,this.checkIdleCb=()=>{this.started&&(c(this.opts.element,this.opts.triggerEvents,this.cbActive),clearTimeout(this.setIdleTo),this.setIdleTo=setTimeout(this.cbInactive,this.opts.idleTimeout))},this.cbActive=()=>{this.started&&(this.activeTimeStart=(new Date).getTime(),clearTimeout(this.setIdleTo),this.is_idle&&(this.is_idle=!1,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout((()=>{this.eventHooks[s.IdleEvents.UNIDLE].fire(),this.opts.onUnIdleCb&&this.opts.onUnIdleCb()}),100)),u(this.opts.element,this.opts.triggerEvents,this.cbActive),clearTimeout(this.checkIdleCbTo),this.checkIdleCbTo=setTimeout(this.checkIdleCb,this.opts.idleTimeout))},this.cbInactive=()=>{this.started&&(a.screenWakeLocker.isLocked()||(this.activeTimeStart=null,this.is_idle||(this.is_idle=!0,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout((()=>{this.eventHooks[s.IdleEvents.IDLE].fire(),this.opts.onIdleCb&&this.opts.onIdleCb()}),100)),clearTimeout(this.checkIdleCbTo),u(this.opts.element,this.opts.triggerEvents,this.cbActive),c(this.opts.element,this.opts.triggerEvents,this.cbActive),this.checkIdleCbTo=setTimeout(this.checkIdleCb,this.opts.idleTimeout)))},this.getActiveTime=()=>!this.is_idle&&this.activeTimeStart?(new Date).getTime()-this.activeTimeStart:0,this.onVisiblityChange=()=>{"visible"===document.visibilityState?this.cbActive():this.cbInactive()},this._isTopLevel=()=>{const{focusElement:e}=this.opts;return e===window||e===document},this._isFocused=()=>{const{focusElement:e}=this.opts;return this._isTopLevel()?"string"==typeof document.visibilityState&&"visible"===document.visibilityState:document.activeElement===e},this.opts={triggerEvents:["mousemove","keydown"],onIdleCb:r.noop,onUnIdleCb:r.noop,focusElement:e.element,idleTimeout:3e4,...e}}}function c(e,t,i){t.forEach((t=>{e.addEventListener(t,i,{passive:(0,n.isMobileBrowser)()})}))}function u(e,t,i){t.forEach((t=>{e.removeEventListener(t,i)}))}},60822:(e,t,i)=>{var r,n;i.d(t,{IdleEvents:()=>r}),(n=r||(r={})).IDLE="idle",n.UNIDLE="unidle"},896774:(e,t,i)=>{i.d(t,{MyTrackerService:()=>d});var r=i(127294),n=i(543273),o=i(42032),a=i(326426),s=i(892881),l=i(681194);class d{async waitForReady(){await new Promise((e=>{this.pushEvent({type:"onready",callback:e})}))}transformMiniAppInfoToEventParams({id:e,url:t}){const[,i]=t.split("?");return{miniAppId:e,platformUserId:new URLSearchParams(i).get("vk_user_id")||"",queryParams:i}}trackTimeSpentEvent({userId:e,activityId:t,eventType:i}){this.pushEvent({id:a.MY_TRACKER_COUNTER_ID,type:i,activity:t,userid:e,canUseInBackground:!0})}constructor({id:e,url:t,isEnabledMyTrackerTrackEvents:c}){this.initSubscribes=(e,t)=>{if(t){const{onDestroy:t,onMount:i}=(0,n.getMiniAppLifecycle)(e).hooks;this.pageActivity=new s.PageActiveStateShared,this.unsubscribePageActivity=this.pageActivity.eventHooks[l.PageLeaveEventNames.BEFORE_LEAVE].add(this.trackMiniAppClose),i.add(this.trackMiniAppOpen,{once:!0}),t.add((()=>{this.trackMiniAppClose(),this.destroy()}),{once:!0})}},this.trackEvent=async(e,t)=>{if(!d.initialized)try{await(0,r.loadScript)(a.MY_TRACKER_INTEGRATION_SCRIPT,a.MY_TRACKER_INTEGRATION_SCRIPT_LOADING_TIMEOUT,{async:!0,crossOrigin:"anonymous"}),await this.waitForReady(),d.initialized=!0}catch{(0,o.errorLogger)("Failed to load MyTracker script")}this.pushEvent({id:a.MY_TRACKER_COUNTER_ID,type:"miniAppEvent",params:{...this.miniAppEventParams,...t,eventType:e}})},this.pushEvent=e=>{window._tmr.push(e)},this.trackMiniAppOpen=async()=>{await this.trackEvent(a.MyTrackerMiniAppEvents.OPEN)},this.trackMiniAppClose=async()=>{await this.trackEvent(a.MyTrackerMiniAppEvents.CLOSE)},this.destroy=()=>{this.pageActivity?.destroy(),this.unsubscribePageActivity?.()},i._dG("_tmr",window._tmr||[]),this.miniAppEventParams=this.transformMiniAppInfoToEventParams({id:e,url:t}),this.initSubscribes(e,c)}}d.initialized=!1},326426:(e,t,i)=>{i.d(t,{MY_TRACKER_COUNTER_ID:()=>o,MY_TRACKER_INTEGRATION_SCRIPT:()=>r,MY_TRACKER_INTEGRATION_SCRIPT_LOADING_TIMEOUT:()=>n,MyTrackerMiniAppEvents:()=>a,MyTrackerTimeSpentEvents:()=>s});const r="https://top-fwz1.mail.ru/js/code.js",n=3e3,o=2579437,a={OPEN:"open",CLOSE:"close",CUSTOM:"custom"},s={StartTimeSpent:"startTimespent",StopTimeSpent:"stopTimespent"}},408550:(e,t,i)=>{i.d(t,{PerformanceStatsService:()=>s});var r=i(944740),n=i(543273),o=i(606783),a=i(42535);class s{createPerformanceEventData(e,t){const i=t?t.toString():Date.now().toString(10);return{[e]:i}}storePerformanceEvent(e,t,i,n){const o=t===r.MiniAppPerformanceSteps.Start,a=t===r.MiniAppPerformanceSteps.End,s={app_id:e,session_uuid:this.sessionUuid};this.performanceFromProps.hasOwnProperty("isDirectLink")&&(s.is_direct_link=this.performanceFromProps.isDirectLink),o&&(s.webview_url=i||"",s.is_fallback_start=!n);const l={...this.createPerformanceEventData(t,n),...s},d=this.performanceStorage;return o?d.writeStartPerformance(this.storageKey,l):d.writePerformance(this.storageKey,l),a}sendPerformanceEvent(e,t){const i=this.performanceStorage,n=t||this.storageKey,o=i.getPerformance(n),{app_id:s,webview_url:l,error_code:d,sent:c}=o;if(c||this.isCollisionSending(o))return void i.clearPerformance(n,c);const u={...o,app_id:s||e,webview_url:l||"",is_success:void 0===d};if(u.is_success&&!(0,a.isAllDataCollected)(u)){const{attempts:s}=o;if(!(void 0!==s&&s>0))return i.writePerformance(n,{attempts:1}),void setTimeout((()=>{this.sendPerformanceEvent(e,t)}),r.PERFORMANCE_EMIT_TIMEOUT);{const{errorCode:e,errorDescription:t}=(0,a.handlePerformanceStatsError)(u);u.error_code=e,u.error_description=t,u.is_success=!1}}this.miniAppPerformanceCollector.logEvent({event:u,callback:()=>{this.performanceStorage.clearPerformance(n)}})}sendErrorPerformanceEvent(e,t){const i=this.performanceStorage,{errorCode:r,errorDescription:n}=t,o={error_code:r,error_description:n};i.writePerformance(this.storageKey,o),this.sendPerformanceEvent(e)}sendPerformanceStatsError(e,t=r.MiniAppPerformanceErrors.Unknown,i){const n={errorCode:t,errorDescription:i};this.sendErrorPerformanceEvent(e,n)}checkUnfinishedPerformanceTasks(){this.performanceStorage.isStorageEmpty()||this.finishPerformanceTasks()}isCollisionSending(e){const{attempts:t=0}=e;return t>0&&1===Object.keys(e).length}onAppClose(e){const t=this.performanceStorage.getPerformance(this.storageKey),i={...t,app_id:e},n=0===Object.keys(t).length;(0,a.isAllDataCollected)(i)&&!i.sent?this.sendPerformanceEvent(e):n||this.sendPerformanceStatsError(e,r.MiniAppPerformanceErrors.UserCanceled,r.MiniAppPerformanceErrorsDescription.EarlyClosing)}finishPerformanceTasks(){const e=this.performanceStorage,t=e.getStorage();Object.keys(t).forEach((t=>{const i=e.getPerformance(t),{sent:n,start_time:o,app_id:a}=i,s=Number(o||0),l=Date.now()>s+r.PERFORMANCE_DELAY_TO_OLD,d=Date.now()<s+r.PERFORMANCE_DELAY_TO_YOUNG;n||l?e.clearPerformance(t,!0):!d&&a&&this.sendPerformanceEvent(a,t)}))}collectPerformanceFrame(e){if(this.collectPerformanceStats({appId:this.appId,step:r.MiniAppPerformanceSteps.WebviewStartLoad}),e){const t=()=>{this.collectPerformanceStats({appId:this.appId,step:r.MiniAppPerformanceSteps.WebviewEndLoad}),e.removeEventListener("load",t)};e.addEventListener("load",t)}}constructor({miniAppPerformanceCollector:e,sessionUuid:t,appId:i,webviewUrl:a,performanceFromProps:s}){this.collectPerformanceStats=({appId:e,step:t,webviewUrl:i,externalTime:n})=>{try{this.storePerformanceEvent(e,t,i,n)&&this.sendPerformanceEvent(e)}catch(t){this.sendPerformanceStatsError(e,r.MiniAppPerformanceErrors.Unknown,t)}},this.collectPerformanceStart=()=>{this.checkUnfinishedPerformanceTasks();const{startTime:e,actResultTime:t}=this.performanceFromProps;this.collectPerformanceStats({appId:this.appId,step:r.MiniAppPerformanceSteps.Start,webviewUrl:this.webviewUrl,externalTime:e}),t&&this.collectPerformanceStats({appId:this.appId,step:r.MiniAppPerformanceSteps.ActResult,externalTime:t}),this.collectPerformanceStats({appId:this.appId,step:r.MiniAppPerformanceSteps.ScreenOpen})},this.collectPerformanceAfterInit=()=>{this.collectPerformanceStats({appId:this.appId,step:r.MiniAppPerformanceSteps.AppInit}),this.collectPerformanceStats({appId:this.appId,step:r.MiniAppPerformanceSteps.End})},this.collectPerformanceOnFrameError=()=>{this.sendPerformanceStatsError(this.appId,r.MiniAppPerformanceErrors.Network,r.MiniAppPerformanceErrorsDescription.IframeNotLoad)},this.collectPerformanceOnDestroy=()=>{this.onAppClose(this.appId),this.removeOnDestroy(),window.removeEventListener("beforeunload",this.collectPerformanceOnDestroy)},this.performanceStorage=new o.PerformanceStorage,this.miniAppPerformanceCollector=e,this.sessionUuid=t,this.appId=i,this.webviewUrl=a,this.performanceFromProps=s??{},this.storageKey=`${i}_${t}`;const{onBeforeMount:l,onMount:d,onInit:c,onDestroy:u,onIframeTimeoutError:h}=(0,n.getMiniAppLifecycle)(this.appId).hooks;l.add((()=>this.collectPerformanceStart()),{once:!0}),d.add((({iframe:e})=>this.collectPerformanceFrame(e)),{once:!0}),c.add(this.collectPerformanceAfterInit,{once:!0}),h.add(this.collectPerformanceOnFrameError,{once:!0}),this.removeOnDestroy=u.add(this.collectPerformanceOnDestroy,{once:!0}),window.addEventListener("beforeunload",this.collectPerformanceOnDestroy)}}},606783:(e,t,i)=>{i.d(t,{PerformanceStorage:()=>o});var r=i(41050),n=i(944740);class o{getStorage(){const e=r.localStorage.getItem(n.MINI_APP_PERFORMANCE_STORAGE_KEY);if(!e)return{};return JSON.parse(e)||{}}setStorage(e){r.localStorage.setItem(n.MINI_APP_PERFORMANCE_STORAGE_KEY,JSON.stringify(e))}isStorageEmpty(){const e=this.getStorage();return 0===Object.keys(e).length}getPerformance(e){return this.getStorage()[e]||{}}clearPerformance(e,t=!1){const i=this.getStorage();t?delete i[e]:i[e]={sent:!0},this.setStorage(i)}writePerformance(e,t){const i={...this.getStorage(),[e]:{...this.getPerformance(e),...t}};this.setStorage(i)}writeStartPerformance(e,t){const i={...this.getStorage(),[e]:{...t}};this.setStorage(i)}}},42535:(e,t,i)=>{i.d(t,{handlePerformanceStatsError:()=>o,isAllDataCollected:()=>n});var r=i(944740);const n=e=>r.MiniAppPerformanceRequiredSteps.every((t=>e[t])),o=e=>{const t=(i=e,r.MiniAppPerformanceRequiredSteps.reduce(((e,t)=>(i[t]||e.push(t),e)),[]));var i;const n={errorCode:r.MiniAppPerformanceErrors.Unknown};if(t.length>2)n.errorCode=r.MiniAppPerformanceErrors.Unknown,n.errorDescription=r.MiniAppPerformanceErrorsDescription.StorageTroubles;else switch(t[0]){case r.MiniAppPerformanceSteps.WebviewEndLoad:n.errorCode=r.MiniAppPerformanceErrors.Network,n.errorDescription=r.MiniAppPerformanceErrorsDescription.IframeNotLoad;break;case r.MiniAppPerformanceSteps.AppInit:case r.MiniAppPerformanceSteps.End:n.errorCode=r.MiniAppPerformanceErrors.UserCanceled,n.errorDescription=r.MiniAppPerformanceErrorsDescription.NotAppInit;break;default:n.errorCode=r.MiniAppPerformanceErrors.Unknown,n.errorDescription=r.MiniAppPerformanceErrorsDescription.StorageTroubles}return n}},547152:(e,t,i)=>{i.d(t,{ScreenWakeLocker:()=>r});class r{_onVisibilityChange(){this.wakeLockSentinel&&"visible"===document.visibilityState&&this.lock().catch(console.error)}requestWakeLock(){return navigator.wakeLock?this.wakeLockSentinel?Promise.resolve():navigator.wakeLock.request("screen").then((e=>{this.wakeLockSentinel=e})):Promise.reject()}isLocked(){return!!this.wakeLockSentinel&&!this.wakeLockSentinel.released}lock(){return this.requestWakeLock().then((()=>{this.wakeLockSentinel&&document.addEventListener("visibilitychange",this.onVisibilityChange)}))}unlock(){return this.wakeLockSentinel?(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.wakeLockSentinel.release().finally((()=>{this.wakeLockSentinel=null}))):Promise.resolve()}constructor(){this.onVisibilityChange=this._onVisibilityChange.bind(this)}}},486870:(e,t,i)=>{i.d(t,{screenWakeLocker:()=>r});const r=new(i(547152).ScreenWakeLocker)},382543:(e,t,i)=>{i.d(t,{AppSessionsStorageLocal:()=>o});var r=i(41050),n=i(559189);class o{load(){let e;try{e=JSON.parse(r.localStorage.getItem(n.STORAGE_KEY)||"{}")}catch(t){e={}}return e}remove(e){const t=this.load();delete t[e],r.localStorage.setItem(n.STORAGE_KEY,JSON.stringify(t))}save(e){const t=this.load();t[e.sessionUuid]=e,r.localStorage.setItem(n.STORAGE_KEY,JSON.stringify(t))}loadPart(){let e;try{e=JSON.parse(r.localStorage.getItem(n.STORAGE_KEY_PART)||"{}")}catch(t){e={}}return e}removePart(e,t){const i=this.loadPart();delete i[this.buildPartKey(e,t)],r.localStorage.setItem(n.STORAGE_KEY_PART,JSON.stringify(i))}savePart(e){const t=this.loadPart();t[this.buildPartKey(e.sessionUuid,e.partId)]=e,r.localStorage.setItem(n.STORAGE_KEY_PART,JSON.stringify(t))}buildPartKey(e,t){return`${e}_${t}`}}},247738:(e,t,i)=>{i.d(t,{SessionsManager:()=>b});var r=i(559189),n=i(151289),o=i(338577),a=i(543273),s=i(42032),l=i(326426),d=i(382543),c=i(939094),u=i(976981),h=i(290128),p=i(805312),m=i(681194),f=i(892881);class b{init(){this.submitStoredEndedSessions(),this.submitStoredSessionParts(),this.removeOnInit=this.onInit.add(this.initSession,{once:!0}),this.isExternalInitAvailable||this.onExternalSessionStart?.(this.initSession),this.onDestroy.add(this.stopSession)}submitStoredEndedSessions(){const e=this.loadSessions();Object.entries(e).forEach((([e,t])=>this.sessions.set(e,t)));for(const e of this.sessions.values())if(e.duration||(new Date).valueOf()-e.lastActivity>r.SESSION_TIMEOUT_DELAY){const t=e.duration||(0,p.calculateDurationInSeconds)(e.start,e.lastActivity),i={...e,duration:t};this.submitSession(i)}}submitStoredSessionParts(){const e=this.loadSessionParts();Object.entries(e).forEach((([,e])=>{if(e.duration&&e.end)this.submitSessionPart(e);else if(e.lastActivity&&(new Date).valueOf()-e.lastActivity>r.SESSION_PART_TIMEOUT_DELAY){const t=(0,p.calculateDurationInSeconds)(e.start,e.lastActivity),i={...e,duration:t,end:e.lastActivity};this.submitSessionPart(i)}}))}startSession(e,t){const i={focusElement:document,pageActiveState:this.pageActiveState};this.partTracker=new c.SessionPartTracker(e,t,i,this.eventHooks),this.activeSessionService=new u.SessionTrackerService(e,t,this.partTracker,this.eventHooks),this.disableVisitorTrackerService||(this.visitorTrackerService=new h.VisitorTrackerService({appId:e,sessionUuid:t,requestApiMethod:this.requestApiMethod,eventHooks:this.eventHooks})),this.visitorTrackerService&&this.visitorTrackerService.start(),this.eventHooks[r.SessionTrackerEvents.SessionPartEnd].add(this.onSessionPartEnd),this.eventHooks[r.SessionTrackerEvents.SessionGoing].add(this.onSessionGoing),this.eventHooks[r.SessionTrackerEvents.SessionPartStart].add(this.onSessionPartStart),this.sessions.has(t)?this.activeSessionService.continue(this.sessions.get(t)):this.activeSessionService.start()}destroy(){if(!this.activeSessionService)return;this.eventHooks[r.SessionTrackerEvents.SessionPartEnd].remove(this.onSessionPartEnd),this.eventHooks[r.SessionTrackerEvents.SessionGoing].remove(this.onSessionGoing),this.eventHooks[r.SessionTrackerEvents.SessionPartStart].remove(this.onSessionPartStart);const[e,t]=this.activeSessionService.destroy();if(this.visitorTrackerService&&this.visitorTrackerService.destroy(),t&&e){const i=e.duration||(0,p.calculateDurationInSeconds)(e.start,e.lastActivity);this.submitSessionPartAndSessionEnd({...e,duration:i},t)}else if(t&&this.submitSessionPart(t),e){const t=e.duration||(0,p.calculateDurationInSeconds)(e.start,e.lastActivity);this.submitSession({...e,duration:t})}}saveSession(e){return this.sessionsStorage.save(e)}saveSessionPart(e){return this.sessionsStorage.savePart(e)}submitSession(e){e.duration>0&&this.sessionEventStatCollector.logEvent({session:e,appUrl:this.appUrl}),this.sessionsStorage.remove(e.sessionUuid),this.sessions.delete(e.sessionUuid)}submitSessionPart(e){this.sessionEventStatCollector.logEvent({sessionPart:e,appUrl:this.appUrl}),this.sessionsStorage.removePart(e.sessionUuid,e.partId)}submitSessionPartAndSessionEnd(e,t){this.sessionEventStatCollector.logEvent({appUrl:this.appUrl,session:e,sessionPart:t}),this.sessionsStorage.remove(e.sessionUuid),this.sessions.delete(e.sessionUuid),this.sessionsStorage.removePart(t.sessionUuid,t.partId)}loadSessions(){const e=this.sessionsStorage.load();return this.log("Loaded sessions",e),e}loadSessionParts(){const e=this.sessionsStorage.loadPart();return this.log("Loaded session parts",e),e}log(e,...t){(0,s.infoLogger)(`[SessionsManager] ${e}`,...t)}static create(e){new b(e)}constructor(e){this.sessions=new Map,this.eventHooks={[r.SessionPartTrackerEvents.SessionPartTrackerEndEvent]:new o.Hook(r.SessionPartTrackerEvents.SessionPartTrackerEndEvent),[r.SessionPartTrackerEvents.SessionPartTrackerPartGoing]:new o.Hook(r.SessionPartTrackerEvents.SessionPartTrackerPartGoing),[r.SessionPartTrackerEvents.SessionPartTrackerStartEvent]:new o.Hook(r.SessionPartTrackerEvents.SessionPartTrackerStartEvent),[r.SessionTrackerEvents.SessionPartEnd]:new o.Hook(r.SessionTrackerEvents.SessionPartEnd),[r.SessionTrackerEvents.SessionGoing]:new o.Hook(r.SessionTrackerEvents.SessionGoing),[r.SessionTrackerEvents.SessionPartStart]:new o.Hook(r.SessionTrackerEvents.SessionPartStart)},this.initSession=()=>{this.activeSessionService||(this.startSession(this.appId,this.sessionUuid),this.removeOnBeforeLeave=this.pageActiveState.eventHooks[m.PageLeaveEventNames.BEFORE_LEAVE].add(this.stopSession,{once:!0}))},this.onSessionPartEnd=e=>{this.onMyTrackerTrackTimeSpentEvent?.(l.MyTrackerTimeSpentEvents.StopTimeSpent),this.activeSessionService&&((0,n.isMobileBrowser)()?this.saveSessionPart(e):e.duration>0&&this.submitSessionPart(e),this.saveSession(this.activeSessionService.session))},this.onSessionGoing=e=>{this.activeSessionService&&(this.saveSession(this.activeSessionService.session),this.saveSessionPart(e))},this.onSessionPartStart=()=>{if(this.onMyTrackerTrackTimeSpentEvent?.(l.MyTrackerTimeSpentEvents.StartTimeSpent),!(0,n.isMobileBrowser)())return;const e=this.loadSessionParts();Object.entries(e).forEach((([,e])=>{this.activeSessionService&&e.duration&&e.end&&e.sessionUuid===this.activeSessionService.session.sessionUuid&&this.submitSessionPart(e)}))},this.stopSession=()=>{this.onDestroy.remove(this.stopSession),this.removeOnInit?.(),this.removeOnBeforeLeave?.(),this.destroy(),this.pageActiveState.destroy()},this.sessionsStorage=new d.AppSessionsStorageLocal,this.sessionEventStatCollector=e.sessionEventStatCollector,this.appUrl=e.appUrl,this.pageActiveState=new f.PageActiveStateShared,this.requestApiMethod=e.requestApiMethod,this.sessionUuid=e.sessionUuid,this.appId=e.appId,this.disableVisitorTrackerService=e.disableVisitorTrackerService,this.onExternalSessionStart=e.onExternalSessionStart,this.isExternalInitAvailable=e.isExternalInitAvailable,this.onMyTrackerTrackTimeSpentEvent=e.onMyTrackerTrackTimeSpentEvent;const{onDestroy:t,onInit:i}=(0,a.getMiniAppLifecycle)(this.appId).hooks;this.onDestroy=t,this.onInit=i,this.init()}}},939094:(e,t,i)=>{i.d(t,{SessionPartTracker:()=>d});var r=i(559189),n=i(42032),o=i(805312),a=i(681194),s=i(789662),l=i(60822);class d{start(){this.isStarted=!0,this.idleManager?.start(),this.startPart()}destroy(){this.idleManager?.stop();const e=this.endPart();return this.isStarted=!1,this.options.pageActiveState&&(this.options.pageActiveState.eventHooks[a.PageActiveStateEventNames.ACTIVATE].remove(this.onExternalUnIdle),this.options.pageActiveState.eventHooks[a.PageActiveStateEventNames.DEACTIVATE].remove(this.onExternalIdle)),this.log("Destroy"),e}log(e,...t){(0,n.infoLogger)(`[SessionPartTracker][${this.sessionUuid}] ${e}`,...t)}constructor(e,t,i={},n){this.partNumber=0,this.partStartTime=0,this.isStarted=!1,this.startPart=()=>{this.partStartTime&&this.endPart(),this.partStartTime=(new Date).valueOf(),this.log("Start part"),this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerStartEvent].fire(),this.partGoingTimer=setInterval((()=>{const e={sessionUuid:this.sessionUuid,appId:this.appId,partId:this.partNumber,start:this.partStartTime,lastActivity:(new Date).valueOf()};this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerPartGoing].fire(e)}),r.SESSION_PART_GOING_TIMER_VALUE)},this.endPart=()=>{const e=(new Date).valueOf(),t=(0,o.calculateDurationInSeconds)(this.partStartTime,e);if(!this.isStarted||!this.partStartTime)return;const i=this.partNumber,n=this.partStartTime;if(this.partNumber+=1,this.partStartTime=0,clearInterval(this.partGoingTimer),t>0){const o={sessionUuid:this.sessionUuid,appId:this.appId,partId:i,start:n,end:e,duration:t};return this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerEndEvent].fire(o),this.log(`End part ${o.partId} duration: ${o.duration}`),o}this.log(`Skip part ${i} duration: ${t}`)},this.onExternalIdle=()=>{this.isStarted&&this.idleManager?.idle(!1)},this.onExternalUnIdle=()=>{this.isStarted&&this.idleManager?.unidle(!1)},this.sessionUuid=t,this.appId=e,this.options=Object.assign({},r.SessionPartTrackerDefaultOptions,i),this.eventHooks=n,this.idleManager=new s.IdleManager({id:this.sessionUuid,element:document,focusElement:this.options.focusElement,triggerEvents:this.options.triggerEvents,idleTimeout:this.options.timeout}),this.idleManager.eventHooks[l.IdleEvents.IDLE].add(this.endPart),this.idleManager.eventHooks[l.IdleEvents.UNIDLE].add(this.startPart),this.options.pageActiveState&&(this.options.pageActiveState.eventHooks[a.PageActiveStateEventNames.ACTIVATE].add(this.onExternalUnIdle),this.options.pageActiveState.eventHooks[a.PageActiveStateEventNames.DEACTIVATE].add(this.onExternalIdle))}}},976981:(e,t,i)=>{i.d(t,{SessionTrackerService:()=>a});var r=i(559189),n=i(42032),o=i(805312);class a{start(){return this.startTime||(this.startTime=(new Date).valueOf(),this.lastActivityTime=this.startTime,this.partTracker.start(),this.log("Start session")),this.session}continue(e){this.sessionUuid!==e.sessionUuid&&this.log(`WARNING! Requested to start session with different id: ${e.sessionUuid}`),this.startTime||(this.startTime=e.start,this.lastActivityTime=e.lastActivity,this.partTracker.start(),this.log("Continue session"))}destroy(){this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerEndEvent].remove(this.onPartEnd),this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerPartGoing].remove(this.updateSessionLastActiveTime),this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerStartEvent].remove(this.onPartStart);const e=(new Date).valueOf(),t=this.partTracker.destroy();return[this.endSession(e),t]}get session(){return{sessionUuid:this.sessionUuid,lastActivity:this.endTime||Number(this.lastActivityTime),start:Number(this.startTime),appId:this.appId,...this.endTime?{duration:(0,o.calculateDurationInSeconds)(Number(this.startTime),this.endTime)}:{}}}endSession(e){if(!this.startTime)return;this.endTime=e;const t=this.session;return this.log("End session",t.duration),t}log(e,...t){(0,n.infoLogger)(`[SessionTrackerService][${this.sessionUuid}] ${e}`,...t)}constructor(e,t,i,n){this.onPartEnd=e=>{this.lastActivityTime=e.end,this.eventHooks[r.SessionTrackerEvents.SessionPartEnd].fire(e)},this.updateSessionLastActiveTime=e=>{this.lastActivityTime=e.lastActivity||(new Date).valueOf(),this.eventHooks[r.SessionTrackerEvents.SessionGoing].fire(e)},this.onPartStart=()=>{this.eventHooks[r.SessionTrackerEvents.SessionPartStart].fire()},this.sessionUuid=t,this.appId=e,this.partTracker=i,this.eventHooks=n,this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerEndEvent].add(this.onPartEnd),this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerPartGoing].add(this.updateSessionLastActiveTime),this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerStartEvent].add(this.onPartStart)}}},290128:(e,t,i)=>{i.d(t,{VisitorTrackerService:()=>n});var r=i(559189);class n{start(){this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerEndEvent].add(this.partEnd),this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerPartGoing].add(this.partGoing),this.sendStats(r.TrackVisitorType.Open)}destroy(){this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerEndEvent].remove(this.partEnd),this.eventHooks[r.SessionPartTrackerEvents.SessionPartTrackerPartGoing].remove(this.partGoing),this.sendStats(r.TrackVisitorType.Close)}constructor(e){this.partGoing=()=>{this.totalActiveDuration+=r.ONE_TICK_DURATION,this.totalActiveDuration>=r.TIMEOUT_FOR_END_TRACK&&this.durationAfterRequest<r.TIMEOUT_FOR_REQUEST||(this.durationAfterRequest+=r.ONE_TICK_DURATION,this.durationAfterRequest>=r.TIMEOUT_FOR_REQUEST&&(this.durationAfterRequest-=r.TIMEOUT_FOR_REQUEST,this.sendStats(r.TrackVisitorType.Activity)))},this.partEnd=e=>{const t=e.duration%r.ONE_TICK_DURATION;this.totalActiveDuration+=t,this.totalActiveDuration<r.TIMEOUT_FOR_END_TRACK&&(this.durationAfterRequest+=t)},this.sendStats=async(e,t)=>{const i=()=>{!t&&setTimeout((()=>{this.sendStats(e,!0)}),r.RETRY_REQUEST)};try{await this.requestApiMethod("stats.trackVisitor",{app_id:this.appId,session_uuid:this.sessionUuid,session_duration:this.totalActiveDuration,type:e})}catch{i()}},this.sessionUuid=e.sessionUuid,this.appId=e.appId,this.requestApiMethod=e.requestApiMethod,this.eventHooks=e.eventHooks,this.totalActiveDuration=0,this.durationAfterRequest=0}}},805312:(e,t,i)=>{i.d(t,{calculateDurationInSeconds:()=>r});const r=(e,t)=>Math.floor((t-e)/1e3)},958714:(e,t,i)=>{var r,n,o,a;i.d(t,{MiniAppAdaptivity:()=>r,MiniAppBackButton:()=>a,MiniAppIntegration:()=>o}),(n=r||(r={})).AUTO="auto",n.ADAPTIVE="adaptive",n.FORCE_MOBILE="force_mobile",function(e){e.FULLSCREEN="fullscreen",e.CONTENT="content",e.POPUP="popup",e.POPUP_FULLSCREEN="popup_fullscreen"}(o||(o={})),function(e){e.BACK="back",e.CLOSE="close",e.NONE="none"}(a||(a={}))},748921:(e,t,i)=>{var r,n,o,a,s,l,d,c,u;i.d(t,{ActionProductionStatEventTypes:()=>o,AdMiniAppsBannerUpdated:()=>l,BannerAdEventType:()=>c,BenchmarkStatEventTypes:()=>a,FullScreenAdEventType:()=>d,NavigationStatEventTypes:()=>s,ProductionStatEventTypes:()=>r,SessionEventTypes:()=>u}),(n=r||(r={})).TYPE_ACTION="type_action",n.TYPE_NAVGO="type_navgo",function(e){e.TYPE_BRIDGE_EVENT_ITEM="type_bridge_event_item",e.TYPE_AD_MINI_APPS_EVENT_ITEM="type_ad_mini_apps_event_item",e.TYPE_MINI_APPS_SESSION="type_mini_apps_session"}(o||(o={})),function(e){e.MINI_APPS_PERFORMANCE="type_mini_apps_performance",e.WEB_APP_STARTS="type_web_app_starts",e.ACCESSIBILITY_ERRORS_COVERAGE="type_accessibility_errors_coverage_item"}(a||(a={})),function(e){e.TYPE_MINI_APP_NAVGO_ITEM="type_mini_app_navgo_item"}(s||(s={})),function(e){e[e.BANNER_NOT_UPDATED=0]="BANNER_NOT_UPDATED",e[e.BANNER_UPDATED=1]="BANNER_UPDATED",e[e.BANNER_NOT_CHANGED=2]="BANNER_NOT_CHANGED"}(l||(l={})),function(e){e.SHOW_AD="show_ad",e.CLICK_AD="click_ad"}(d||(d={})),function(e){e.SHOW_BANNER_AD="show_banner_ad",e.HIDE_BY_USER="hide_by_user",e.HIDE_BY_APP="hide_by_app",e.CLICK_BANNER_AD="click_banner_ad"}(c||(c={})),function(e){e.SESSION_END="session",e.SESSION_PART="session_part"}(u||(u={}))},377401:(e,t,i)=>{i.d(t,{default:()=>fi});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var o=function(){return o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};function a(e,t,i){if(i||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}function s(e){return e&&"object"==typeof e}function l(e){return e instanceof HTMLIFrameElement}function d(e){return e&&"function"==typeof e}function c(e){return Array.isArray(e)&&e.length>0}function u(e,t){c(e)&&e.forEach((function(e){return t(e)}))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var h=Object.create(null);function p(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return Object.assign.apply(Object,a([Object.create(h),e],t,!1))}function m(){return Object.create(h)}function f(e){return s(e)&&"motion-ads"===e.type}function b(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function v(e){return e&&"string"==typeof e}function g(e){return e&&"number"==typeof e}function _(e){return e instanceof HTMLVideoElement&&(v(e.src)||e.children&&Array.prototype.find.call(e.children,(function(e){return"SOURCE"===e.tagName&&e.src})))}function y(e){return"number"==typeof e?e:parseFloat(String(e))}function w(e,t,i,r){void 0===r&&(r=!0),Object.defineProperty(e,t,{value:i,enumerable:r,writable:!0,configurable:!0})}var A,S,x,P,E=function(){function e(e){Object.defineProperty(this,"engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disposables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modules",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"elements",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.engine=e,this.store=e.store,this.disposables=[],this.modules=m(),this.elements=m()}return Object.defineProperty(e.prototype,"onUpdate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(e.prototype,"makeClasses",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this,r=c(e)?e.map((function(e){return i.store.classMap[e]||e})):[];if(1===this.store.meta.classMode&&v(t)){var n=this.store.classPrefix+t;r.push(this.store.classMap[n]||n)}return r}}),Object.defineProperty(e.prototype,"getClass",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.engine.getClass(e)}}),Object.defineProperty(e.prototype,"getVar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.engine.getVar(e)}}),Object.defineProperty(e.prototype,"setCssVars",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.engine.setCssVars(e)}}),Object.defineProperty(e.prototype,"setProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.isDestroyed||this.store.setProps(e,t)}}),Object.defineProperty(e.prototype,"sendData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.store.sendData(e)}}),Object.defineProperty(e.prototype,"isDestroyed",{get:function(){return!this.engine||this.engine.isDestroyed||!s(this.store)||this.store.isDestroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!this.isDestroyed&&e&&this.engine.eventBus.sendEvent(e)}}),Object.defineProperty(e.prototype,"subscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;if(this.isDestroyed||!e)return!0;var r="function"==typeof t?function(e){var r=t.call(i,e);r&&i.onUpdate(e,r)}:function(e){return i.onUpdate(e)};this.store.subscribe(e,r),this.disposables.push([b(e),r])}}),Object.defineProperty(e.prototype,"unSubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(this.isDestroyed||!e)return!0;this.disposables.forEach((function(i){i[0].includes(e)&&t.store.unSubscribe(e,i[1])}))}}),Object.defineProperty(e.prototype,"disposeAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;!this.isDestroyed&&Array.isArray(this.disposables)&&this.disposables.forEach((function(t){var i;return(i=e.store).unSubscribe.apply(i,t)})),this.disposables=[]}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.destroy()}}),Object.defineProperty(e.prototype,"append",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"run",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e.prototype,"onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.preventDefault(),e.stopPropagation()}}),Object.defineProperty(e.prototype,"raiseCoreEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.isDestroyed||this.engine.raiseCoreEvent(e,t)}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.disposeAll(),this.element instanceof HTMLElement&&this.element.remove(),s(this.modules)&&Object.values(this.modules).forEach((function(e){return e.remove()})),s(this.elements)&&Object.values(this.elements).forEach((function(e){return e.remove()}));for(var e=0,t=Object.keys(this);e<t.length;e++)delete this[t[e]]}}),e}();!function(e){e.playheadReachedValue="playheadReachedValue",e.playheadViewabilityValue="playheadViewabilityValue",e.closedByUser="closedByUser",e.play="play",e.start="start",e.playbackStarted="playbackStarted",e.playbackPaused="playbackPaused",e.pause="pause",e.playbackResumed="playbackResumed",e.playbackCompleted="playbackCompleted",e.viewabilityMeasurable="viewabilityMeasurable",e.viewabilityUnmeasurable="viewabilityUnmeasurable",e.volumeOff="volumeOff",e.volumeOn="volumeOn",e.viewin="viewin",e.render="render",e.click="click",e.ctaClick="ctaClick",e.impression="impression",e.fullscreenOn="fullscreenOn",e.fullscreenOff="fullscreenOff",e.unload="unload",e.error="error",e.p95="95perc"}(A||(A={})),function(e){e.large="L",e.medium="M",e.small="S",e.tiny="XS"}(S||(S={})),function(e){e.desktop="desktop",e.mobile="mobile",e.tablet="tablet"}(x||(x={})),function(e){e.default="default",e.fullscreen="fullscreen",e.extendable="extendable",e.watch="watch"}(P||(P={}));var k=function(){function e(e){Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"object"!=typeof e||!e.error&&!e.status?this.error=700:e.isError?this.error=e.status||e.error:e.error?this.error=e.error:this.status=e.status,this.error||delete this.error,this.status||delete this.status}return Object.defineProperty(e.prototype,"setParams",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(s(e)){e.error,e.status;var t=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i}(e,["error","status"]);Object.assign(this,t)}return this}}),Object.defineProperty(e,"success",{get:function(){return new e({status:2e3})},enumerable:!1,configurable:!0}),Object.defineProperty(e,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(t,i){return new e({error:t}).setParams(i)}}),e}();function M(e,t,i){if(e instanceof HTMLElement){if(s(i))for(var r in i)e.style.setProperty(r,i[r]);if(s(t))for(var r in t)e.style[r]=t[r]}}function C(e,t){if(e instanceof HTMLElement&&s(t))for(var i in t)e.setAttribute(i,t[i])}function I(e,t){var i;if(void 0===t&&(t=m()),e instanceof HTMLElement){var r=t.classes,n=t.text,o=t.styles,a=t.vars,l=t.src,d=t.onClick,c=t.attrs,u=t.dattrs;C(e,c);var h=b(r);if(h.length&&(i=e.classList).add.apply(i,h),M(e,o,a),v(n)&&(e.innerHTML=n),s(u))for(var p in u)void 0!==u[p]&&(e.dataset[p]=u[p]);["img","video"].includes(e.tagName)&&l&&"src"in e&&(e.src=l),"function"==typeof d&&(e.onclick=d)}}function O(e,t){void 0===t&&(t=m());var i=document.createElement(e);return I(i,t),t.appendTo instanceof HTMLElement&&"function"==typeof t.appendTo.appendChild&&t.appendTo.appendChild(i),i}var T={timeupdate:function(e){return{currentTime:e.currentTime,duration:e.duration,remainTime:e.duration-e.currentTime,progress:e.currentTime/e.duration||0}},ended:function(e){return p({state:6})},canplay:function(){return{state:2,isReady:!0}},loadeddata:function(e){var t=e.muted,i=e.volume,r=e.videoWidth,n=e.videoHeight,o=e.duration,a={muted:t,volume:i,videoWidth:r,videoHeight:n,addon:.3/e.duration||0};return o&&(a.duration=o),a},volumechange:function(e){return{volume:e.volume,muted:e.muted}}};function R(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(null===navigator||void 0===navigator?void 0:navigator.userAgent)||(null===screen||void 0===screen?void 0:screen.width)<=480}function j(){var e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipod|blackberry|iemobile|opera mini/.test(e)||(null===screen||void 0===screen?void 0:screen.width)<=480?x.mobile:/tablet|ipad|playbook|silk/.test(e)||(null===screen||void 0===screen?void 0:screen.width)<=1080?x.tablet:x.desktop}function N(e){if(!(e instanceof HTMLElement))return m();var t=getComputedStyle(e),i=parseInt(t.width),r=parseInt(t.height);if(!i||!r){var n=e.getBoundingClientRect();i=Math.round(n.width),r=Math.round(n.height)}return{width:i,height:r}}function L(e,t,i){var r;void 0===i&&(i=!0),v(t)&&e instanceof HTMLElement&&("function"==typeof window.CustomEvent?r=new CustomEvent(t,{bubbles:i}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,i,!1,null),e.dispatchEvent(r))}function D(e,t,i){if(s(t)&&e instanceof HTMLElement){if(u(t.rmClasses,(function(t){return e.classList.remove(t)})),u(t.rmAttrs,(function(t){e.getAttribute(t)&&e.removeAttribute(t)})),c(t.idStart)&&v(i)&&!v(e.getAttribute("id")))return;e.style.display.startsWith("none")&&(e.style.display=""),e.parentElement instanceof HTMLElement&&e.parentElement.style.display.startsWith("none")&&(e.parentElement.style.display="")}}R();var B=function(){for(var e=window,t=frameElement;t;){try{t=e.parent.frameElement}catch(e){break}e=e.parent}return e}().document;function V(e){if(!e)throw k.error(333);var t=e;if(v(e)){t=document.querySelector(e);try{t||e.startsWith(".")||(t=document.querySelector(".".concat(e)))}catch(e){}if(t||(t=document.getElementById(e)),!t)throw k.error(311)}if(!(t instanceof HTMLElement))throw k.error(317);return t}var H="100";try{H=window.localStorage.getItem("MKDeveloper")}catch(r){}var z,U=231143056===(z=Number(H),Math.abs(((z*z^z)<<3|z)>>3)),F={log:"#068587",info:"#0177ff",error:"#FC5B3F",warn:"#FCB03C",table:"#6FB07F",debug:"#66FFFF"},W=window.console,G=Object.assign({},F),K=function(e){var t=e,i="error"===t?W.error:W.log;G[t]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];U&&i.apply(void 0,a(["%c MoKit:","color:".concat(F[t],";font-weight:bold;background:#FFFACD22;padding:2px;border-radius:8px")],e,!1))}};for(var Z in G)K(Z);function Y(e,t,i){if(s(t)&&t.debug){if(c(t.debug)&&!t.debug.includes(parseInt(e)))return;var r=m();if(r.ljs="motionx-lib",g(i)&&Date.now()-i>50&&(r.time=1017===e?50*Math.round((Date.now()-i)/50):i),s(t.banner)){var n=t.banner;n.id&&(r.id=n.id),n.impression_id&&(r.impr=n.impression_id),s(n.pattern)&&n.pattern.name&&(r.ptrn=n.pattern.name)}var o=Object.entries(r).map((function(e){var t=e[0],i=e[1];return"".concat(t,"=").concat(i)})).join("&");navigator.sendBeacon("https://ad.mail.ru/web/log/?ljs=motion-lib&msg=x"+e+"&"+o)}}function q(e){return c(e)?e[0]:e}function Q(e){v(e)&&((new Image).src=e)}function J(e,t,i,r){var n=q(e);if(v(n)){v(i)&&(n=n.replace(/[/?]*$/,"")+"//?"+i);var o=new Image,a=setTimeout((function(){return navigator.sendBeacon(n)}),7500);o.onerror=function(i){if(clearTimeout(a),c(e)&&e[1]&&v(t)){var o="?";try{o="?host="+new URL(n).host.replace(/\./g,"_")}catch(e){}G.warn("Check pixel for:",o,e[1]),navigator.sendBeacon(t+encodeURI(v(e[1])?"?"+e[1]:""))}else if(v(r)){var s=new Image,l=n.replace("r0.mail.ru",r);s.onerror=function(e){navigator.sendBeacon(l)},s.src=n}else navigator.sendBeacon(n)},o.onload=function(){return clearTimeout(a)},o.src=n}}H&&!U&&console.info("%c MoKit: Debug not authorized ","color: violet; font-weight:bol;background:#FFFACD55;padding:2px 4px;border-radius:8px");var X={appendChild:function(){}};function $(e,t,i,r,n){if(void 0===t&&(t=m()),void 0===i&&(i=m()),s(e)&&s(e.root))return s(t)||(t=m()),s(i)||(i=m()),s(n)||(n=m()),e.root.mixRoot&&r&&c(e.root.ch)?(e.root.ch.forEach((function(e){return o(e,r)})),r):o("root",r instanceof HTMLElement?r:X);function o(r,a){var l,d;if(s(e[r])){var u=e[r],h=document.createElement(u.tg||"div");if(n[r]=h,t[u.TXT]||!u.TXT||u.ch){if(c(u.cl)&&u.cl.forEach((function(e){return h.classList.add(s(i.classMap)&&i.classMap[e]||e)})),s(i.classes)&&c(i.classes[r])&&(l=h.classList).add.apply(l,i.classes[r]),s(null===(d=i.methods)||void 0===d?void 0:d[r]))for(var p in i.methods[r])h[p]=i.methods[r][p];if(u.html&&(h.innerHTML=u.html),s(u.ha))for(var m in u.ha)t[u.ha[m]]?h.setAttribute(m,t[u.ha[m]]):h.setAttribute(m,u.ha[m]);if(s(u.fn))for(var m in u.fn)h[m]=u.fn[m];if((u.txt||t[u.TXT])&&(h.innerHTML=String(u.txt||t[u.TXT])),u.SRC){var f=t;u.SRC.split(".").map((function(e){f[e]&&(f=f[e])})),h.setAttribute("src",String(f))}return c(u.ch)&&u.ch.forEach((function(e){return o(e,h)})),a.appendChild(h),h}}}}var ee=function(){return String.fromCharCode(97+Math.round(25*Math.random()))+Math.round(2147483648*Math.random()).toString(36)};function te(e,t){return s(e)&&v(t)&&Object.prototype.hasOwnProperty.call(e,t)}ee();var ie,re=function(e){function t(t){var i=e.call(this,t)||this;return Object.defineProperty(i,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"currentTab",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"selectId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"action",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isOpen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"data",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(i,"closeInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"balloonTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"balloonNodeId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"finishTab",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"closeTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.config=i.store.meta.adChoices||ke.adChoices,i.config.preRender&&(i.render(),i.resetMenu()),i.config.mouseOverShow&&i.store.vDOM[i.config.mouseOverShow]&&(i.store.vDOM[i.config.mouseOverShow].element.onmouseenter=function(){i.closeTimeout&&(clearTimeout(i.closeTimeout),i.closeTimeout=null),i.run()},i.store.vDOM[i.config.mouseOverShow].element.onmouseleave=function(){i.closeTimeout=setTimeout((function(){return i.config.actions.onAction.call(i,"closeMenu")}),150)}),i}return n(t,e),Object.defineProperty(t.prototype,"resetMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.action="",this.isOpen=!0,null===(e=this.currentTab)||void 0===e||e.remove(),this.element.style.display="block",this.store.rootNode.setCssAttr({menu:"open"}),this.elements.host.appendChild(this.elements.main),this.currentTab=this.elements.main}}),Object.defineProperty(t.prototype,"run",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.config.preRender){if(this.isOpen&&!this.config.mouseOverShow)return this.config.actions.onAction.call(this,"closeMenu");this.element||this.render(),this.resetMenu(),this.engine.pause(!0)}}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t,i=this;this.balloonTree=this.store.serviceForest[this.store.meta.balloonTree],this.balloonNodeId=this.store.meta.balloonNodeId;var r=(null===(t=this.store.vDOM[this.config.appendTo])||void 0===t?void 0:t.element)||this.store.proxyNode;this.store.isFullscreen&&(r=R()?this.store.rootNode.element:this.store.vDOM.workArea.element),this.element=O("div",{classes:this.getClass(this.config.wrapCl||"_mk_adChoicesWrap"),appendTo:r}),this.elements.host=O("div",{classes:this.getClass(this.config.cl||"_mk_adChoices"),onClick:this.onClick,appendTo:this.element}),this.config.actions.initTabs.call(this),this.config.closeBtn&&(this.elements.closeBtn=O("div",{classes:this.getClass("_mk_adChoices_close_button"),onClick:function(t){e.prototype.onClick.call(i,t),i.config.actions.onAction.call(i,"closeMenu")},text:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.41 6.41c.3-.3.8-.3 1.1 0L11 9.91l3.49-3.5a.78.78 0 0 1 1.1 1.1L12.09 11l3.5 3.49a.78.78 0 0 1-1.1 1.1L11 12.09l-3.49 3.5a.78.78 0 0 1-1.1-1.1L9.91 11 6.4 7.51c-.3-.3-.3-.8 0-1.1Z" fill="#fff"/>\n</svg>',appendTo:this.store.isFullscreen?this.elements.host:this.element}))}}),Object.defineProperty(t.prototype,"unmount",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t,i,r=this.elements.closed;this.isDestroyed||(r.classList.add(this.getClass("_mk_adChoicesClosed")),this.copyCssProps(this.config.finalProps,this.element,r),this.store.proxyNode.remove(),this.store.closedByUser=!0,this.store.servicePause=!0,null===(t=this.elements.closeBtn)||void 0===t||t.remove(),this.store.hostNode.appendChild(this.elements.closed),this.element=null,this.elements=null);var n=this.engine;this.notify(this.config.tabs[this.action]),null===(i=this.engine)||void 0===i||i.destroy(),e.prototype.destroy.call(this),n.closeTab=r}}),Object.defineProperty(t.prototype,"copyCssProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r=this;if(Array.isArray(e)&&t instanceof HTMLElement&&i instanceof HTMLElement){var n=getComputedStyle(t);e.forEach((function(e){var t=r.getVar(e);i.style.setProperty(t,n.getPropertyValue(t))}))}}}),Object.defineProperty(t.prototype,"notify",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!function(e,t,i){if(v(e)&&s(t)&&s(i)){var r=document.getElementById(e);if(r instanceof HTMLElement){var n=$(t,i,void 0,r);setTimeout((function(){n.style.opacity="0",setTimeout((function(){n.remove()}),400)}),7e3)}}}(this.balloonNodeId,this.balloonTree,e)}}),Object.defineProperty(t.prototype,"sendReason",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i,r;9==e&&v(ke.links.complainLink)?fetch(ke.links.complainLink,{method:"POST",body:JSON.stringify({banner_id:String(null===(r=null===(i=this.store)||void 0===i?void 0:i.data)||void 0===r?void 0:r.id),reason:9,sitename:this.store.hostname,text:t})}).catch((function(){})):s(this.config)&&v(this.config.closeUrl)&&Q(this.config.closeUrl+e)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(E),ne=p({aсMenu:re});function oe(e,t){c(e)&&"number"==typeof t&&!isNaN(t)||(t=4095);var i=m();return e.forEach((function(e,r){return i[e]=!!(t&1<<r)})),i}function ae(e){var t,i=Math.ceil(e.length/2),r=i;return e.replace(/\s/g,(function(e,n){var o=Math.abs(i-n);return o<r&&(r=o,t=n)," "})),t?[[0,t-("."==e[t-1]?1:0),0],[t+1,0,0]]:[[0,0,0]]}function se(e,t,i,r){return"number"!=typeof i||isNaN(i)?null:r?Math.max(e,Math.min(t,i))+.5|0:Math.max(e,Math.min(t,i))}function le(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(t)}function de(e){navigator.clipboard?navigator.clipboard.writeText(e).catch((function(){le(e)})):le(e)}function ce(e){var t=[];3===e.length?e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2):6!==e.length&&(e="#555555");for(var i=0;i<=2;i++)t[i]=parseInt(e.slice(2*i,2*i+2),16);return.2126*t[0]+.7152*t[1]+.0722*t[2]}function ue(e){void 0===e&&(e=10);for(var t=Math.round(25*Math.random()+10).toString(36),i=e;i--;)t+=Math.round(36*Math.random()).toString(36);return t}!function(e){e.Ready="Ready",e.MediaReady="MediaReady",e.Error="Error",e.Started="Started",e.VideoStarted="VideoStarted",e.Paused="Paused",e.Played="Played",e.Resumed="Resumed",e.Replayed="Replayed",e.VolumeChanged="VolumeChanged",e.Completed="Completed",e.Closed="Closed",e.Skipped="Skipped",e.Clicked="Clicked",e.TimeRemained="TimeRemained",e.DurationChanged="DurationChanged",e.ItemShowed="ItemShowed",e.Pixel="Pixel",e.ClosedByUser="ClosedByUser",e.UserAction="UserAction"}(ie||(ie={}));var he={initTabs:function(){var e,t,i=this;Object.entries(this.config.tabs).forEach((function(e){var t=e[0],r=e[1];i.elements[t]=O("div",{classes:i.getClass(r.tabCl||"_mk_adChoices_tab"),dattrs:{tab:t}}),["header","body","footer"].forEach((function(e){("body"===e||r[e])&&(i.elements["".concat(t,"_").concat(e)]=O("div",{classes:i.getClass(r["".concat(e,"Cl")]||"_mk_adChoices_".concat(e)),appendTo:i.elements[t],text:r[e]}))}));var n=r.items;c(n)&&n.forEach((function(e){var n=e.id||e.name;i.elements[n]=O(e.tg||"div",{classes:i.getClass(e.classNames||r.itemCl||"_mk_adChoices_menuLine"),text:me.call(i,e.text,e.iconUrl),onClick:e.action?function(t){return i.config.actions.onAction.call(i,e.action,n,e.actionValue,t)}:void 0,appendTo:i.elements["".concat(t,"_body")],dattrs:{action:e.action}})}))})),s(t=this.config.tabs.main)&&"*"===t.header&&(this.elements.main_header.innerHTML=((null===(e=this.store.data.adLabel)||void 0===e?void 0:e.text)||"Реклама")+" "+(this.store.data.ageRestrictions||"0+"));var r=this.store.data.aboutCompany;r&&O("div",{classes:this.getClass("_mk_adChoices_about"),text:r,appendTo:this.elements.main_header})},resolveIcons:me,onAction:function e(t,i,r,n){var o,a;switch(null==n||n.preventDefault(),null==n||n.stopPropagation(),t){case"showTab":this.elements.host.replaceChild(this.elements[i],this.currentTab),this.currentTab=this.elements[i],"closed"===r&&(this.sendEvent(ie.ClosedByUser),this.sendEvent(ie.Closed),this.raiseCoreEvent(9),e.call(this,"destroy"));break;case"closeMenu":this.closeTimeout=null,this.isOpen&&(this.element.style.display="none",this.store.rootNode.setCssAttr({menu:"close"}),this.store.isServiceHidden=!1,this.elements.hideForm=void 0,this.engine.resume(!0),this.isOpen=!1);break;case"hide":case"complain":pe.call(this,t),e.call(this,"showTab",i,r);break;case"sendOther":this.sendReason(9,this.elements.textArea.value||""),e.call(this,"showTab","closed","closed");break;case"reasonItem":9!=i&&this.sendReason(i);var s=null===(a=null===(o=this.store)||void 0===o?void 0:o.proxyNode)||void 0===a?void 0:a.getAttribute("adChoiceSize"),l=(null==s?void 0:s.includes(S.tiny))||(null==s?void 0:s.includes(S.small))?"closed":r;e.call(this,"showTab",l,l,n);break;case"copy":if(de(r||"Not defined"),this.elements[i]instanceof HTMLElement){var d=this.elements[i].getElementsByTagName("span")[0]||this.elements[i];if(d instanceof HTMLElement){var c=d.innerText;d.innerText="Скопировано",setTimeout((function(){return d.innerText=c}),2e3)}}break;case"redirect":v(r)&&window.open(r,"_blank");break;case"destroy":this.unmount()}}};function pe(e){this.elements.closeTitle.innerHTML=this.config.tabs[e].closeTitle,this.elements.closeInfo.innerHTML=this.config.tabs[e].closeInfo,this.elements.textArea.setAttribute("placeholder",this.config.tabs[e].otherPlaceholder),this.action=e}function me(e,t){return t?'<img src="'.concat(t,'" style="width: 20px; height: 20px;"/>')+"<span>"+e+"</span>":e}var fe,be={closeBtn:!0,tabs:{main:{header:"*",items:[{name:"VKAds",classNames:["_mk_vkAds","_mk_adChoices_menuLine"]}]},hide:{},other:{header:"Другое:",items:[{tg:"textarea",name:"textArea",classNames:["_mk_freeTextArea"]},{text:"Отправить",name:"sendButton",classNames:["_mk_freeButton"],action:"sendOther"}],footer:!0},complain:{},closed:{items:[{name:"closeTitle",classNames:["_mk_closeTitle"]},{name:"closeInfo",classNames:["_mk_closeInfo"]}]}},finalProps:["--mk-cSubhead","--mk-сPrimary","--mk-bgContent","--mk-cBorder","--mkext-bRadius","--mkext-bRadius-tl","--mkext-bRadius-tr","--mkext-bRadius-bl","--mkext-bRadius-br"],actions:he},ve={fraction:.055,config:(fe={},fe[6]={text:"ЕСТЬ ПРОТИВОПОКАЗАНИЯ. НЕОБХОДИМА КОНСУЛЬТАЦИЯ СПЕЦИАЛИСТА",ratio:[521/24,7.75,218/72],lines:[[[0,0,521,526]],[[0,21,188,190],[22,0,327,330]],[[0,21,188,190],[22,46,218,220],[47,0,106,106]]]},fe[9]={text:"БАД. НЕ ЯВЛЯЕТСЯ ЛЕКАРСТВЕННЫМ СРЕДСТВОМ",size:2,ratio:[349/24,4.4375],lines:[[[0,0,349,354]],[[0,16,132,134],[17,0,213,217]]]},fe[10]={text:"Проектная декларация на сайте наш.дом.рф",ratio:[356/24,3.875],allowSimple:!0,lines:[[[0,0,356,360]],[[0,20,186,187],[21,0,166,169]]]},fe[11]={text:"ИЗУЧИТЕ ВСЕ УСЛОВИЯ КРЕДИТА (ЗАЙМА) НА САЙТЕ. ОЦЕНИВАЙТЕ СВОИ ФИНАНСОВЫЕ ВОЗМОЖНОСТИ И РИСКИ",size:2,ratio:[787/24,407/48,301/72,233/96,170/120],lines:[[[0,0,787,798]],[[0,44,374,377],[46,0,407,414]],[[0,35,301,303],[36,61,209,211],[62,0,271,276]],[[0,19,164,166],[20,44,207,208],[45,72,233,237],[72,0,170,173]],[[0,19,164,166],[20,38,157,158],[39,56,146,147],[57,72,137,140],[72,0,170,173]]]},fe)};ve.config[8]=ve.config[6];var ge,_e,ye=function(){function e(){Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),w(this,"listeners",m(),!1),w(this,"isDestroyed",!1,!1),this.runListeners=this.runListeners.bind(this)}return Object.defineProperty(e.prototype,"bulkPropsInit",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;c(e)&&!this.isDestroyed&&e.forEach((function(e){return i[e]=t}))}}),Object.defineProperty(e.prototype,"copyPropsInit",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r=this;!this.isDestroyed&&s(e)&&c(t)&&(t.forEach((function(t){var i;return r[t]=null!==(i=e[t])&&void 0!==i?i:r[t]})),i&&"object"==typeof i&&Object.entries(i).forEach((function(t){var i=t[0],n=t[1];i in e&&(e[i]||!1===e[i]||0===e[i])||(r[i]=n)})))}}),Object.defineProperty(e.prototype,"sendData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;!this.isDestroyed&&s(e)&&Object.entries(e).forEach((function(e){var i=e[0],r=e[1];c(t.listeners[i])&&t.listeners[i].forEach((function(e){return e(r)}))}))}}),Object.defineProperty(e.prototype,"setProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r=this;if(!this.isDestroyed&&s(e)){var n=m();try{Object.entries(e).forEach((function(e){var i=e[0],o=e[1];r[i]!==o&&(t&&G.log("update prop: ".concat(i," to ").concat(o," from ").concat(r[i])),n[i]=[o,r[i]],r[i]=o)}))}catch(e){}setTimeout((function(){return r.runListeners(n,t,i)}),0)}}}),Object.defineProperty(e.prototype,"pushValues",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i,r=b(t),n=this[e];if(Array.isArray(n))n.push.apply(n,r);else{if(void 0!==n)return;this[e]=a([],r,!0)}this.runListeners(((i={})[e]=[this[e],void 0],i))}}),Object.defineProperty(e.prototype,"subscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;"function"!=typeof t||this.isDestroyed||b(e).forEach((function(e){"string"==typeof e&&(c(i.listeners[e])?i.listeners[e].includes(t)||i.listeners[e].push(t):i.listeners[e]=[t])}))}}),Object.defineProperty(e.prototype,"unSubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;"function"!=typeof t||this.isDestroyed||b(e).forEach((function(e){if("string"==typeof e&&e in i.listeners){var r=i.listeners[e].findIndex((function(e){return e===t}));~r&&i.listeners[e].splice(r,1)}}))}}),Object.defineProperty(e.prototype,"delProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(!this.isDestroyed){var i=b(e),r=m();i.forEach((function(e){e in t&&(r[e]=[void 0,t[e]],delete t[e])})),this.runListeners(r)}}}),Object.defineProperty(e.prototype,"runListeners",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r=this;void 0===t&&(t=!1),void 0===i&&(i=!1),this.isDestroyed||Object.keys(e).forEach((function(n){var o;t&&G.log("runListeners (".concat((null===(o=r.listeners[n])||void 0===o?void 0:o.length)||0,") for prop: ").concat(n,".")),c(r.listeners[n])&&r.listeners[n].length&&r.listeners[n].forEach((function(t,o){(r[n]===e[n][0]||i)&&t(e)}))}))}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.runListeners({$$destroy:[!0,!1]},!1,!0),this.listeners=null,this.prevState=null;for(var e=0,t=Object.keys(this);e<t.length;e++)delete this[t[e]];this.isDestroyed=!0}}),e}(),we=function(e){function t(t,i){var r=e.call(this)||this;return Object.defineProperty(r,"engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"muted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(r,"volume",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(r,"currentTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"remainTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"duration",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"progress",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"addon",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"visibility",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"manualPause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"servicePause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"isMobileSafari",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"isReady",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"isMediaReady",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"isStarted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"errors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"colors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"css",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.engine=t,r.node=i,r}return n(t,e),t}(ye),Ae=function(e){function t(t,i,r){var n,o=e.call(this,t)||this;Object.defineProperty(o,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"nStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"textNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"builders",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"triggers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"workers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"animators",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"manager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o.parent=i,o.current=r;try{o.config=o.store.workTree[r],o.id=null===(n=o.config.a)||void 0===n?void 0:n.id}catch(e){G.error("MANode. config:",o.config,r)}return s(o.config)?(o.store.vDOM[r]=o,o.init(),o):(o.destroy(),o)}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,i=this.config,r=i.bl,n=i.tr,o=i.wr,a=i.ch,l=(i.an,i.role);this.builders=this.makeHandlers(r||0,this.engine.handlers.builders),this.workers=this.makeHandlers(o,this.engine.handlers.workers),this.triggers=this.makeHandlers(n,this.engine.handlers.triggers),v(l)&&this.store.roleMap.set(this.element,l),this.children=a?b(a).filter((function(t){var i;return!s(null===(i=e.store.workTree[t])||void 0===i?void 0:i.iif)||b(e.store.workTree[t].iif).every((function(t){var i,r;return null===(r=(i=e.engine.handlers.enforcers)[t.e])||void 0===r?void 0:r.call(i,t,e.store.data,e.store)}))})).map((function(i){return new t(e.engine,e,i)})):[],this.nStore&&this.nStore.setProps(p({ready:!0}))}}),Object.defineProperty(t.prototype,"firstRender",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.children.forEach((function(e){return e.firstRender()})),this.triggers.forEach((function(e){return e.handle()})),this.workers.forEach((function(e){return e.handle()})),null===(e=this.animators)||void 0===e||e.forEach((function(e){return e.handle()}))}}),Object.defineProperty(t.prototype,"makeHandlers",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this,r=b(e).map((function(e){return s(e)?e:{e}}));return r.forEach((function(e){if("function"!=typeof t[e.e])throw G.warn("Handler is not function or not found. Node:",i.current),k.error(564)})),r.map((function(e){return new t[e.e](i.engine,i,e)}))}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDestroyed||(c(this.triggers)&&this.triggers.forEach((function(e){return e.destroy()})),c(this.children)&&this.children.forEach((function(e){return e.destroy()})),this.nStore instanceof we&&this.nStore.destroy(),e.prototype.destroy.call(this))}}),Object.defineProperty(t.prototype,"setCssStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){M(this.element,e,t)}}),Object.defineProperty(t.prototype,"setCssAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){C(this.element,e)}}),Object.defineProperty(t.prototype,"toggleVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.nStore&&(s(e)?this.nStore.setProps(e):this.nStore.setProps({muted:!this.nStore.muted}))}}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i;null===(i=this.manager)||void 0===i||i.play(e,t)}}),Object.defineProperty(t.prototype,"pause",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i;null===(i=this.manager)||void 0===i||i.pause(e,t)}}),Object.defineProperty(t.prototype,"useStore",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.nStore||(this.nStore=new we(this.engine,this)),this.nStore}}),t}(E),Se=function(e){function t(t){var i=e.call(this,t)||this;return i.init(),i}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t,i,r,n=this;this.isDestroyed||((null===(t=this.store.rootNode)||void 0===t?void 0:t.element)instanceof HTMLElement&&this.store.rootNode.element.remove(),this.rootNode=new Ae(this.engine,{},"root"),this.store.roleMap.set(this.store.proxyNode,"background"),v(null===(i=this.store.meta.adChoices)||void 0===i?void 0:i.size)&&this.store.proxyNode.setAttribute("adChoiceSize","".concat(null===(r=this.store.meta.adChoices)||void 0===r?void 0:r.size," ").concat(this.store.view)),this.store.rootNode=this.rootNode,this.store.proxyNode.appendChild(this.store.rootNode.element),this.store.isFullscreen&&this.store.roleMap.set(this.store.rootNode.element,"closeBanner"),this.adjust(),e.prototype.init.call(this),setTimeout((function(){return n.setProps(p({currentTime:.3}))}),300))}}),Object.defineProperty(t.prototype,"playNextScene",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.rootNode.firstRender(),this.setProps(p({state:2,isReady:!0}))}}),Object.defineProperty(t.prototype,"adjust",{enumerable:!1,configurable:!0,writable:!0,value:function(){c(this.store.noData)&&(this.rootNode.element.dataset.notGiven=this.store.noData.join(" "))}}),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return n(t,e),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDestroyed||this.rootNode.render()}}),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.engine.disclaimer&&this.rootNode.setCssAttr({disclaimer:"3"})}}),Object.defineProperty(t.prototype,"playNextScene",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(E)),xe={base:Se},Pe=["viewin","check","render","click","ctaClick","closedByUser","viewabilityDuration","viewabilityMeasurable","viewabilityUnmeasurable","error","playbackStarted","playbackCompleted","playbackPaused","playbackResumed","volumeOff","volumeOn","playVideoVolumeOn","playVideoVolumeOff","playheadReachedValue","playheadViewabilityValue","sharePost","likePost","clickPostOwner","clickPostLink","audioClick","showOff","showOff","isBot","isCold","impression","fullscreenOn","fullscreenOff"],Ee=((ge={})[1]="render",ge[2]="playbackStarted",ge[3]="playbackStarted",ge[4]="playbackPaused",ge[5]="playbackResumed",ge[6]="playbackCompleted",ge[8]="closedByUser",ge[9]="closedByUser",ge[11]=["volumeOn","playVideoVolumeOn"],ge[12]=["volumeOff","playVideoVolumeOff"],ge[13]="click",ge[14]="ctaClick",ge[19]="error",ge[15]="viewin",ge[20]="isBot",ge[21]="isCold",ge),ke=([25,50,75,100].map((function(e){return"playheadReachedValue".concat(e)})).concat("trackingLink","ctaLink","ctaUrl").concat(Pe).map((function(e){return[e,e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(function(e,t){return(t?"-":"")+e.toLowerCase()}))]})),p({methods:["start","pause","resume","skip","stop","setVolume","destroy","getVolume","getState","useTheme","raiseEvent","restore"],components:ne,producers:xe,adChoices:be,disclaimer:ve,pixels:Pe,multiplePixels:["playbackResumed","playbackPaused","volumeOn","volumeOff","playVideoVolumeOn","playVideoVolumeOff","error","click","ctaClick","check"],defaultPixelTarget:{video:["playbackStarted","playbackCompleted","playbackPaused","playbackResumed","volumeOff","volumeOn","playVideoVolumeOn","playVideoVolumeOff","playheadReachedValue","playheadViewabilityValue"],banner:["viewin","check","render","click","ctaClick","closedByUser","viewabilityDuration","viewabilityMeasurable","viewabilityUnmeasurable","sharePost","likePost","clickPostOwner","clickPostLink","audioClick","showOff","error","isBot","isCold"]},eventToPixel:Ee,engine:{defaultTag:"div",classPrefix:"_mk_"},clickAreas:["title","description","icon","image","rating","votes","ctabutton","agerestrictions","label","domain","appcategory","background","wholeview"],serviceRoles:["aсMenu"],links:{VKAds:"https://ads.vk.com/",complainLink:"https://ad.mail.ru/complain/",rules:"https://ads.vk.com/documents/recommendation"},eventToDispatch:(_e={},_e[13]="mrg-click",_e[14]="mrg-click",_e[17]="mrg-showed",_e[15]="mrg-viewable",_e[1]="mrg-render-init",_e[19]="mrg-error",_e),multipleEvents:["mrg-click"],webErrorMapping:{lib_init:[315,333,317,311],lib_render:[555,552,558,700,701],warn:[702]},sharedProps:{allowAnimation:!1,allowReplay:!0,autoReplay:!0,autoPause:!0,autoStart:!0,openLinkInPopup:!1,checkBot:!0,allowClose:!0,allowCloseDelay:0,autoCloseDelay:0,closeOnClick:!1,closeOnCompleted:!1},defaults:{ageRestrictions:"16+",ctaText:"Перейти"}})),Me=function(e){function t(t){var i=e.call(this)||this;Object.defineProperty(i,"engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"vDOM",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(i,"branch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"erid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"localId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"initConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"globalInitConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"parentElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"hostNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"proxyNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"hostSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"meta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"rootSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"bannerSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isReady",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"height",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"mediaWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"fixSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"media",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"aspectRatio",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"classPrefix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"hostname",{enumerable:!0,configurable:!0,writable:!0,value:"*"}),Object.defineProperty(i,"styles",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(i,"clickArea",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isUserBeenActive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isMobileSafari",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"videos",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"servicePause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"closedByUser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"firstRenderTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"animators",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"producer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"hasIObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"noSendPixel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"duration",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"visibility",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"currentTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"activeSlideIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"inFocus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isPopupOpen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"muted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"errors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"noData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(i,"isTouchListening",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isTouched",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"fullMedia",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"theme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"mediafiles",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(i,"_root_size",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(i,"_proxy_size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_cs_size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_cs_slide_size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_cs_direction",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(i,"_infoArea_size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"controls",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(i,"allowAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"autoReplay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"autoPause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"autoStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"allowReplay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"closeOnCompleted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isShown",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"videoShowed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"viewin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"inViewport",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"serviceClick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"proxyNodeInitRect",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"mediaInitRect",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isPageUnload",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isDeveloper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"skipResize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"pathname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"search",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"signs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"checkPixel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isLocalHost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isFramed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"workTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"serviceForest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isServiceHidden",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"roleMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"hasExtPlayer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"disclaimerPaddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"stylesToken",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"calcText",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"isFullscreen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"allowClose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"allowCloseDelay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"autoCloseDelay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"closeOnClick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"clickZoneFullscreenCloseButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"mediaAutoScroll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"disableClickArea",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"notDestroyOnDisconnect",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"noUnobserve",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"hashurl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"classMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"varMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"upSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"virtualization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"videoControlNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"asmProp",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(i,"refs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"extStatEngine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"dataset",{enumerable:!0,configurable:!0,writable:!0,value:m()}),i.engine=t;try{i.version="1.0.298",i.pathname=location.pathname,i.search=location.search}catch(e){}return i.isDeveloper=U,i.signs=m(),i.roleMap=new Map,i}return n(t,e),Object.defineProperty(t.prototype,"getDataProp",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(v(e)){if(!(e in this.data))return t||this.meta.defaults[e]||ke.defaults[e];var i=this.data[e];return c(i)?i[0]:i}}}),Object.defineProperty(t.prototype,"regAnimator",{enumerable:!1,configurable:!0,writable:!0,value:function(e){s(e)&&this.pushValues("animators",e)}}),t}(ye);function Ce(e,t){void 0===t&&(t=1.01);var i=m();for(var r in e)for(var n=parseInt(r),o=e[r].length;o--;)i[n+o]=e[r][o]*t;var a=Object.values(i);return i[0]=a.reduce((function(e,t){return e+t}),0)/a.length,i}function Ie(e,t){if(!v(e))return 0;for(var i=0,r=e.length;r--;)i+=t[e.charCodeAt(r)]||t[0];return i}function Oe(e,t){if(v(e))return e.split(" ").map((function(e){return{word:e,l:e.length,w:Ie(e,t)}}))}function Te(e,t,i,r,n){if(void 0===n&&(n=999),!c(e))return p({cnt:0,lengths:[],wordCnt:[],fullCnt:0});var o=i/24,a=r[32]*o,s=0,l=0,d=0,u=[],h=[];return e.forEach((function(i,r){var n;l=l+i.w*o+(l?a:0),d+=i.l;var c=(null===(n=e[r+1])||void 0===n?void 0:n.w)*o||0;(i.word.endsWith("\n")||l+(c+(c&&a))>=t)&&(u.push(d+(i.word.match(/\n/g)||[]).length-1),h.push(r),s++,l=0)})),l&&(s++,u.push(d)),p({cnt:Math.min(s,n),lengths:u,fullCnt:s,wordCnt:h})}function Re(e){if(!s(e)||!c(e.lines))return m();var t=e.lines.map((function(t){return[t,Te(t.words,e.width,t.fontSize,e.charMap)]})),i=m(),r=e.height;return t.forEach((function(t){var n=Math.floor(r/t[0].lineHeight);n>=t[1].cnt?(i[t[0].name]=t[1].cnt,r=Math.max(0,r-t[1].cnt*t[0].lineHeight-(e.gap||0))):(i[t[0].name]=n,r=0)})),i}var je=function(e){function t(t,i){var r=e.call(this,t)||this;if(Object.defineProperty(r,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!s(r.engine.dispatcher))throw k.error(577);r.checkVideo(),r.setConfig(i);var n=V(r.store.initConfig.target||r.store.initConfig.container);return r.setProps(p({hostNode:n,parentElement:n.parentElement})),r.setMetaData(),r.prepareData(),r.resolveControls(),r.resolveSharedProps(),r}return n(t,e),Object.defineProperty(t.prototype,"setConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i,r,n=Object.assign(m(),s(e.data)?e.data:e.banner);if(!s(n))throw k.error(319);if(!n.noPreprocessors)try{var o=[].concat((null===(t=this.store.globalInitConfig)||void 0===t?void 0:t.preprocessors)||[],(null===(i=window.MotionKitConfig)||void 0===i?void 0:i.preprocessors)||[]),a=this.engine.dispatcher.applyPreProcs(n,o);a&&(n=a,G.info("Preprocessors result:",a))}catch(t){G.error("Preprocessors runtime error:",t),this.engine.sendWebLog(580,t),n=Object.assign(m(),s(e.data)?e.data:e.banner)}this.data=n,this.store.branch=null!==(r=n.branch)&&void 0!==r?r:this.store.globalInitConfig.branch,this.store.id=n.id,this.setProps(p({initConfig:e,data:n}))}}),Object.defineProperty(t.prototype,"setMetaData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r,n=this.data.creativeType,o=this.engine.dispatcher.getCreative(n),a=s(o)?o.meta:void 0;if(G.warn("META 0:",n,this.data),G.warn("META:",a,o),!a)throw c(window._MotionKit)||i._dG("_MotionKit",[]),window._MotionKit.push(this.store.initConfig),k.error(315,{message:n});var l=this.store.branch;if(v(l)&&s(null===(e=a.branches)||void 0===e?void 0:e[l])){var u=a.branches[l];Object.setPrototypeOf(u,a),a=u}var h=a.tree;if(!s(h))throw k.error(551);if(!s(a.handlers))throw k.error(562);["workers","builders","triggers","enforcers"].forEach((function(e){if(!s(a.handlers[e]))throw G.warn("Specific handler not defined:",e),k.error(563)})),this.store.workTree=h,this.store.serviceForest=s(a.serviceForest)?a.serviceForest:{},this.store.disclaimerPaddings=a.disclaimerPaddings;var f=a.producer;if(!v(a.producer)||!(a.producer in ke.producers))throw k.error(555);if("base"===f){if(!s(h.root))throw k.error(552)}else if("scenes"===f){if(!c(a.scenes))throw k.error(556);a.scenes.forEach((function(e,t){if(!s(e))throw k.error(557);var i=t?"scene".concat(t+1,"root"):"root";if(!s(h[i]))throw k.error(558)}))}this.checkTree(h,"root");var b=d(window.IntersectionObserver);s(a.defaults)||(a.defaults=m()),this.setProps(p({meta:a,producer:f,hasIObserver:b})),b||(this.store.visibility=100),"function"!=typeof(null===(t=this.store.meta.handlers)||void 0===t?void 0:t.promoter)&&(s(this.store.meta.handlers)||(this.store.meta.handlers=m()),this.store.meta.handlers.promoter=D);try{this.store.hostname=window.frameElement?window.top.location.hostname:location.hostname}catch(e){}try{var g=navigator.userAgent;this.store.isMobileSafari=/iPhone/i.test(g)&&/Safari/i.test(g)}catch(e){}var _=y(this.data.width),w=y(this.data.height);if(_&&w?this.setProps(p({width:_,height:w,fixSize:!0,_root_size:{width:_,height:w}})):(this.store.fixSize=this.data.fixSize,this.store._root_size=N(this.store.hostNode)),!s(null===(r=this.engine.dispatcher)||void 0===r?void 0:r.classMap))throw k.error(565);this.store.virtualization=this.store.initConfig.virtualization||this.store.globalInitConfig.virtualization&&!1!==this.store.initConfig.virtualization,this.store.classMap=this.engine.dispatcher.classMap,this.store.varMap=this.engine.dispatcher.varMap||m()}}),Object.defineProperty(t.prototype,"getUnifiedMedia",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i,r,n,o,a,l,d,u,h=(null===(t=e.video)||void 0===t?void 0:t.mediafiles)||(null==e?void 0:e.mediafiles),m=(null===(i=this.store._root_size)||void 0===i?void 0:i.width)||this.store.meta.mediaWidth;if(c(h)){var f=h.filter((function(e){return s(e)&&v(e.src)&&(e.src.endsWith("mp4")||"mp4"===e.format)})).sort((function(e,t){var i,r;return y(null!==(i=e.width)&&void 0!==i?i:0)-y(null!==(r=t.width)&&void 0!==r?r:0)}));this.store.mediafiles=f;var b=void 0;if(m&&(b=f.find((function(e){return e.width>=m}))),!b&&f.length&&(b=f[f.length-1]),b||"function"!=typeof(null===(r=this.store.globalInitConfig.appApi)||void 0===r?void 0:r.extPlayer)||(b=h.filter((function(e){return s(e)&&v(e.src)&&(e.src.endsWith("m3u8")||"hls"===e.format)}))[0]),b)return p({src:b.src,width:b.width||(null===(n=e.image)||void 0===n?void 0:n.width),height:b.height||(null===(o=e.image)||void 0===o?void 0:o.height),type:"video",format:b.src.endsWith("m3u8")||"hls"===b.format?"HLS":"MPEG",poster:b.poster||(null===(l=null===(a=e.video)||void 0===a?void 0:a.videoBackground)||void 0===l?void 0:l.src)||(null===(d=e.image)||void 0===d?void 0:d.src)})}var g=s(e.image)?e.image:null===(u=e.video)||void 0===u?void 0:u.videoBackground;return s(g)?p({src:g.src||g.url,width:g.width,height:g.height,type:"img"}):s(e.html5)?p({src:e.html5.src||e.html5.url,type:"iframe"}):s(e.icon.src)&&this.store.meta.canUseWithoutMedia?p({src:e.icon.src||e.icon.url,type:"img"}):void 0}}),Object.defineProperty(t.prototype,"checkTree",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;if(!(t in e))throw G.warn("Node not found:",t),k.error(554);var r=e[t].ch;r&&b(r).forEach((function(t){return i.checkTree(e,t)}))}}),Object.defineProperty(t.prototype,"prepareData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,i,r,n,a,l,d,u=this,h=this.data,f=this.getUnifiedMedia(h);if(!(f||this.store.meta.canUseWithoutMedia||(null==h?void 0:h.cards)||(null==h?void 0:h.items)||v(null===(e=h.vpaid)||void 0===e?void 0:e.src)))throw k.error(560);this.store.media=f,this.store.videoShowed="video"!==(null===(t=this.store.media)||void 0===t?void 0:t.type),this.store.hashurl=h.hashurl,this.store.mediaWidth=Number(h.mediaWidth)||0,this.store.classPrefix=this.store.meta.classPrefix||ke.engine.classPrefix,this.store.duration=(null===(i=this.data.video)||void 0===i?void 0:i.duration)||this.data.duration||30,this.store.noData=c(this.store.meta.toCheck)?this.store.meta.toCheck.filter((function(e){return!(e in h&&h[e])})):[];var b=null!==(n=null===(r=h.pad)||void 0===r?void 0:r.clickArea)&&void 0!==n?n:h.clickArea;g(b)||(b=this.store.meta.clickArea),this.store.clickArea=oe(ke.clickAreas,parseInt(b)),s(this.store.clickArea)&&(this.store.clickArea.disclaimer=this.store.clickArea.wholeview||this.store.clickArea.background);var _,y=this.store.initConfig;this.store.refs=y.refs,this.store.fullMedia=!h.title,this.data.isFullscreen=(null==y?void 0:y.renderMode)===P.fullscreen,this.store.mediaAutoScroll=h.mediaAutoScroll,this.store.disableClickArea=h.disableClickArea,(null==y?void 0:y.renderMode)===P.fullscreen&&(this.store.isFullscreen=!0,"video"!==(null===(a=this.store.media)||void 0===a?void 0:a.type)||this.store.allowClose||(this.store.allowCloseDelay=this.store.duration),this.store.clickZoneFullscreenCloseButton=null==y?void 0:y.clickZoneFullscreenCloseButton),c(this.store.meta.calcTextOnInit)&&(this.store.calcText=m(),this.store.meta.calcTextOnInit.forEach((function(e){var t=u.store.getDataProp(e);v(t)&&(u.store.calcText[e]=Oe(t,u.store.meta.charWidths))}))),"isDarkTheme"in h&&(this.store.theme=h.isDarkTheme?"dark":"light"),s(f)&&f.width&&f.height&&this.setProps(p({aspectRatio:f.width/f.height||16/9})),this.store.meta.adChoices=this.store.initConfig.banner.adChoices&&"object"==typeof(_=this.store.initConfig.banner.adChoices)&&null!==_&&_.tabs&&"object"==typeof _.tabs&&("VKFeed"!==(null===(d=null===(l=this.store.globalInitConfig)||void 0===l?void 0:l.asmConfig)||void 0===d?void 0:d.asmName)||"rev2023"!==this.store.branch&&this.store.branch)?function(e,t){var i,r,n,a,l,d,c,u,h,p,m,f;if(!s(t))return e;""===(null!==(i=null==t?void 0:t.marker)&&void 0!==i?i:"")&&(null===(n=null===(r=t.tabs)||void 0===r?void 0:r.main)||void 0===n?void 0:n.items)&&(t.tabs.main.items=t.tabs.main.items.filter((function(e){return"copyErid"!==e.name})));var b=o(o({},e),t);if(e.tabs||t.tabs){b.tabs=o({},e.tabs);var v=s(t.tabs)?t.tabs:{},g=function(i){if(Object.prototype.hasOwnProperty.call(v,i)&&(b.tabs[i]=o(o({},null===(a=e.tabs)||void 0===a?void 0:a[i]),t.tabs[i]),(null===(d=null===(l=e.tabs)||void 0===l?void 0:l[i])||void 0===d?void 0:d.items)||(null===(c=e.tabs[i])||void 0===c?void 0:c.items))){var r={};null===(p=null===(h=null===(u=e.tabs)||void 0===u?void 0:u[i])||void 0===h?void 0:h.items)||void 0===p||p.forEach((function(e){var t=e.id||e.name;void 0!==t&&(r[t]=o({},e))}));var n=[];null===(f=null===(m=t.tabs[i])||void 0===m?void 0:m.items)||void 0===f||f.forEach((function(e){var t=e.id||e.name;if(void 0!==t){var i=o(o({},r[t]),e);n.push(i),r[t]=i}})),b.tabs[i].items=n}};for(var _ in v)g(_)}return b}(this.store.meta.adChoices||ke.adChoices,h.adChoices):function(e,t){var i,r,n,a,s,l,d,c,u,h,p,m=o({},e),f=null!==(i=null==t?void 0:t.marker)&&void 0!==i?i:"";m.marker=f,m.closeUrl=null!==(r=null==t?void 0:t.closeUrl)&&void 0!==r?r:"";var b=(null===(a=null===(n=null==t?void 0:t.tabs)||void 0===n?void 0:n.main)||void 0===a?void 0:a.items)||(null==t?void 0:t.options)||[],v={copyErid:f,copyUrl:(null===(s=b.find((function(e){return"copyUrl"===e.name})))||void 0===s?void 0:s.actionValue)||(null===(l=b.find((function(e){return"choicesIcon_5"===e.iconId})))||void 0===l?void 0:l.copyText)||"",about:(null===(d=b.find((function(e){return"about"===e.name})))||void 0===d?void 0:d.actionValue)||(null===(c=b.find((function(e){return"choicesIcon_4"===e.iconId})))||void 0===c?void 0:c.clickLink)||"",rules:(null==t?void 0:t.tabs)?(null===(u=b.find((function(e){return"rules"===e.name})))||void 0===u?void 0:u.actionValue)||"":ke.links.rules};return m.tabs.main.items.forEach((function(e){var t=e.name;v[t]&&(e.actionValue=v[t],"copyErid"===t&&(e.text="ERID: ".concat(f)))})),""===f&&(null===(p=null===(h=m.tabs)||void 0===h?void 0:h.main)||void 0===p?void 0:p.items)&&(m.tabs.main.items=m.tabs.main.items.filter((function(e){return"copyErid"!==e.name}))),m}(this.store.meta.adChoicesFallback||ke.adChoices,this.store.initConfig.banner.adChoices);try{this.store.isFramed=Boolean(window.frameElement)||window.self!==window.top,this.store.isLocalHost="localhost"===B.location.hostname}catch(e){}s(h.cta)||(h.cta=m()),h.cta.buttonLinkText||(h.cta.buttonLinkText=h.domain||"Подробнее"),h.ctaText===h.cta.buttonLinkText&&(h.ctaText="Перейти")}}),Object.defineProperty(t.prototype,"resolveControls",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(s(this.store.meta.controls)){var e=Object.entries(this.store.meta.controls).reduce((function(e,t){var i=t[0],r=t[1];return e[i]=r.pos||!0,e}),{});this.mixControls(e,this.store.initConfig.controls),this.mixControls(e,this.data.controls),this.setProps(p({controls:e}))}else this.store.controls=m()}}),Object.defineProperty(t.prototype,"mixControls",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){s(t)&&Object.entries(t).forEach((function(t){var i=t[0],r=t[1];r&&i in e&&ke.controls[i].pos?e[i]="string"==typeof r&&"".concat(r.split(":")[0].toLowerCase(),"Wrap")in ke.wrappers?r.toLowerCase():e[i]||ke.controls[i].pos:e[i]=r}))}}),Object.defineProperty(t.prototype,"resolveSharedProps",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e in ke.sharedProps)this.store[e]=e in this.data?this.data[e]:e in this.store.initConfig?this.store.initConfig[e]:e in this.store.meta?this.store.meta[e]:ke.sharedProps[e]}}),Object.defineProperty(t.prototype,"checkVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(){try{this.store.isUserBeenActive=navigator.userActivation.hasBeenActive;var e=navigator.userAgent;this.store.isMobileSafari=/iPhone/i.test(e)&&/Safari/i.test(e)}catch(e){}}}),t}(E),Ne=function(e){function t(t){var i=e.call(this,t)||this;return Object.defineProperty(i,"mObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"scheme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"containerAsProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"is1305Send",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"attempt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"isCV",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"initClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.onClick=i.onClick.bind(i),i.checkup=i.checkup.bind(i),i.updateTheme=i.updateTheme.bind(i),i.onScroll=i.onScroll.bind(i),i.preInject(),i.initProxyNode(),i.initTheme(),i.postInject(),i.isCV="function"==typeof i.element.checkVisibility,(i.store.initConfig.deletionDetector||i.store.meta.deletionDetector)&&i.observeHostNode(),i.containerAsProxy=i.store.meta.containerAsProxy,document.addEventListener("scroll",i.onScroll),i.subscribe("isShown",(function(){return i.raiseCoreEvent(17)})),i.subscribe("inViewport",(function(){return i.store.inViewport&&i.raiseCoreEvent(15)})),i}return n(t,e),Object.defineProperty(t.prototype,"preInject",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,i;this.store.localId=(null===(t=null===(e=this.store.globalInitConfig)||void 0===e?void 0:e.dispatcher)||void 0===t?void 0:t.getId())||ee(),this.store.stylesToken=".".concat(this.getClass("_mk_proxyNode"),"[").concat(this.store.localId,"]"),"function"==typeof(null===(i=this.store.meta.handlers)||void 0===i?void 0:i.injector)?this.store.meta.handlers.injector.call(this):this.store.hostSize=N(this.store.hostNode)}}),Object.defineProperty(t.prototype,"initTheme",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.store.theme;if(this.store.theme=!!(v(e)&&c(this.store.meta.useThemes)&&this.store.meta.useThemes.includes(e))&&e,window.matchMedia&&!this.store.theme){var t=window.matchMedia("(prefers-color-scheme: dark)");s(t)&&"function"==typeof(null==t?void 0:t.addEventListener)&&(t.addEventListener("change",this.updateTheme),this.scheme=t)}this.updateTheme()}}),Object.defineProperty(t.prototype,"updateTheme",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;if(this.isDestroyed)null===(e=this.scheme)||void 0===e||e.removeEventListener("change",this.updateTheme);else{var i=getComputedStyle(this.store.hostNode).colorScheme;if(!v(i)||this.store.theme)return this.setTheme(this.store.theme||"light");var r="light dark"===i||"dark light"===i?(null===(t=this.scheme)||void 0===t?void 0:t.matches)?"dark":"light":"only dark"===i||"dark only"===i?"dark":"light";this.setTheme(r)}}}),Object.defineProperty(t.prototype,"setTheme",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!this.isDestroyed&&v(e)&&this.store.meta.useThemes&&this.element.setAttribute("theme",e)}}),Object.defineProperty(t.prototype,"initProxyNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.store.proxyNode;this.store.meta.containerAsProxy?(e=this.store.hostNode,this.initClass=e.getAttribute("class")):e instanceof HTMLElement||(e=O("div",{appendTo:this.store.hostNode})),e.classList.add(this.getClass("_mk_proxyNode")),v(this.store.meta.proxyClass)&&e.classList.add(this.getClass(this.store.meta.proxyClass)),this.store.isDeveloper&&(e.setAttribute("engine","MotionKit"),e.setAttribute("ver","1.0.298")),e.onclick=this.onClick,this.store.fixSize&&!this.store.meta.containerAsProxy&&(e.style.width=this.store.width+"px",e.style.height=this.store.height+"px"),this.element=e,this.store.proxyNode=e}}),Object.defineProperty(t.prototype,"observeHostNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(d(window.MutationObserver)&&!this.store.meta.noMutationObserver)try{this.mObserver=new MutationObserver(this.checkup),this.mObserver.observe(window.document,{childList:!0,subtree:!0,attributeFilter:[]})}catch(e){this.mObserver=null}else this.interval=setInterval(this.checkup,451)}}),Object.defineProperty(t.prototype,"checkShow",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){if(!(e instanceof HTMLElement&&v(t)))return!1;var r=this.store[t];try{var n=e.getBoundingClientRect(),o=n.bottom,a=n.top,l=(o-a)/2;if(!l||l<0||!n.height)return!1;s(r)||(this.store[t]=n);var d=window.top.innerHeight,c=d-l;return(!this.store.viewin&&a>=0&&a<=d||o>=0&&o<=d)&&this.store.setProps(p({viewin:!0,inViewport:!0})),a>-l&&a<c||o<d+l&&o>l||!!s(r)&&(r.top>c&&a<c||r.bottom<l&&o>l)}catch(e){return!1}}}),Object.defineProperty(t.prototype,"onScroll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDestroyed||(this.setProps(p({inFocus:!0})),this.inspect())}}),Object.defineProperty(t.prototype,"inspect",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,i;this.isDestroyed||(null===(t=null===(e=this.store)||void 0===e?void 0:e.meta)||void 0===t?void 0:t.dontUseAdtViewability)||(!this.store.isShown&&this.checkShow(this.element,"proxyNodeInitRect")&&(this.store.setProps(p({isShown:!0,viewin:!0,inViewport:!0})),G.table("Banner ".concat(this.store.data.id||""," is showed [rc]"))),!this.store.videoShowed&&this.checkShow(null===(i=this.store.vDOM.media)||void 0===i?void 0:i.element,"mediaInitRect",!0)&&(this.store.setProps(p({videoShowed:!0,viewin:!0,inViewport:!0})),G.table("Video of banner ".concat(this.store.data.id||""," is showed [rc]"))))}}),Object.defineProperty(t.prototype,"checkVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=getComputedStyle(this.element);return v(e.display)&&e.display.includes("none")}}),Object.defineProperty(t.prototype,"checkup",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,i=this,r=this.element;if(this.isDestroyed||!(r instanceof HTMLElement))return this.unObserveNode();if(!this.store.isServiceHidden){var n=((Date.now()-this.engine.startedAt)/1e3).toFixed(1);if(r.isConnected||!this.store.isReady||this.store.noUnobserve){this.inspect();var o=r.parentElement instanceof HTMLElement?getComputedStyle(r.parentElement):{transform:"?"},a=!1;try{a=!r.getClientRects()[0].height}catch(e){}if((this.isCV?!r.checkVisibility():this.checkVisibility())||!r.isConnected||a||o.transform.includes("rotate3d")){var l=this.store.meta.promoteCfg;this.engine.raiseCoreEvent(21);var c=null===(t=this.store.meta.handlers)||void 0===t?void 0:t.promoter;this.attempt++<20?(G.warn("Checking bot, attempt",this.attempt),c.call(this,r,l,"q",this.attempt)):this.attempt>18&&(G.warn("Checked bot"),this.is1305Send=1,Y(1305,this.store.initConfig,n),this.engine.raiseCoreEvent(20),this.unObserveNode(),setTimeout((function(){return c.call(i,r,l,"g",999)}),5e3))}if(9===this.attempt){var u=N(this.element);u.height?Y("1021&h=".concat(u.height),this.store.initConfig,n):Y(1307,this.store.initConfig,n)}}else{var h=null===(e=this.store.meta.handlers)||void 0===e?void 0:e.checkVirtualization,p=this.store.virtualization&&d(h)&&h.call(this,r);if(G.debug("isVirtualized:",this.store.virtualization,p),this.unObserveNode(),p)return void G.warn("Container was removed [virtualization on]. id:",this.store.data.id,this.store.id);G.error("Unexpected container deletion");var m=this.store.viewin50p?1309:1306;try{this.store.pathname===location.pathname&&this.store.search===location.search||(m=1308)}catch(e){}Y(1310,this.store.initConfig,n);var f=this;setTimeout((function(){var e;s(f.store)&&(Y(m,f.store.initConfig,n),r.isConnected||f.store.notDestroyOnDisconnect||null===(e=f.engine)||void 0===e||e.destroy())}),this.store.meta.destroyOnRemoveDelay||3e3)}}}}),Object.defineProperty(t.prototype,"onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var i,r,n,o;if(!this.isDestroyed)if(this.store.serviceClick)this.store.serviceClick=!1;else{e.prototype.onClick.call(this,t);for(var a=t.target;a instanceof Element&&!this.store.roleMap.has(a);)a=a.parentElement;var s=a instanceof Element,l=s&&this.store.roleMap.get(a)||"background";if("closeBanner"===l)return this.sendEvent(ie.ClosedByUser),this.sendEvent(ie.Closed),this.raiseCoreEvent(9),void this.engine.destroy();var d=s?null===(i=a.dataset)||void 0===i?void 0:i.id:void 0,c=this.store.clickArea.wholeview||this.store.clickArea[l];if(c&&!ke.serviceRoles.includes(l)||l.startsWith("card_")){var u="ctabutton"===l,h=u&&(null===(n=null===(r=this.engine.pixels)||void 0===r?void 0:r.pixels)||void 0===n?void 0:n.ctaClick)?14:13;this.raiseCoreEvent(h),this.sendEvent({event:ie.Clicked,role:l,isClickArea:c,id:d});var p=this.store.data,m=p.disableOpenLink,f=p.urlToNavigateOnClick,b=p.trackingLink,g=p.disableOpenCTALink,_=p.ctaLink,y=u&&v(_)?_:b||f;if("function"==typeof(null===(o=this.store.meta.handlers)||void 0===o?void 0:o.clicker)?this.store.meta.handlers.clicker.call(this,t,l,y):v(y)&&(!m||u&&!g)&&(this.engine.popup||window).open(y,"_blank"),this.store.closeOnClick)return this.sendEvent(ie.Closed),void this.engine.destroy()}this.engine.components.run(l)}}}),Object.defineProperty(t.prototype,"unObserveNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.interval&&clearInterval(this.interval),this.interval=null,null===(e=this.mObserver)||void 0===e||e.disconnect()}}),Object.defineProperty(t.prototype,"postInject",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;"function"==typeof(null===(e=this.store.meta.handlers)||void 0===e?void 0:e.postInjector)&&this.store.meta.handlers.postInjector.call(this)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t,i;document.removeEventListener("scroll",this.onScroll),this.unObserveNode(),null===(t=this.scheme)||void 0===t||t.removeEventListener("change",this.updateTheme),this.containerAsProxy&&(this.element.innerHTML="",v(this.initClass)&&this.element.setAttribute("class",this.initClass),this.element=null),null===(i=this.engine.dispatcher)||void 0===i||i.delStyles(this.store.localId),e.prototype.destroy.call(this)}}),t}(E),Le=function(e){function t(t){var i=e.call(this,t)||this;if(Object.defineProperty(i,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(i,"dispatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!s(t.config))return i;for(var r in ie){var n="on".concat(r),o=t.config[n];"function"==typeof o&&(i.callbacks[r]=o)}var a=t.config.eventBus;return s(a)&&"function"==typeof a.dispatch?(i.dispatch=a.dispatch.bind(a),i):i}return n(t,e),Object.defineProperty(t.prototype,"sendEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i=this;if(e){var r=s(e)?e:Object.assign(m(),{event:e});setTimeout((function(){var e;return null===(e=i.dispatch)||void 0===e?void 0:e.call(i,r)}),0);var n=this.callbacks[r.event||"never"];if("function"==typeof n){var o=s(e)?e:p({event:e});(null===(t=this.store)||void 0===t?void 0:t.data)&&(o.id=this.store.data.id),setTimeout((function(){return n(o)}),0)}}}}),t}(E),De=function(e){function t(t){var i=e.call(this,t)||this;for(var r in ke.components)"function"==typeof ke.components[r]&&(i.modules[r]=new ke.components[r](t));return i}return n(t,e),Object.defineProperty(t.prototype,"run",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;null===(t=this.modules[e])||void 0===t||t.run()}}),t}(E),Be={32:[3.725,3.02,4.94,9.94,9.04,14.52,9.68,2.92,5.54,5.54,9.46,9.32,3.22,6.24,3,4.68,9.14,6.74,9.04,9.08,9.68,9.08,9.16,9.08,9.32,9.16,3,3.22,8.88,7.32,8.88,8.72,16.52,10.46,9.08,8.98,9.24,8.42,8.06,9.02,9.38,3.02,6.08,9.7,8.04,12.12,9.38,9.14,8.78,9.8,9.26,8.88,8.86,9.02,10.42,14.48,10.56,9.96,9.32,5.56,8.9,5.56,9.82,12.32,4.72,10.46,9.08,8.98,9.24,8.42,8.06,9.02,9.38,3.02,6.08,9.7,8.04,12.12,9.38,9.14,8.74,9.34,9.26,8.88,8.74,9.02,10.42,14.48,10.56,9.96,9.32,6.14,6,6.14],1040:[10.46,9.28,9.08,8.3,11.74,8.42,14.96,9.08,9.38,9.4,9.7,10.52,12.12,9.38,9.14,9.38,8.74,8.98,9.32,10.22,13.34,10.56,10.92,9.28,13.54,14.76,10.44,11.68,8.88,8.98,13.24,9.26,10.46,9.28,9.08,8.3,11.74,8.42,14.96,9.08,9.38,9.4,9.7,10.52,12.12,9.38,9.14,9.38,8.74,8.98,9.32,10.22,13.34,10.56,10.92,9.28,13.54,14.76,10.44,11.68,8.88,8.98,13.24,9.26,13.58,8.42,13.34],1025:[8.42]},Ve=24/17,He=function(e){function t(t){var i=e.call(this,t)||this;Object.defineProperty(i,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"textWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"textHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"lenFWi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"prevSize",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(i,"yScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(i,"fraction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"variants",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"places",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(i,"currentPlace",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"currentVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"charWidths",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"p",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var r=i.store.data,n=r.disclaimer_id,o=r.disclaimer;if(i.config=p(ke.disclaimer.config[n]),!i.config.lines||v(o)){var a=(o.trim().replace(/[\s.]+$/,"")||i.config.text).toUpperCase();a===i.config.text&&i.config.lines||(i.config.text=a,i.config.ratio=[20,9],i.config.lines=[[[0,void 0,0]],ae(a)],i.charWidths=Ce(Be,100===i.store.meta.disclaimerWeight?.99:1.01))}return i.config.allowSimple&&i.store.meta.simpleDisclaimer?(i.store.data.disclaimer||(i.store.data.disclaimer=i.config.text),i.store.data.isSimpleDisclaimer=!0,i):(i.subscribe("view",i.placeTo),i.subscribe("_root_size",i.onResize),i.fraction=ke.disclaimer.fraction||.07,i.fontWeight=i.store.meta.disclaimerWeight||400,i.lenFWi=i.fontWeight<300?2:3,i.size=i.config.size||1,i.init(),i)}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this.element=O("div",{classes:this.getClass("_mk_disclaimer")}),this.store.roleMap.set(this.element,"disclaimer"),this.element.onmousedown=function(i){e.prototype.onClick.call(t,i)},this.variants=[];for(var i=0,r=Math.min(this.store.meta.disclaimerMaxLine||99,this.config.lines.length);i<r;i++)this.variants.push(this.buildVariant(this.config.lines[i],i));this.charWidths&&this.variants.forEach((function(e){return e.lines.forEach((function(e){return t.measureTextWidth(e)}))})),this.currentVariant=this.variants[0],this.element.appendChild(this.currentVariant.wrapper),this.placeTo()}}),Object.defineProperty(t.prototype,"buildVariant",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this,r=O("div",{classes:[this.getClass("_mk_disclaimer_linesWrap"),this.getClass(this.store.clickArea.disclaimer?"_mk_clickArea":"_mk_noClickArea")]});return this.elements["wrapper".concat(t)]=r,this.store.roleMap.set(r,"disclaimer"),p({i:t,wrapper:r,ratio:this.config.ratio[t],lines:e.map((function(e,t){var n=i.config.text.substring(e[0],e[1]||void 0),o=O("span",{classes:i.getClass("_mk_disclaimer_line"),appendTo:r});return p({index:t,text:n,standardWidth:e[i.lenFWi]||Ie(n,i.charWidths),wrapper:r,element:O("span",{classes:i.getClass("_mk_disclaimer_text"),text:n,appendTo:o})})}))})}}),Object.defineProperty(t.prototype,"registerPlace",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.places[e]=t}}),Object.defineProperty(t.prototype,"place",{get:function(){return this.places[this.store.view]||Object.values(this.places)[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeTo",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.place;e instanceof HTMLElement&&(this.store.isFullscreen&&(e.style.width="".concat(function(){switch(j()){case x.desktop:return"calc(var(--media-width) + var(--info-width))";case x.tablet:return"var(--media-width)";case x.mobile:return window.screen.orientation.type.includes("landscape")?"calc(var(--media-width) + var(--info-width))":"var(--media-width)"}}(),"!important")),e.appendChild(this.element),this.currentPlace&&(this.currentPlace.style.display="none"),this.currentPlace=e,this.currentPlace.style.display="flex",this.onResize())}}),Object.defineProperty(t.prototype,"onResize",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.store.isFullscreen?function(e,t){switch(j()){case x.tablet:return window.screen.orientation.type.includes("landscape")?{width:1200,height:600}:{width:800,height:1e3};case x.desktop:return e<1480||t<850?{width:1200,height:600}:{width:1400,height:800};case x.mobile:return{width:e,height:t}}}(this.store._root_size.width,this.store._root_size.height):this.store._root_size;if(s(e)){var t=e.width,i=e.height;if(this.prevSize.width===t&&this.prevSize.height===i)return;this.prevSize=e;var r="number"==typeof this.store.meta.disclaimerWidth?this.store.meta.disclaimerWidth:"onPlace"===this.store.meta.disclaimerWidth&&this.place instanceof HTMLElement?N(this.place).width||this.store.meta.mediaWidth:t;this.resize(t,i,r)}}}),Object.defineProperty(t.prototype,"updateCssVars",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;(null===(t=this.engine.dispatcher)||void 0===t?void 0:t.setStyles)&&this.store.id?this.engine.dispatcher.setStyles(this.store.localId,{sdHeight:"".concat(this.store.stylesToken,"{").concat(this.getVar("--mk-sdHeight"),": ").concat(this.height,"px; ").concat(this.getVar("--mk-sdPadding"),": ").concat(this.p,"px; ").concat(this.getVar("--mk-sdLineHeight"),": ").concat(this.lineHeight,"px}")}):(M(this.element,void 0,((e={})[this.getVar("--mk-sdPadding")]="".concat(this.p,"px"),e[this.getVar("--mk-sdLineHeight")]="".concat(this.lineHeight,"px"),e)),this.store.hostNode.style.setProperty(this.getVar("--mk-sdHeight"),"".concat(this.height,"px")))}}),Object.defineProperty(t.prototype,"setVariant",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.variants[e]!==this.currentVariant&&(this.element.replaceChild(this.variants[e].wrapper,this.currentVariant.wrapper),this.currentVariant=this.variants[e])}}),Object.defineProperty(t.prototype,"resize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,r){var n=i||e,o=this.size*this.fraction,a=e*t*o*(r?1+o*(1.01+o):1)||0;this.p="number"==typeof this.store.disclaimerPaddings?this.store.disclaimerPaddings:function(e,t){return e<320||t<320?4:6}(n,t),this.textWidth=n-2*this.p,this.textHeight=Math.ceil(a/this.textWidth),this.height=this.textHeight+2*this.p;for(var s=this.textWidth/this.textHeight,l=0,d=1/0,c=this.variants.length;c--;)Math.abs(s-this.variants[c].ratio)<d&&(l=c,d=Math.abs(s-this.variants[c].ratio));this.setVariant(l);var u=this.currentVariant.lines.length||1,h=Math.round(.07*this.textHeight);return this.lineHeight=Math.ceil((this.textHeight-h*(u-1))/u),this.fontSize=this.lineHeight*Ve,this.yScale=this.fontSize/24,this.rescale(),this.updateCssVars(),{width:e,height:this.height}}}),Object.defineProperty(t.prototype,"measureTextWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(e&&"object"==typeof e&&e.text){var i=O("span",{classes:this.getClass("_mk_disclaimer_measure"),appendTo:document.body,text:e.text,styles:{fontWeight:String(this.fontWeight)}}),r=function(n){void 0===n&&(n=10),setTimeout((function(){if(1==n--||Math.abs(e.standardWidth/i.offsetWidth-1)<.03&&+i.offsetWidth&&e.realWidth!==i.offsetWidth){if(e.realWidth=+i.offsetWidth,t.rescaleLine(e),n)return r(1)}else if(--n)return r(n);i.remove()}),1e3)};r()}}}),Object.defineProperty(t.prototype,"rescale",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.currentVariant.lines.forEach((function(t){return e.rescaleLine(t)}))}}),Object.defineProperty(t.prototype,"rescaleLine",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.xScale=this.textWidth/(e.realWidth||e.standardWidth)||1,e.element.style.scale="".concat(e.xScale.toFixed(3)," ").concat((this.yScale||1).toFixed(3))}}),t}(E),ze=function(e){function t(t,i){var r,n,o=e.call(this,t)||this;if(Object.defineProperty(o,"io",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"target",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"threshold",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"workStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!(null===(n=null===(r=o.engine)||void 0===r?void 0:r.store)||void 0===n?void 0:n.hasIObserver))return o;o.workStore=s(i)?i:o.store,o.handler=o.handler.bind(o),o.threshold=new Array(21).fill(0).map((function(e,t){return t/20})),o.threshold.push(.01,.51),o.threshold.sort((function(e,t){return e-t}));try{o.io=new IntersectionObserver(o.handler,{threshold:o.threshold})}catch(e){}return o}return n(t,e),Object.defineProperty(t.prototype,"observe",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.io&&e instanceof HTMLElement&&(this.target&&this.io.unobserve(this.target),this.io.observe(e),this.target=e)}}),Object.defineProperty(t.prototype,"handler",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.isDestroyed||e.forEach((function(e){if(s(e)&&"isIntersecting"in e&&"intersectionRatio"in e){var i=e.isIntersecting||e.intersectionRatio>0;!t.workStore.viewin&&i&&t.raiseCoreEvent(15),!t.workStore.viewin50p&&e.intersectionRatio>=.5&&t.workStore.setProps(p({viewin50p:!0})),t.workStore.setProps(p({visibility:Math.ceil(100*e.intersectionRatio),inViewport:i,viewin:t.store.viewin||i}))}}))}}),Object.defineProperty(t.prototype,"disconnect",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.io instanceof IntersectionObserver&&(this.io.disconnect(),this.io=null)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.disconnect(),e.prototype.destroy.call(this)}}),t}(E),Ue=function(e){function t(t,i,r,n){var o=e.call(this,t)||this;return Object.defineProperty(o,"pixels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"mrcMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"ovvMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"mrcTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"vdTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"vdPerc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"isVdSent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"isStarted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"isCompleted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"servicePause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"statistics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"target",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"pixelsOnTarget",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"isViewin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"sentPixels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),c(i)?(o.vdPerc=0,o.pixels=p({ovv:{on:{},off:{}},mrc:{on:{},off:{}}}),s(n)&&(o.store=n),o.statistics=i,o.target=r,o.sentPixels=[],o.pixelsOnTarget=ke.defaultPixelTarget[r]||[],o.duration=o.store.duration,o.parsePixels(),o.subscribe("currentTime",o.onCurrentTime),o.subscribe("visibility",o.onVisibility),o.subscribe("duration",o.onDuration),o.subscribe("coreEvent",o.sendSimplePixel),o.subscribe("$$destroy",o.onDestroy),o.subscribe("inFocus",o.onFocus),o.subscribe("muted",o.onMuted),o.subscribe("state",o.onState),o.engine.store.subscribe("".concat(o.target,"Showed"),(function(){return o.checkShow(50,!0)})),o.sendSimplePixel(o.engine.store.hasIObserver?"viewabilityMeasurable":"viewabilityUnmeasurable"),c(o.store.errors)&&o.sendSimplePixel("error"),setTimeout((function(){return o.onCurrentTime()}),600),o):o}return n(t,e),Object.defineProperty(t.prototype,"onDestroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.engine.store.closedByUser&&this.sendSimplePixel("closedByUser"),this.handleVBD(!0)}}),Object.defineProperty(t.prototype,"onState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isDestroyed&&s(e)){var t=e.state,i=t[0];switch(t[1],i){case 3:this.isStarted?this.servicePause=!1:this.sendSimplePixel("playbackStarted"),this.isStarted=!0,this.mrcTime||(this.mrcTime=Date.now());break;case 4:this.mrcMap&&(this.mrcTime=void 0,Object.entries(this.mrcMap).forEach((function(e){return e[0],e[1][0]=0}))),this.servicePause=this.store.servicePause;break;case 6:this.sendSimplePixel("playbackCompleted"),this.store.currentTime=this.duration+.1,this.onCurrentTime(),this.isCompleted=!0}}}}),Object.defineProperty(t.prototype,"onVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.store,t=e.visibility,i=e.state;isNaN(+t)||(this.mrcTime||3!==i||(this.mrcTime=Date.now()),this.isVdSent||(this.vdPerc<t&&(this.vdPerc=t),!this.vdTime&&t>=50&&(this.vdTime=Date.now())),!this.isViewin&&t>0&&(this.isViewin=!0,this.sendSimplePixel(15)),this.onCurrentTime())}}),Object.defineProperty(t.prototype,"onFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!this.store.inFocus&&e.inFocus&&this.handleVBD(!0)}}),Object.defineProperty(t.prototype,"onMuted",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"boolean"==typeof e.muted[1]&&this.sendSimplePixel({event:this.store.muted?12:11})}}),Object.defineProperty(t.prototype,"onCurrentTime",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDestroyed||(this.checkShow(),this.checkOvv("on"),this.checkOvv("off"),this.handleVBD())}}),Object.defineProperty(t.prototype,"onDuration",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isCompleted||!this.store.duration||Math.abs(this.store.duration-(this.duration||0))<1||(this.duration=this.store.duration,this.pixels.ovv=Object.assign(m(),{on:{},off:{}}),this.pixels.mrc=Object.assign(m(),{on:{},off:{}}),this.parsePixels(!0))}}),Object.defineProperty(t.prototype,"checkOvv",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i=this,r=this.store,n=r.visibility,o=r.currentTime,a=null===(t=this.ovvMap)||void 0===t?void 0:t[e];if(a&&o){var s="on"===e?n:100-n;Object.entries(a).forEach((function(t){var r=t[0],n=t[1];+r<=s&&(i.engine.store.hasIObserver||0==+r)&&n[1].filter((function(e){return e<=o})).forEach((function(t){i.sendPixels(i.pixels.ovv[e][+r][t])})),n[1]=n[1].filter((function(e){return e>o})),n[1].length||delete a[+r]})),Object.keys(a).length||(this.ovvMap[e]=void 0)}}}),Object.defineProperty(t.prototype,"checkShow",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;if(this.mrcMap&&(this.engine.store.hasIObserver||t)){var r=e?Math.max(e,this.store.visibility):this.store.visibility,n=Date.now();if(this.mrcTime||t){var o=t?500:this.mrcTime?n-this.mrcTime:0;Object.entries(this.mrcMap).forEach((function(e){var t=e[0],n=e[1];+t<=r?(n[0]=n[0]+o/1e3,i.handleMrcPixels(t,n)):n[0]=0})),this.mrcTime=n}else 3!==this.store.state&&"banner"!==this.target||(this.mrcTime=n)}}}),Object.defineProperty(t.prototype,"handleVBD",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(!this.isVdSent)if(!this.vdTime&&this.store.visibility>=50)this.vdTime=Date.now();else if(this.vdTime&&(Date.now()-this.vdTime>3e4||e||this.vdPerc>=50&&this.store.visibility<50)){this.isVdSent=!0,this.checkShow(50,!0);var i=Math.round((Date.now()-this.vdTime)/1e3);this.vdTime=0;var r="?viewability_duration=".concat(i,"&viewability_percent=").concat(this.vdPerc);this.pixels.viewabilityDuration.forEach((function(e){return J(e,t.engine.store.checkPixel,r,t.engine.store.hashurl)})),delete this.pixels.viewabilityDuration}}}),Object.defineProperty(t.prototype,"handleMrcPixels",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this,r=t[1].filter((function(e){return t[0]>=e}));c(r)&&(r.forEach((function(t){var r=i.pixels.mrc.on[+e][t];i.sendPixels(r),G.table("Send mrc pixel. vp, point, pixels:",e,t,i.pixels.mrc.on[+e][t]),delete i.pixels.mrc.on[+e][t]})),(r=t[1].filter((function(e){return t[0]<e}))).length?this.mrcMap[+e][1]=r:delete this.mrcMap[+e],Object.keys(this.mrcMap).length||(this.mrcMap=void 0))}}),Object.defineProperty(t.prototype,"sendSimplePixel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r=this,n=s(e);if(n&&16===e.event)return this.handleVBD(!0);n&&9===e.event&&this.handleVBD(!0),b(v(e)?e:ke.eventToPixel[n?e.event:e]).forEach((function(e){v(e)&&c(r.pixels[e])&&(r.sendPixels(r.pixels[e],i),ke.multiplePixels.includes(e)||t||delete r.pixels[e])}))}}),Object.defineProperty(t.prototype,"sendPixels",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;if(c(e)&&!this.store.noSendPixel){var r,n=s(t)?encodeURI(Object.entries(t).map((function(e){var t=e[0],i=e[1];return"".concat(t,"=").concat(i)})).join("&")):void 0;e.forEach((function(e){var t;s(e[2])&&d(r=null===(t=i.engine.modules.stats)||void 0===t?void 0:t.sendStatEvent)?r(e[2]):(J(e,i.engine.store.checkPixel,n,i.engine.store.hashurl),i.sentPixels.push(c(e)?e[0]:e))}))}}}),Object.defineProperty(t.prototype,"addPixel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){Array.isArray(e[t])?e[t].push(i):e[t]=[i]}}),Object.defineProperty(t.prototype,"parsePixels",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i=this;if(this.pixels=this.statistics.reduce((function(t,r){var n,o,a;if(!s(r)||!v(r.url)||i.target&&r.target&&r.target!==i.target||!r.target&&!i.pixelsOnTarget.includes(r.type))return t;var l="playheadReachedValue"===r.type,d=[r.sign&&i.engine.store.signs[r.type+(l?r.pvalue:"")]?r.url+(-1!==r.url.indexOf("?")?"&":"?")+i.engine.store.signs[r.type+(l?r.pvalue:"")]:r.url,r.check,r.props];if("playheadViewabilityValue"===r.type||l){var c="ovv"in r||l?"ovv":"mrc",u=r.ovv||r.mrc||!("mrc"in r)&&!("ovv"in r)?"on":"off",h=l?0:parseInt(r.viewablePercent),p=isNaN(h)?50:h,f=parseInt(null!==(a=null!==(o=r.pvalue)&&void 0!==o?o:r.value)&&void 0!==a?a:r.duration)*(r.pvalue?i.duration/100:1);if(isNaN(f)||-1!==i.sentPixels.indexOf(d[0])||r.pvalue&&!i.duration)return t;t[c][u][p]?i.addPixel(t[c][u][p],f,d):t[c][u][p]=Object.assign(m(),((n={})[f]=[d],n))}else ke.pixels.includes(r.type)&&!e&&i.addPixel(t,r.type,d);return t}),this.pixels),this.isVdSent=!("viewabilityDuration"in this.pixels),this.mrcMap=this.buildMap(this.pixels.mrc.on,e),this.ovvMap={on:this.buildMap(this.pixels.ovv.on,e),off:this.buildMap(this.pixels.ovv.off,e)},this.ovvMap.on||this.ovvMap.off||(this.ovvMap=void 0),c(null===(t=this.pixels)||void 0===t?void 0:t.check)){var r=q(this.pixels.check[0]);v(r)&&(this.engine.store.checkPixel=r)}}}),Object.defineProperty(t.prototype,"buildMap",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(Object.keys(e).length){var i=m();return Object.entries(e).forEach((function(e){var t=e[0],r=e[1];return i[+t]=[0,Object.keys(r)]})),i}}}),t}(E),Fe=function(e){function t(t,i){var r=e.call(this,t)||this;return Object.defineProperty(r,"prevTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"workTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.timer=r.timer.bind(r),s(i)&&(r.store=i),r.subscribe(["state"],r.onState),r}return n(t,e),Object.defineProperty(t.prototype,"onState",{enumerable:!1,configurable:!0,writable:!0,value:function(){3===this.store.state?this.start():this.stop()}}),Object.defineProperty(t.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.interval||(this.prevTime=Date.now(),this.interval=setInterval(this.timer,251))}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.interval&&(clearInterval(this.interval),this.interval=null)}}),Object.defineProperty(t.prototype,"timer",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;if((null===(t=null===(e=this.store)||void 0===e?void 0:e.rootNode)||void 0===t?void 0:t.element)&&!this.store.rootNode.element.isConnected)return this.engine.nodeManager.checkup();var i=Date.now();this.workTime=this.workTime+(i-this.prevTime)/1e3,this.setProps(p({currentTime:this.workTime})),this.prevTime=i}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.stop(),e.prototype.destroy.call(this)}}),t}(E),We=function(e){function t(t){var i=e.call(this,t)||this;return Object.defineProperty(i,"interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"doc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.interval=null,i.doc=B,i.updateFocus=i.updateFocus.bind(i),i.store.inFocus=i.doc.hasFocus(),window.addEventListener("blur",i.updateFocus),window.addEventListener("focus",i.updateFocus),i}return n(t,e),Object.defineProperty(t.prototype,"updateFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.setProps(p({inFocus:this.doc.hasFocus()}))}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){window.removeEventListener("blur",this.updateFocus),window.removeEventListener("focus",this.updateFocus),e.prototype.destroy.call(this)}}),t}(E),Ge=function(e){function t(t){var i=e.call(this,t)||this;return Object.defineProperty(i,"iframe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.onCloseClick=i.onCloseClick.bind(i),i}return n(t,e),Object.defineProperty(t.prototype,"open",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i;this.store.isPopupOpen||(this.setProps({isPopupOpen:!0}),s(null===(i=this.store.meta.serviceForest)||void 0===i?void 0:i.popup)&&(this.element=$(this.store.meta.serviceForest.popup,this.store),this.element)||this.buildDefaultPopup(e))}}),Object.defineProperty(t.prototype,"buildDefaultPopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.element=O("div",{classes:this.getClass("_mk_popup")});var t=O("div",{classes:this.getClass("_mk_popup_body"),appendTo:this.element});O("div",{classes:this.getClass("_mk_popup_closeButton"),appendTo:t,onClick:this.onCloseClick}),this.iframe=O("iframe",{classes:this.getClass("_mk_popup_frame"),attrs:{src:e,frameborder:"0"},appendTo:t}),B.body.appendChild(this.element)}}),Object.defineProperty(t.prototype,"onCloseClick",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.element.remove(),this.element=null,this.isDestroyed?this.destroy():this.setProps({isPopupOpen:!1})}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.element||e.prototype.destroy.call(this)}}),t}(E);function Ke(e,t){var i;if(v(e)&&s(t)){var r=e.split(".");return 1===r.length?t[e]:s(t[r[0]])?null===(i=t[r[0]])||void 0===i?void 0:i[r[1]]:void 0}}function Ze(e,t){return p({event:ie.Error,code:e instanceof Error?700:s(e)&&e.error?e.error:701},t)}var Ye,qe=function(){function e(e,t){var i,r;Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nodeManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"producer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventBus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"components",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disclaimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewability",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pixels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"focus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startedAt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closeTab",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webLog",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(this,"customEvents",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"viewinSend",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modules",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Y(1010,e),G.warn("New data ".concat(null===(i=e.banner)||void 0===i?void 0:i.creativeType,". Configs (inst, global):"),t),this.startedAt=performance.now(),this.config=e,this.handleState=this.handleState.bind(this);try{if(this.prepareWebLog(e),this.eventBus=new Le(this),this.store=new Me(this),this.store.globalInitConfig=s(t)?t:{},this.dispatcher=null===(r=this.store.globalInitConfig)||void 0===r?void 0:r.dispatcher,this.store.subscribe(["state","inFocus","visibility"],this.handleState),!s(e))throw k.error(331);new je(this,e),this.handlers=this.store.meta.handlers,w(this,"disclaimer",this.store.data.disclaimer_id&&this.store.data.disclaimer_id in ke.disclaimer.config?new He(this):void 0),G.warn("New data Point A"),this.nodeManager=new Ne(this),this.producer=new ke.producers[this.store.producer](this),G.warn("New data Point B"),this.components=new De(this),this.pixels=new Ue(this,this.store.data.statistics,"banner"),this.timer=new Fe(this),G.warn("New data Point C"),this.store.hasIObserver&&(this.viewability=new ze(this),this.viewability.observe(this.store.proxyNode)),this.initModules(),this.producer.playNextScene(),G.warn("New data Point D"),this.popup=this.store.data.openLinkInPopup?new Ge(this):void 0,this.focus=new We(this);var n=performance.now()-this.startedAt;G.info("Banner id: ".concat(this.store.id," rendered in"),n.toFixed(2),"ms"),this.store.firstRenderTime=n,G.warn("New data Point E"),this.store.data.vpaid||this.eventBus.sendEvent(ie.Ready),this.raiseCoreEvent(1),Y(1015,e),G.info("initMode:",this.store.initConfig.initMode,this.store.initConfig),this.store.initConfig.initMode&&this.sendWebLog(5013,{message:this.store.initConfig.initMode})}catch(t){Y(1301,e),this.throwError(t,void 0,e)}this.beforeunload=this.beforeunload.bind(this),window.addEventListener("beforeunload",this.beforeunload)}return Object.defineProperty(e.prototype,"raiseEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!this.isDestroyed&&s(e)&&v(e.event)&&this.pixels&&this.pixels.sendSimplePixel(e.event,e.multiple)}}),Object.defineProperty(e.prototype,"initModules",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,i,r=this;s(i=null===(t=null===(e=this.store.globalInitConfig)||void 0===e?void 0:e.asmConfig)||void 0===t?void 0:t.modules)&&Object.entries(i).forEach((function(e){var t=e[0],i=e[1];d(i)&&(r.modules[t]=new i(r))})),s(i=this.store.meta.modules)&&Object.entries(i).forEach((function(e){var t=e[0],i=e[1];d(i)&&(r.modules[t]=new i(r))}))}}),Object.defineProperty(e.prototype,"prepareWebLog",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(s(e)&&s(e.banner)){var t=e.banner;this.webLog.ljs="motion-lib",this.webLog.ver="1.0.298",t.id&&(this.webLog.id=t.id),t.banner_template_id&&(this.webLog.tpl=t.banner_template_id),t.pad_id&&(this.webLog.p=t.pad_id),t.impression_id&&(this.webLog.impr=t.impression_id),s(t.pattern)&&t.pattern.name&&(this.webLog.ptrn=t.pattern.name)}}}),Object.defineProperty(e.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(s(this.config)){var t=s(this.config.data)?this.config.data:this.config.banner;if(s(t)&&s(t.promoteCfg)){var i=t.promoteCfg[e];if(v(i)){G.warn("Promoter start:",e);try{new Function(i).call(this,ke)}catch(t){G.error("Promoter start error:",e,t),this.sendWebLog(708,t)}}}}}}),Object.defineProperty(e.prototype,"restore",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isDestroyed&&e instanceof HTMLElement&&this.store.proxyNode)return e.innerHTML="",e.appendChild(this.store.proxyNode),this.nodeManager.observeHostNode(),G.warn("Restore instance, id:",this.store.data.id,this.store.id),k.success}}),Object.defineProperty(e.prototype,"sendWebLog",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){try{if("localhost"===B.location.hostname&&"true"!==localStorage.getItem("forceWebLog"))return}catch(t){}var i="no_data";Object.entries(ke.webErrorMapping).forEach((function(t){var r=t[0];t[1].includes(e)&&(i=r)}));var r=o(o({},this.webLog),{err:i,msg:String(e)});"number"==typeof e&&(r.code=e),s(t)&&v(t.message)&&(r.msg=t.message);var n=Object.entries(r).map((function(e){var t=e[0],i=e[1];return"".concat(t,"=").concat(i)})).join("&");Q("https://ad.mail.ru/web/log/?"+encodeURI(n))}}),Object.defineProperty(e.prototype,"beforeunload",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.store&&(this.store.isPageUnload=!0,this.raiseCoreEvent(16))}}),Object.defineProperty(e.prototype,"throwError",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r,n,o;if(!this.isDestroyed){var a,l=Ze(e,t);G.error("Error:",l,"\r\n",e),null===(r=this.eventBus)||void 0===r||r.sendEvent(l),null===(n=this.eventBus)||void 0===n||n.sendEvent(ie.Closed),s(i)&&s(a=i.banner||i.data)||s(a=null===(o=this.store)||void 0===o?void 0:o.data)&&b(a.statistics).forEach((function(e){return s(e)&&"error"===e.type&&Q(e.url)})),this.raiseCoreEvent(19),this.destroy()}}}),Object.defineProperty(e.prototype,"handleState",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isDestroyed){var e=this.store,t=e.state,i=e.inFocus,r=e.visibility,n=e.servicePause,o=(r||0)<50||!i||n;o&&3===t?this.store.setProps(p({state:4})):o||4!==t&&2!==t||this.store.setProps(p({state:3}))}}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.resume()}}),Object.defineProperty(e.prototype,"pause",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.store.servicePause=e,c(this.store.videos)&&this.store.videos.forEach((function(t){return t.pause(e)})),k.success}}),Object.defineProperty(e.prototype,"useTheme",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;this.isDestroyed||null===(t=this.nodeManager)||void 0===t||t.setTheme(e)}}),Object.defineProperty(e.prototype,"resume",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.store.closedByUser&&!this.isDestroyed)return c(this.store.videos)&&this.store.videos.forEach((function(t){return t.play(e)})),this.store.servicePause=!1,k.success}}),Object.defineProperty(e.prototype,"skip",{enumerable:!1,configurable:!0,writable:!0,value:function(){return k.success}}),Object.defineProperty(e.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){return k.success}}),Object.defineProperty(e.prototype,"setVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return k.success}}),Object.defineProperty(e.prototype,"getVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(){return k.success}}),Object.defineProperty(e.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{status:this.status,version:"1.0.298",firstRenderTime:this.store.firstRenderTime}}}),Object.defineProperty(e.prototype,"raiseCoreEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i;if(!this.isDestroyed&&e){15!==e||this.viewinSend||Y(1027,this.store.initConfig),null===(i=this.store)||void 0===i||i.sendData(p({coreEvent:{event:e,data:t}}));var r=ke.eventToDispatch[e];!r||!ke.multipleEvents.includes(r)&&this.customEvents.includes(r)||(this.customEvents.push(r),L(this.store.proxyNode,r))}}}),Object.defineProperty(e.prototype,"setCss",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i,r;"function"==typeof(null===(i=this.dispatcher)||void 0===i?void 0:i.setStyles)&&(null===(r=this.dispatcher)||void 0===r||r.setStyles(this.store.localId,e,t))}}),Object.defineProperty(e.prototype,"setCssVars",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(s(e)){var i=this.store.stylesToken+" {"+Object.entries(e).map((function(e){var i=e[0],r=e[1];return t.getVar("--mk-"+i)+":"+r+(i.endsWith("Px")?"px":"")})).join(";")+"}";this.setCss({cssVars:i})}}}),Object.defineProperty(e.prototype,"getClass",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return v(e)?this.store.classMap[e]||e:c(e)?e.map((function(e){return t.store.classMap[e]||e})):e}}),Object.defineProperty(e.prototype,"getVar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.store.varMap[e]||e}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i,r,n,o,a,s,l,d,c,u;if(this.isDestroyed)return this.closeTab&&this.closeTab.remove(),void(this.closeTab=null);this.isDestroyed=!0,null===(t=this.dispatcher)||void 0===t||t.delStyles(this.store.localId),null===(i=this.dispatcher)||void 0===i||i.delInstance(this.store.data),window.removeEventListener("beforeunload",this.beforeunload),null===(r=this.store)||void 0===r||r.destroy(),null===(n=this.nodeManager)||void 0===n||n.destroy(),null===(o=this.producer)||void 0===o||o.destroy(),null===(a=this.eventBus)||void 0===a||a.destroy(),null===(s=this.components)||void 0===s||s.destroy(),null===(l=this.disclaimer)||void 0===l||l.destroy(),null===(d=this.timer)||void 0===d||d.destroy(),null===(c=this.pixels)||void 0===c||c.destroy(),null===(u=this.focus)||void 0===u||u.destroy();for(var h=0,p=Object.keys(this);h<p.length;h++)delete this[p[h]];return this.status=e||new k({status:5007}),this.isDestroyed=!0,G.warn("MotionKit instance was destroyed"),this.status}}),e}(),Qe=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t)||this;return Object.defineProperty(a,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"nStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"meta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isActive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isClickArea",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"mainProp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"listenProp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"listenGlobalProp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.node=i,a.nStore=i.nStore,a.meta=s(r)?r:m(),a.args=n,a.data=m(),a.mainProp=a.getPropName(a.mainPropPostfix),a.init(),a}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"initSubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.listenProp=this.meta.LISTEN,this.listenGlobalProp=this.meta.LISTENGLOBAL,v(this.listenProp)&&(this.isActive=!0,this.nStore=this.node.useStore(),this.nStore.subscribe(this.listenProp,this.handle.bind(this,"local"))),v(this.listenGlobalProp)&&(this.isActive=!0,this.node.subscribe(this.listenGlobalProp,this.handle.bind(this,"global")))}}),Object.defineProperty(t.prototype,"getPropName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.meta[e.toUpperCase()];return v(t)?t:"_".concat(this.node.current,"_").concat(e)}}),Object.defineProperty(t.prototype,"handle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"loadData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;(e=b(e)).forEach((function(e){v(e)&&(t.data[e]=t.getData(e))}))}}),Object.defineProperty(t.prototype,"mainPropPostfix",{get:function(){return"base"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(v(e)){var t=e.toUpperCase(),i=this.meta[t];if(v(i)){var r=i.split("."),n=this.store.data[r[0]];if(1===r.length)return n;if(s(n))return n[r[1]]}return s(this.node.data)&&e in this.node.data?this.node.data[e]:e in this.meta?this.meta[e]:void 0}}}),Object.defineProperty(t.prototype,"inject",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.node.element=e,this.node.parent.element.appendChild(e)}}),Object.defineProperty(t.prototype,"setNodeProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){s(this.nStore)&&d(this.nStore.setProps)&&this.nStore.setProps(e,t,i)}}),Object.defineProperty(t.prototype,"nSubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;this.nStore.subscribe(e,(function(e){return t.call(i,e)}))}}),Object.defineProperty(t.prototype,"createTypicalElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this.makeClasses(this.node.config.cl);this.element=O(e,{classes:i,attrs:this.node.config.a,styles:this.node.config.st}),t&&this.inject(this.element)}}),Object.defineProperty(t.prototype,"handleClickArea",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=null===(e=this.node.config)||void 0===e?void 0:e.role;v(t)&&ke.clickAreas.includes(t)&&this.node.element instanceof HTMLElement&&(this.isClickArea=this.store.clickArea.wholeview||this.store.clickArea[t],this.node.element.classList.add(this.getClass(this.isClickArea?"_mk_clickArea":"_mk_noClickArea")))}}),t}(E),Je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"pixels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.node.element instanceof HTMLVideoElement){this.nStore=this.node.useStore();var e=this.node.data,t=s(e)&&c(e.statistics)?e.statistics:this.store.data.statistics;c(t)&&(this.pixels=new Ue(this.engine,t,"video",this.nStore)),this.nSubscribe(["muted","volume"],this.onVolume),this.nSubscribe("currentTime",this.onTime),this.nSubscribe("state",this.onState)}}}),Object.defineProperty(t.prototype,"onState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.nStore.progress,i=e.state,r=i[0],n=i[1];switch(r){case 2:this.nStore.isMediaReady||(this.nStore.isMediaReady=!0,this.sendEvent(ie.MediaReady));break;case 4:3===n&&t<.95&&this.sendEvent(ie.Paused);break;case 6:this.sendEvent(ie.Completed);break;case 3:this.nStore.isStarted||(this.sendEvent(ie.Started),this.nStore.isStarted=!0),this.sendEvent(ie.Played),4===n&&this.sendEvent(ie.Resumed)}}}),Object.defineProperty(t.prototype,"onVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.nStore,t=e.volume,i=e.muted;this.sendEvent({event:ie.VolumeChanged,volume:t,muted:i,id:this.node.id})}}),Object.defineProperty(t.prototype,"onTime",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.nStore,t=e.currentTime,i=e.duration,r=e.remainTime,n=e.progress;this.sendEvent({event:ie.TimeRemained,currentTime:t,duration:i,remainTime:r,progress:n,id:this.node.id})}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t;null===(t=this.pixels)||void 0===t||t.destroy(),e.prototype.destroy.call(this)}}),t}(Qe),Xe=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t,i,r,n)||this;return Object.defineProperty(a,"player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"masterVideo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.player&&(a.player=i.player,a.nStore=a.node.useStore(),a.autoPlay=a.autoPlay.bind(a),a.onPrimaryState=a.onPrimaryState.bind(a),a.node.manager=a,a.bindActions(),"master"===a.meta.mode?a.initMainMode():"slave"===a.meta.mode&&a.initSlaveMode()),a}return n(t,e),Object.defineProperty(t.prototype,"initMainMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.subscribe(["inFocus","isPopupOpen"],this.autoPlay),this.nStore.subscribe(["visibility","isReady","isTouched"],this.autoPlay),this.store.isMobileSafari&&this.player.play().then((function(){e.player.pause(),e.setNodeProps({state:2})})).catch((function(t){return e.onPlayError(t)}))}}),Object.defineProperty(t.prototype,"initSlaveMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this.meta.LISTEN;v(t)&&_(null===(e=this.store.vDOM[t])||void 0===e?void 0:e.element)&&(this.masterVideo=this.store.vDOM[t].element,this.store.vDOM[t].nStore.subscribe("state",this.onPrimaryState))}}),Object.defineProperty(t.prototype,"onPrimaryState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(s(e)&&c(e.state))switch(e.state[0]){case 3:this.syncSlaveVideo(),setTimeout((function(){t.play()}),5);break;case 5:case 6:this.player.currentTime=this.player.duration-.1,this.pause();break;case 4:this.syncSlaveVideo(),this.pause()}}}),Object.defineProperty(t.prototype,"syncSlaveVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=null===(e=this.masterVideo)||void 0===e?void 0:e.currentTime;"number"==typeof t&&Math.abs(this.player.currentTime-t)>.5&&(this.player.currentTime=t)}}),Object.defineProperty(t.prototype,"bindActions",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=function(t){i.player.addEventListener(t,(function(){e.eventHandler(t)}))},i=this;for(var r in T)t(r)}}),Object.defineProperty(t.prototype,"eventHandler",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i=this;if(!(this.isDestroyed||"canplay"===e&&this.nStore.isReady)){var r=s(e)?e:null===(t=T[e])||void 0===t?void 0:t.call(T,this.player);if(this.setNodeProps(r,!1,!0),"ended"===e&&this.store.closeOnCompleted)return setTimeout((function(){i.engine.destroy()}),5);if("ended"===e&&this.meta.replay){if(this.store.autoReplay)return setTimeout((function(){i.player.currentTime=0,i.play()}),5);this.store.controls.flow&&this.store.allowReplay&&this.setNodeProps({state:5}),this.player.currentTime=this.player.duration-.1}else"timeupdate"===e&&7===this.nStore.state&&this.setNodeProps({state:3})}}}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;if(!(this.nStore.manualPause&&!t||e&&!this.nStore.servicePause))return this.nStore.setProps(p({state:7})),this.player.play().then((function(){i.nStore.manualPause&&i.nStore.sendData({coreEvent:{event:5}}),i.nStore.servicePause=!1,t&&(i.nStore.manualPause=!1)})).catch((function(e){return i.onPlayError(e)}))}}),Object.defineProperty(t.prototype,"pause",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i,r,n;this.player.pause(),"slave"!==this.meta.mode&&4!==this.nStore.state&&5!==this.nStore.state&&(null===(i=this.nStore)||void 0===i||i.setProps(p({servicePause:e,state:4})),void 0!==t&&(null===(r=this.nStore)||void 0===r||r.setProps(p({manualPause:t}))),t&&(null===(n=this.nStore)||void 0===n||n.sendData({coreEvent:{event:4}})))}}),Object.defineProperty(t.prototype,"autoPlay",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.store,t=e.isPopupOpen,i=e.autoStart,r=e.autoPause,n=this.store.isFramed||this.store.inFocus,o=this.nStore,a=o.visibility,s=o.state,l=o.manualPause,d=o.servicePause,c=o.isReady,u=o.isStarted,h=i&&!u&&c&&a>=50&&n,p=r&&(a<50||!n)||l||t||d;p&&3===s?this.pause():(h||c&&u&&!p)&&3!==s&&6!==s&&5!==s&&this.store.allowReplay&&!p&&this.play()}}),Object.defineProperty(t.prototype,"onPlayError",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(s(e)&&v(e.message))return/user denied permission/i.test(e.message)||/user didn't interact/i.test(e.message)?(this.node.element.pause(),void this.waitUserAction()):void 0}}),Object.defineProperty(t.prototype,"waitUserAction",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.store.isTouchListening||(window.addEventListener("touchstart",this.playOnTouch),window.addEventListener("scroll",this.playOnTouch),this.store.isTouchListening=!0)}}),Object.defineProperty(t.prototype,"playOnTouch",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.store.isTouched||3===this.nStore.state||this.setProps({isTouched:!0})}}),t}(Qe),$e=function(e){function t(t,i){var r=e.call(this,t)||this;return Object.defineProperty(r,"nStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.element=i,r.player=i,r.data=t.store.data,r.onTime=r.onTime.bind(r),r.nStore=new we(r.engine,r),r.nStore.subscribe(["currentTime"],r.onTime),r.modules.manager=new Xe(t,r,{mode:"master"}),r.modules.viewability=new ze(t,r.nStore),r.modules.viewability.observe(i),r.modules.videoEventSender=new Je(t,r),r.nStore.setProps({state:2,isReady:!0}),r}return n(t,e),Object.defineProperty(t.prototype,"useStore",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.nStore}}),Object.defineProperty(t.prototype,"onTime",{enumerable:!1,configurable:!0,writable:!0,value:function(e){s(e)&&c(e.currentTime)&&e.currentTime[0]<e.currentTime[1]?this.nStore.setProps({state:6}):this.nStore.currentTime>0&&this.nStore.setProps({state:3,isReady:!0})}}),t}(E),et=function(){function e(e){Object.defineProperty(this,"engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"roleMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"video",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventBus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.onClick=this.onClick.bind(this),this.getVideo=this.getVideo.bind(this),this.onVisibility=this.onVisibility.bind(this),this.engine=e,this.store=e.store,this.eventBus=e.eventBus,this.linkTarget(this.store.config.target),G.debug("roleMap:",this.roleMap),G.debug("video:",this.video),G.debug("MAWatcherNodeManager:",this)}return Object.defineProperty(e.prototype,"linkTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.target=e,this.roleMap=new Map,this.parseTree(e),this.handleVideo(),this.roleMap.set(e,"background"),e.addEventListener("click",this.onClick,!0)}}),Object.defineProperty(e.prototype,"unlinkTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.mObserver)||void 0===e||e.disconnect(),this.mObserver=void 0,this.vNode=void 0,this.video=void 0,this.interval&&(clearInterval(this.interval),this.interval=void 0),this.target.removeEventListener("click",this.onClick),G.debug("Watcher. unlinkTarget")}}),Object.defineProperty(e.prototype,"parseTree",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(e instanceof HTMLElement){var i=e.dataset.role;v(i)&&(i=i.toLowerCase(),this.roleMap.set(e,i),e.attributes.removeNamedItem("data-role")),Array.prototype.forEach.call(e.children,(function(e){return t.parseTree(e)}))}}}),Object.defineProperty(e.prototype,"onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i,r,n;G.debug("onClick. clickArea:",this.store.clickArea);for(var o=e.target;o instanceof Element&&!this.roleMap.has(o);)o=o.parentElement;var a=this.roleMap.get(o)||"background";if(G.debug("onClick. role, trg:",a,o),"nothing"!==a){var s="click"===a||this.store.clickArea.wholeview||this.store.clickArea[a];if(G.debug("onClick. isClickArea:",s),s||a.startsWith("card_")){var l="ctabutton"===a&&(null===(i=null===(t=this.engine.pixels)||void 0===t?void 0:t.pixels)||void 0===i?void 0:i.ctaClick)?14:13;this.engine.raiseCoreEvent(l)}else(null===(n=null===(r=this.engine.pixels)||void 0===r?void 0:r.pixels)||void 0===n?void 0:n[a])&&this.engine.pixels.sendSimplePixel(a)}}}),Object.defineProperty(e.prototype,"restore",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return G.debug("Watcher. restore. manager:",this),this.unlinkTarget(),this.linkTarget(e),k.success}}),Object.defineProperty(e.prototype,"handleVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isDestroyed&&!1!==this.store.config.watchVideo&&(this.getVideo(),!this.video)){if(!this.store.config.noMutationObserver&&d(window.MutationObserver)&&!this.mObserver)try{return this.mObserver=new MutationObserver(this.getVideo),void this.mObserver.observe(this.target,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src"]})}catch(e){this.mObserver=null}this.store.subscribe("visibility",this.onVisibility)}}}),Object.defineProperty(e.prototype,"getVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;(this.video=this.findVideo(this.target))&&(this.vNode=this.vNode||new $e(this,this.video),null===(e=this.mObserver)||void 0===e||e.disconnect(),this.mObserver=null,this.interval&&clearInterval(this.interval),this.store.unSubscribe("visibility",this.onVisibility))}}),Object.defineProperty(e.prototype,"findVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e instanceof HTMLElement&&!this.video){if(_(e))return e;for(var t=Array.from(e.children),i=0;i<t.length;i++){var r=this.findVideo(t[i]);if(r)return r}}}}),Object.defineProperty(e.prototype,"raiseCoreEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.engine.raiseCoreEvent(e,t)}}),Object.defineProperty(e.prototype,"onVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.video||this.isDestroyed||!this.store.config.noMutationObserver||(this.store.visibility>0?this.interval||(this.interval=setInterval(this.getVideo,354)):clearInterval(this.interval))}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;for(var t in null===(e=this.vNode)||void 0===e||e.destroy(),this.unlinkTarget(),this)delete this[t];this.isDestroyed=!0}}),e}(),tt=function(e){function t(t,i){var r=e.call(this)||this;return Object.defineProperty(r,"engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"muted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(r,"volume",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(r,"currentTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"remainTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"duration",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"progress",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"visibility",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"manualPause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"servicePause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"isMobileSafari",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"isReady",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"hasIObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"isMediaReady",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"isStarted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"clickArea",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"signs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"workTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.engine=t,r.config=i,r.data=i.banner,r.signs=m(),r.hasIObserver=d(window.IntersectionObserver),r}return n(t,e),t}(ye),it=function(){function e(e){Object.defineProperty(this,"getVar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setCssVars",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventBus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pixels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewability",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"focus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stats",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"customEvents",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nodeManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var t=performance.now();this.config=e,G.info("Run watcher. config:",e);try{var i=this;if(this.store=new tt(this,e),this.eventBus=new Le(i),!s(e)||!s(e.banner)||!c(this.stats=e.banner.statistics))throw k.error(331);if(!(e.target instanceof HTMLElement))throw k.error(581);this.store.clickArea=oe(ke.clickAreas,parseInt(e.banner.clickArea||e.banner.clickAreas)),G.debug("Watcher. clickArea:",this.store.clickArea),s(this.store.clickArea)&&(this.store.clickArea.disclaimer=this.store.clickArea.wholeview),this.handleState=this.handleState.bind(this),this.pixels=new Ue(i,this.stats,"banner"),this.timer=new Fe(i),this.focus=new We(i),this.nodeManager=new et(this),this.store.hasIObserver?(this.viewability=new ze(i),this.viewability.observe(e.target)):this.store.visibility=100,this.beforeunload=this.beforeunload.bind(this),window.addEventListener("beforeunload",this.beforeunload),this.raiseCoreEvent(1),this.timer.start();var r=performance.now()-t;G.info("Banner id: ".concat(e.banner.id," is ready to watch in"),r.toFixed(2),"ms")}catch(e){this.throwError(e)}}return Object.defineProperty(e.prototype,"beforeunload",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.store&&(this.store.isPageUnload=!0,this.raiseCoreEvent(16))}}),Object.defineProperty(e.prototype,"raiseEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!this.isDestroyed&&s(e)&&v(e.event)&&this.pixels&&this.pixels.sendSimplePixel(e.event,e.multiple)}}),Object.defineProperty(e.prototype,"handleState",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isDestroyed){var e=this.store,t=e.state,i=e.inFocus,r=e.visibility,n=e.servicePause,o=(r||0)<50||!i||n;o&&3===t?this.store.setProps(p({state:4})):o||4!==t&&2!==t||this.store.setProps(p({state:3}))}}}),Object.defineProperty(e.prototype,"restore",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return G.debug("Watcher. restore",e),e instanceof HTMLElement?this.nodeManager.restore(e):k.error(581)}}),Object.defineProperty(e.prototype,"raiseCoreEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i;if(!this.isDestroyed){null===(i=this.store)||void 0===i||i.sendData(p({coreEvent:{event:e,data:t}}));var r=ke.eventToDispatch[e];!r||!ke.multipleEvents.includes(r)&&this.customEvents.includes(r)||(this.customEvents.push(r),L(this.config.target,r))}}}),Object.defineProperty(e.prototype,"throwError",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i,r;if(!this.isDestroyed){var n=Ze(e,t);G.error("Error:",n,"\r\n",e),null===(i=this.eventBus)||void 0===i||i.sendEvent(n),null===(r=this.eventBus)||void 0===r||r.sendEvent(ie.Closed),b(this.stats).forEach((function(e){return s(e)&&"error"===e.type&&Q(e.url)})),this.raiseCoreEvent(19),this.destroy()}}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i,r,n,o,a,s;if(!this.isDestroyed){for(var l in w(this,"isDestroyed",!0,!1),null===(t=this.config.dispatcher)||void 0===t||t.delInstance(this.config.banner),window.removeEventListener("beforeunload",this.beforeunload),null===(i=this.store)||void 0===i||i.destroy(),null===(r=this.eventBus)||void 0===r||r.destroy(),null===(n=this.timer)||void 0===n||n.destroy(),null===(o=this.pixels)||void 0===o||o.destroy(),null===(a=this.focus)||void 0===a||a.destroy(),null===(s=this.nodeManager)||void 0===s||s.destroy(),this)delete this[l];return this.isDestroyed=!0,G.warn("MotionKit watch instance was destroyed"),this.status=e||new k({status:5007}),this.status}}}),e}(),rt=function(e,t){var i,r=this;Object.defineProperty(this,"start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resume",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"restore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raiseEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setVolume",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getVolume",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var n=s(e)&&"watch"===e.renderMode;if(s(e)&&!n){if(v(e.state))i=e.state;else for(var o in e){var a=e[o];if(v(a)&&a.includes("8FsG7h4B8qEV5XZi")){i=a;break}}try{new Function(i).call(this,ke,t)}catch(e){G.error("Promoter state error:",e),s(e)&&v(e.message)&&Q("https://ad.mail.ru/web/log/?msg="+encodeURI(e.message))}}var l=n?new it(e):new qe(e,t);ke.methods.forEach((function(e){d(l[e])&&(r[e]=l[e].bind(l))})),Object.freeze(this)},nt=function(e){function t(t){var i=e.call(this)||this;return Object.defineProperty(i,"dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"mainUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"section",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.dispatcher=t,i.mainUrl="https://ad.mail.ru/vp/",i.section="preroll",i}return n(t,e),t}(ye),ot=["produce","request","start","stop","pause","clear","parse","watch","hasPreproc","isAsmInited"],at=function(e){return s(e)?String(e.banner.id)+"_"+e.banner.impression_id:ee()},st=function(){function e(){Object.defineProperty(this,"creatives",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(this,"configs",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(this,"instances",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(this,"preProcs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"produce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clear",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ids",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"globalCss",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsers",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(this,"watchers",{enumerable:!0,configurable:!0,writable:!0,value:m()}),Object.defineProperty(this,"mainCss",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"classMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"classBackMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"varMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"varBackMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),function(e){["mainCss","config","style","data","classMap","classBackMap","varMap","varBackMap"].forEach((function(t){return e[t]=m()}))}(this),this.ids=[],this.store=new nt(this)}return Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var t,i,r,n,o,a,l,d;return function(e,t){var i,r,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(u){if(G.table("Dispatcher. Init assembly:",e),!s(e)||!s(t=e.asmConfig)||!v(t.asmName))throw k.error(578);if(i=s(this.configs[t.asmName]),this.configs[t.asmName]=e,i)G.table("Repeat init assembly:",e);else{if(s(r=t.parsers))for(o in r)c(this.parsers[o])?(a=this.parsers[o]).push.apply(a,r[o]):this.parsers[o]=r[o];c(t.preprocessors)&&(l=this.preProcs).push.apply(l,t.preprocessors)}if(this.watchers[t.asmName]=t.watcher,this.configs[t.asmName]=e,!i&&s(n=t.parsers))for(o in n)c(this.parsers[o])?(d=this.parsers[o]).push.apply(d,n[o]):this.parsers[o]=n[o];return this.initGlobalStyles(t),this.initMethods(t),this.setCreatives(e),[2,k.success]}))}))}}),Object.defineProperty(e.prototype,"applyPreProcs",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!s(e)||e.noPreprocessors)return!1;var i,r,n,o=this.preProcs.concat(t),a=o.length,l=!1,c=JSON.parse(JSON.stringify(e));if(!f(c))for(var u=0;u<a;u++)if(s(r=o[u])&&d(i=r.convert)&&(n=i(c))){l=!0,c=n;break}if(f(c))for(u=0;u<a;u++)s(r=o[u])&&(d(i=r.modify)||d(i=r.handler))&&(i(c),l=!0);return!(!f(c)||!l)&&c}}),Object.defineProperty(e.prototype,"setCreatives",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,i=e.asmConfig,r=i.creatives,n=i.asmName;s(r)&&Object.entries(r).forEach((function(i){var r=i[0],o=i[1];t.creatives[r]?G.log("Creative",r,"already registered"):(G.log("Register creative:",r),t.creatives[r]={asmName:n,config:e,meta:o})}))}}),Object.defineProperty(e.prototype,"getCreative",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.creatives[e]}}),Object.defineProperty(e.prototype,"initMethods",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i=this;s(t=e.dispatcher)&&ot.forEach((function(e){d(i[e])||(i[e]=d(t[e])?t[e].bind(i):function(){return k.error(566)})}))}}),Object.defineProperty(e.prototype,"isAsmInited",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return s(this.configs)&&e in this.configs}}),Object.defineProperty(e.prototype,"setStyles",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r=this;if(v(e)&&s(t)){e in this.style||(this.style[e]=document.createElement("style"),document.head.appendChild(this.style[e])),Object.entries(t).forEach((function(t){var i=t[0],n=t[1];r.data[e][i]=r.prepareCss(n)}));var n=Object.values(this.data[e]).join(""),o=this.style[e];this.style[e]instanceof HTMLStyleElement&&(g(i)?setTimeout((function(){o.innerHTML=n}),i):o.innerHTML=n)}}}),Object.defineProperty(e.prototype,"delStyles",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.style[e]instanceof HTMLStyleElement&&this.style[e].remove()}}),Object.defineProperty(e.prototype,"getId",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;do{e=ee()}while(this.ids.includes(e));return this.ids.push(e),this.data[e]=m(),e}}),Object.defineProperty(e.prototype,"handleArea",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,r,n){if(void 0===n&&(n=""),"localhost"===B.location.hostname&&"true"===localStorage.getItem("noObfuscate"))return r;for(var o,a;null!==(o=e.exec(r));){var s=o[1];if(!(s in t)){for(;(a=n+ue())in i;);t[s]=a,i[a]=s}}return Object.entries(t).sort((function(e,t){return t[0].length-e[0].length})).forEach((function(e){return r=r.replace(new RegExp(e[0],"g"),e[1])})),r}}),Object.defineProperty(e.prototype,"prepareCss",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.handleArea(/\.(_mk_[a-z].+?)\b/g,this.classMap,this.classBackMap,e);return this.handleArea(/(--mk-[a-z].+?)\b/g,this.varMap,this.varBackMap,t,"--")}}),Object.defineProperty(e.prototype,"handleEntry",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=document.createElement("style");document.head.appendChild(i);var r=this.prepareCss(t);i.appendChild(document.createTextNode(r)),this.mainCss[e]={elem:i,txt:r}}}),Object.defineProperty(e.prototype,"initGlobalStyles",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(s(e)&&s(e.css)){var i=performance.now();if(this.mainCss=m(),Object.entries(e.css).forEach((function(e){var i=e[0],r=e[1];t.mainCss[i]||t.handleEntry(i,r)})),"function"==typeof e.themeBuilder){var r=e.themeBuilder(e.themes,e.themeVarsMap,this.classMap._mk_proxyNode||"_mk_proxyNode");r&&this.handleEntry("".concat(e.asmName,"_themes"),r)}var n=performance.now();G.log("CSS init in ms:",(n-i).toFixed(2))}}}),Object.defineProperty(e.prototype,"getInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(s(e)&&s(e.banner))return this.instances[at(e)]}}),Object.defineProperty(e.prototype,"delInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){s(e)&&s(e.banner)&&delete this.instances[at(e)]}}),Object.defineProperty(e.prototype,"regInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(s(e)&&s(e.instance)&&s(e.banner)){var t=at(e);return t in this.instances?this.instances[t]:(this.instances[t]=e,!1)}}}),Object.defineProperty(e.prototype,"watch",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i;G.debug("Watch config:",e);var r=p(e,{renderMode:"watch",virtualization:!0,dispatcher:this});return r.watcher=null===(i=null===(t=this.configs[r.asmName||"VKFeed"])||void 0===t?void 0:t.asmConfig)||void 0===i?void 0:i.watcher,d(r.watcher)?Promise.resolve(new rt(r)):Promise.reject(k.error(582))}}),Object.defineProperty(e.prototype,"hasPreproc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!~this.preProcs.findIndex((function(t){return t.name===e}))}}),e}(),lt=new st;function dt(e,t){var i=window.MotionKitSDK;s(i)&&d(i.create)?i.create(e):d(window.MotionKit)?window.MotionKit(e):new rt(e,t)}var ct=function(e,t){var i,r,n=s(e)?lt.getCreative(null===(i=e.banner)||void 0===i?void 0:i.creativeType):void 0,a=p(t,null==n?void 0:n.config);if(a.dispatcher=lt,s(e)&&e.virtualization){var l=lt.getInstance(e);if(s(l)&&l.instance instanceof rt)return G.warn("Restore virtualized instance. id:",null===(r=e.banner)||void 0===r?void 0:r.id),l.instance.restore(V(e.target||e.container)),l.instance}G.info("runRender:",e,a);var d=new rt(e,a);return e.virtualization&&lt.regInstance(o(o({},e),{instance:d})),d},ut=function(){function e(e){var t,i=this;Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"elements",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pos",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.node=e,this.nStore=e.nStore,this.onClick=this.onClick.bind(this);var r=(null===(t=this.node.store.meta.controls)||void 0===t?void 0:t[this.type])||ke.controls[this.type];if(s(r)){var n=r.classes,o=r.renderBy,a=r.pos,l=r.order;r.noElemCreate||(this.pos="".concat(a,"Wrap"),this.element=O("div",{classes:e.makeClasses(n),onClick:this.onClick,styles:{order:l}})),o&&b(o).forEach((function(e){i.nStore.subscribe(e,(function(e){i.isDestroyed||i.render(e)}))}))}}return Object.defineProperty(e.prototype,"type",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e.prototype,"onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.stopPropagation(),e.preventDefault()}}),Object.defineProperty(e.prototype,"setState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.element.dataset.state=e}}),Object.defineProperty(e.prototype,"append",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.element instanceof HTMLElement&&(this.element.style.removeProperty("display"),(e||(this.pos&&this.node.elements[this.pos]instanceof HTMLElement?this.node.elements[this.pos]:this.node.parent.element)).appendChild(this.element))}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.element.style.setProperty("display","none"),this.element.remove()}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.remove(),this.isDestroyed=!0}}),e}(),ht="id,delivery,type,codec,mediaType",pt="width,height,fileSize",mt={1:{n:"VAST",a:{s:"version"},c:[2,3]},2:{n:"Error",l:3},3:{n:"Ad",a:{s:"id,adType",i:"sequence",b:"conditionalAd"},c:[4,100]},4:{n:"InLine",c:[5,6,7,8,9,10,17,19,"AdTitle","AdServingId","Description","Pricing","Error","Expires"]},5:{n:"AdSystem",a:{s:"version"}},6:{n:"Impression",a:{s:"id"},l:2},7:{n:"Category",a:{s:"authority"},l:1},8:{n:"Advertiser",a:{s:"id"}},9:{n:"ViewableImpression",a:{s:"id"},c:[81,82,83]},10:{n:"AdVerifications",c:11},11:{n:"Verification",a:{s:"vendor"},c:[12,13,14,90],l:1},12:{n:"JavaScriptResource",a:{s:"apiFramework",b:"browserOptional"},l:1},13:{n:"ExecutableResource",a:{s:"apiFramework,language"},l:1},14:{n:"TrackingEvents",c:15},15:{n:"Tracking",a:{s:"event",i:"offset"},l:2},17:{n:"Extensions",c:18},18:{n:"Extension",a:{s:"type"},l:1},19:{n:"Creatives",c:20},20:{n:"Creative",a:{s:"id,adId,apiFramework,ordId",i:"sequence"},l:1,c:[201,22,60,202]},201:{n:"CreativeExtensions",c:21},202:{n:"UniversalAdId",a:{s:"idRegistry"},l:1},21:{n:"CreativeExtension",a:{s:"type"},l:1},22:{n:"Linear",a:{s:"skipoffset"},c:[23,24,25,31,14,35,66]},23:{n:"Duration"},24:{n:"AdParameters",a:{s:"xmlEncoded"}},25:{n:"MediaFiles",c:[27,28,29]},26:{n:"Mezzanine",a:{s:ht,i:pt},l:1},27:{n:"MediaFile",l:1,a:{i:pt+",bitrate,minBitrate,maxBitrate",s:ht+",apiFramework",b:"scalable, maintainAspectRatio"}},28:{n:"InteractiveCreativeFile",a:{s:"type,apiFramework",b:"variableDuration"},l:1},29:{n:"ClosedCaptionFiles",c:30},30:{n:"ClosedCaptionFile",a:{s:"type,language"},l:1},31:{n:"VideoClicks",c:[32,33,34]},32:{n:"ClickThrough",a:{s:"id"}},33:{n:"ClickTracking",a:{s:"id"},l:2},34:{n:"CustomClick",a:{s:"id"},l:2},35:{n:"Icons",c:36},36:{n:"Icon",c:36,l:1},50:{n:"NonLinearAds",c:[51,54]},51:{n:"NonLinear",c:[52,53],l:1},52:{n:"NonLinearClickThrough"},53:{n:"NonLinearClickTracking",l:2},60:{n:"CompanionAds",a:{s:"required"},c:61},61:{n:"Companion",a:{s:"id,apiFramework,adSlotId,renderingMode",i:"width,height,assetWidth,assetHeight,expandedWidth,expandedHeight",f:"pxratio"},l:1,c:[62,63,24,64,65,66,14,"AltText"]},62:{n:"StaticResource",a:{s:"creativeType"},l:1},63:{n:"IFrameResource"},64:{n:"CompanionClickThrough"},65:{n:"CompanionClickTracking",a:{s:"id"},l:2},66:{n:"HTMLResource",l:1},81:{n:"Viewable",l:2},82:{n:"NotViewable",l:2},83:{n:"ViewUndetermined",l:2},90:{n:"VerificationParameters",c:91},91:{n:"VerificationParameter",a:{s:"type"},l:1},100:{n:"Wrapper",a:{s:"followAdditionalWrapper,allowMultipleAds,fallbackOnNoAd"},c:[5,6,2,9,10,17,19,"VASTAdTagURI","Pricing"]}},ft={s:function(e){return e},i:function(e){return parseInt(e)},f:function(e){return parseFloat(e)},b:function(e){return"true"===e}},bt={start:"playbackStarted",firstQuartile:{type:"playheadReachedValue",pvalue:25},midpoint:{type:"playheadReachedValue",pvalue:50},thirdQuartile:{type:"playheadReachedValue",pvalue:75},complete:"playbackCompleted",mute:"volumeOff",unmute:"volumeOn",pause:"playbackPaused",resume:"playbackResumed",fullscreen:"fullscreenOn",exitFullscreen:"fullscreenOff",close:"closedByUser",Error:"error",Impression:{type:"playheadViewabilityValue",target:"banner",duration:0,viewablePercent:"50"}},vt=[1,60,3600];function gt(e,t){var i;if(!(e instanceof Element))return null;var r=m(),n=e.childNodes[0],o=null===(i=null==n?void 0:n.wholeText)||void 0===i?void 0:i.trim();if("number"==typeof t){var a=mt[t];if(!s(a)||!a.a&&!a.c)return o;!function(e,t,i){i.a&&Object.entries(i.a).forEach((function(i){var r=i[0];i[1].split(",").forEach((function(i){var n=t.getAttribute(i);n&&(e[i]=ft[r](n))}))}))}(r,e,a),function(e,t,i){i.c&&(Array.isArray(i.c)?i.c:[i.c]).forEach((function(i){var r,n,o=v(i)?i:null===(r=mt[i])||void 0===r?void 0:r.n,a=Array.prototype.slice.apply(t.getElementsByTagName(o)).filter((function(e){return e.parentNode===t}));if(a.length){var s=a.map((function(e){return gt(e,i)}));e[o]=!v(i)&&(null===(n=mt[i])||void 0===n?void 0:n.l)?s:s[0]}}))}(r,e,a)}return o&&(r.text=o),r}function _t(e,t,i){if(Array.isArray(t)){var r=bt[i]||i;t.forEach((function(t){var i=p(s(r)?r:{type:r});i.url=t.text,e.push(i)}))}}function yt(e,t){var i,r,n,a,s,l,d=[],c=null===(r=null===(i=t.Linear)||void 0===i?void 0:i.TrackingEvents)||void 0===r?void 0:r.Tracking;return Array.isArray(c)&&c.forEach((function(e){var t=bt[e.event];d.push(o(o({},"string"==typeof t?{type:t}:t),{url:e.text}))})),_t(d,null===(n=null==e?void 0:e.InLine)||void 0===n?void 0:n.Impression,"Impression"),_t(d,null===(a=null==e?void 0:e.InLine)||void 0===a?void 0:a.Error,"Error"),_t(d,null===(s=t.Linear.VideoClicks)||void 0===s?void 0:s.ClickTracking,"click"),_t(d,null===(l=t.Linear.VideoClicks)||void 0===l?void 0:l.CustomClick,"click"),d}function wt(e){return"string"==typeof e&&e?e.split(":").reverse().reduce((function(e,t,i){return e+vt[i]*+t||0}),0):+e||0}var At,St={copy:["duration","creativeType","urlToNavigateOnClick","trackingLink","hasVolume","hasPause","allowClose","allowCloseDelay","linkText","ctaText","statistics"],map:[["bannerID","id"],["creativeType","format"]]};function xt(e,t){if(void 0===t&&(t="preroll"),s(e)&&"VPAID"===e.api&&v(e.src)&&"application/javascript"===e.type){var i=m();return St.copy.forEach((function(t){return i[t]=e[t]})),St.map.forEach((function(t){return i[t[1]]=e[t[0]]})),i.adChoices={marker:e.ordID},i.vpaid={src:e.src,params:{AdParameters:e.params},vars:{}},i}}!function(e){e[e.medical=6]="medical",e[e.alcohol=3]="alcohol",e[e.beer=4]="beer",e[e.tobacco=5]="tobacco",e[e.drugs=8]="drugs",e[e.dietary=9]="dietary",e[e.declaration=10]="declaration",e[e.finance=11]="finance"}(At||(At={}));var Pt,Et,kt,Mt,Ct,It={copy:["src","duration","urlToNavigateOnClick","trackingLink","hasVolume","hasPause","allowClose","allowCloseDelay","linkText","ctaText","theme","disclaimer","mediafiles","title","description","statistics"],map:[["bannerID","id"],["type","format"],["ctaUrl","ctaLink"]]},Ot=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t,i,r,n)||this;return a.handle(),a}return n(t,e),Object.defineProperty(t.prototype,"handle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;this.node.element instanceof HTMLElement&&this.node.element.remove();var i=this.node.config,r=i.tg||ke.engine.defaultTag,n={classes:this.makeClasses(i.cl,this.node.current),attrs:i.ha,dattrs:i.a,styles:i.st,text:i.txt,appendTo:null===(e=this.node.parent)||void 0===e?void 0:e.element};i.join?(this.node.element=null===(t=this.node.parent)||void 0===t?void 0:t.element,I(this.node.element,n)):this.node.element=O(r,n),this.handleClickArea()}}),t}(Qe),Tt=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t,i,r,n)||this;return Object.defineProperty(a,"ratioProp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isVideo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.nStore=a.node.useStore(),a.onLoadedMetadata=a.onLoadedMetadata.bind(a),a.onError=a.onError.bind(a),"media"===a.node.current||"$$media"===r.SRC?a.data=a.store.media:a.loadData(["src","poster","type","duration","width","height"]),a.ratioProp=a.getPropName("ratio"),a.handle(),a}return n(t,e),Object.defineProperty(t.prototype,"handle",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(s(this.data)){this.node.element instanceof HTMLElement&&this.node.element.remove();var e=this.data,t=e.type,i=e.src,r=e.poster,n=e.duration,o=e.format,a=void 0===o?"":o;if(v(i)){this.nStore.duration=n||this.engine.store.duration;var l=O(["img","video","iframe"].includes(t)?t:i.endsWith("mp4")||i.endsWith("m3u8")||"mp4"===a||"hls"===a?"video":"img",{classes:this.makeClasses(this.node.config.cl,this.node.current),dattrs:this.node.config.a,styles:this.node.config.st});if(this.data.width&&this.data.height){var d=this.data.width/this.data.height||16/9;l.style.aspectRatio=String(d)}l instanceof HTMLVideoElement&&this.prepareVideo(l,r),"video"===t&&(this.node.player=l,this.player=l),l.onloadedmetadata=this.onLoadedMetadata,l.onload=this.onLoadedMetadata,l.src=i,l.onerror=this.onError,this.inject(l),this.handleClickArea()}}}}),Object.defineProperty(t.prototype,"prepareVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.isVideo=!0,this.nStore.volume=1,this.nStore.muted=!0,e.setAttribute("width","100%"),e.setAttribute("playsinline","playsinline"),e.setAttribute("muted","muted"),e.disablePictureInPicture=!0,e.preload="auto",e.volume=1,e.muted=!0,e.playsInline=!0,v(t)&&(e.poster=t),this.store.pushValues("videos",this.node)}}),Object.defineProperty(t.prototype,"onLoadedMetadata",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this,i=this.node.element;if(i instanceof HTMLVideoElement||i instanceof HTMLImageElement){var r={width:i.videoWidth||i.naturalWidth,height:i.videoHeight||i.naturalHeight},n=r.width/r.height||16/9;if(this.node.element.style.aspectRatio=String(n),this.setProps(p(((e={})[this.ratioProp]=n,e["_".concat(this.node.current,"_size")]=r,e))),"feedWidth"===this.meta.size&&r.width&&r.height&&i.parentElement instanceof HTMLElement){var o=this.store.meta.mediaWidth,a=o/n;a&&(i.parentElement.style.width="".concat(Math.round(o),"px"),i.parentElement.style.height="".concat(Math.round(a),"px"))}setTimeout((function(){var e=N(t.store.hostNode);e.height&&e.width&&t.setProps(p({hostSize:e}))}),251)}}}),Object.defineProperty(t.prototype,"onError",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.node.element;if(t instanceof HTMLVideoElement||t instanceof HTMLImageElement){var i={node:this.node.current,src:this.data.src};t instanceof HTMLVideoElement?(i.type="video",i.code=t.error.code,i.message=t.error.message):i.type="image",G.error("Error of media. e, data:",e,i),this.meta.sendError&&(this.store.sendData({coreEvent:{event:19,data:i}}),this.sendEvent(ie.Error)),this.meta.destroyOnError&&this.engine.destroy()}}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t;this.player instanceof HTMLVideoElement||"function"!=typeof(null===(t=this.player)||void 0===t?void 0:t.destroy)||this.player.destroy(),e.prototype.destroy.call(this)}}),t}(Qe),Rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.loadData(["src"]);var e=this.meta.view;if(e&&this.engine.disclaimer){this.node.element=O("div",{classes:this.getClass("_mk_disclaimer_place"),appendTo:this.node.parent.element,dattrs:this.node.config.a,styles:this.node.config.st});var t=this.data.src,i=s(t)?v(t.poster)?t.poster:"img"===t.type&&v(t.src)?t.src:"":"";v(i)&&(O("div",{classes:this.getClass("_mk_disclaimer_place_bg"),appendTo:this.node.element,styles:{backgroundImage:"url(".concat(i,")")}}),this.node.element.style.setProperty(this.getVar("--mk-cDisclaimer"),"#FFF")),this.engine.disclaimer.registerPlace(e,this.node.element),"row"===e&&this.engine.disclaimer.registerPlace("fullMedia",this.node.element),this.node.element.classList.add(this.getClass(this.store.clickArea.wholeview?"_mk_clickArea":"_mk_noClickArea"))}}}),t}(Qe),jt=function(e,t){return t(e)},Nt=((Pt={})[1]=function(e,t){return b(e.prop).reduce((function(e,i){return e&&jt(Ke(i,t),(function(e){return!!e||0===e}))}),!0)},Pt[2]=function(e,t){return b(e.prop).reduce((function(e,i){return e&&jt(Ke(i,t),(function(e){return!e&&0!==e}))}),!0)},Pt[3]=function(e,t){return Ke(e.prop,t)!==e.value},Pt[4]=function(e,t){return Ke(e.prop,t)===e.value},Pt[7]=function(e,t,i){return e.prop in i&&void 0!==i[e.prop]},Pt[8]=function(e,t,i){return!i[e.prop]},Pt[5]=function(e,t,i){return Ke(e.prop,i)===e.value},Pt[6]=function(e,t,i){return Ke(e.prop,i)!==e.value},Pt[9]=function(e,t){return b(e.prop).reduce((function(e,i){return e||jt(Ke(i,t),(function(e){return!!e||0===e}))}),!1)},Pt[10]=function(e,t){return b(e.prop).reduce((function(e,i){return e||jt(Ke(i,t),(function(e){return!e&&0!==e}))}),!1)},Pt),Lt=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t,i,r,n)||this;if(Object.defineProperty(a,"target",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"targetProp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"ro",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isResizing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.store.fixSize&&"root"===i.current)return a;a.handle=a.handle.bind(a);var l=(s(r)?r:{}).prop,d=void 0===l?"_".concat(i.current,"_size"):l;return a.targetProp=d,a.target="root"===i.current?a.store.proxyNode:i.element,"function"==typeof window.ResizeObserver&&a.target instanceof HTMLElement&&(a.ro=new ResizeObserver(a.handle),a.ro.observe(a.target)),a.target.isConnected&&a.handle(),a}return n(t,e),Object.defineProperty(t.prototype,"handle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(this.isResizing||this.isDestroyed||this.store.skipResize)this.store.skipResize=!1;else{this.isResizing=!0;var t=N(this.target),i=this.store[this.targetProp];s(i)&&t.width===i.width&&t.height===i.height||this.setProps(p(((e={})[this.targetProp]=t,e))),"root"===this.node.current&&!this.store._proxy_size&&s(i)&&i.height&&i.width&&(this.store._proxy_size=t),this.isResizing=!1}}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.ro&&(this.ro.unobserve(this.target),this.ro.disconnect(),this.ro=null),e.prototype.destroy.call(this)}}),t}(Qe),Dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"viewability",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.onVisibility=this.onVisibility.bind(this),this.nStore=this.node.useStore(),this.src=this.src.bind(this),this.store.hasIObserver?(this.viewability=new ze(this.engine,this.nStore),this.viewability.observe(this.node.element),s(this.meta.mrc)&&this.meta.mrc.p&&"d"in this.meta.mrc&&this.nStore.subscribe("visibility",this.onVisibility)):this.nStore.visibility=100}}),Object.defineProperty(t.prototype,"onVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDestroyed||(this.nStore.visibility>=this.meta.mrc.p?this.timeout||setTimeout(this.src,1e3*this.meta.mrc.d):this.timeout&&clearTimeout(this.timeout))}}),Object.defineProperty(t.prototype,"src",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(!this.isDestroyed){this.meta.mrc.unobserve&&this.viewability.disconnect();var t=v(this.meta.mrc.prop)?this.meta.mrc.prop:"mrcShow";this.nStore.setProps(p(((e={})[t]=!0,e)))}}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t;null===(t=this.viewability)||void 0===t||t.destroy(),e.prototype.destroy.call(this)}}),t}(Qe),Bt=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t,i,r,n)||this;Object.defineProperty(a,"targetProp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"content",{enumerable:!0,configurable:!0,writable:!0,value:""});var s=(null==r?void 0:r.TEXT)||i.current;if(a.content=Ke(s,a.store.data)||a.store.meta.defaults[s]||(null==r?void 0:r.default)||ke.defaults[s]||"",c(a.content)&&(a.content=a.content[0]),v(a.content)&&"clearEscSeq"===r.action&&(a.content=a.content.replace(/[\r\n]+/g," ")),v(a.content)&&"split"===r.action){var l=Math.round(Math.random()*(a.content.length-2))+1,d=Math.round(2147483648*Math.random()).toString(36);a.content="".concat(a.content.slice(0,l),'<span class="').concat(a.getClass("_mk_hidden"),'">').concat(d,"</span>").concat(a.content.slice(l))}return a.targetProp=null==r?void 0:r.onChange,a.targetProp&&a.subscribe(a.targetProp,a.handle),a}return n(t,e),Object.defineProperty(t.prototype,"handle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,i=String(c(this.content)?this.content[0]:null!==(e=this.content)&&void 0!==e?e:"").trim().replace(/(\n+)/g,"$1 ").replace(/ +/g," ").replace(/ (\n+)/g,"$1 ");if(this.meta.initLinesShow&&(null===(t=this.store.meta.serviceForest)||void 0===t?void 0:t.splitContent)&&(!this.meta.fullIfNoMedia||this.store.media)){var r=this.store.meta.contentWidth||N(this.node.element).width||510,n=Te(Oe(i.replace(/(&#x*[0-9A-F]{3,4};)/gi,"в"),this.store.meta.charWidths),r,parseFloat(getComputedStyle(this.node.element).fontSize)||13,this.store.meta.charWidths);if(n.cnt>this.meta.initLinesShow)return this.splitContent(i.replace(/\n/g,"<br>"),n,this.meta.maxFirstLinesShow||this.meta.initLinesShow)}if(i=i.replace(/\n/g,"<br>"),this.node.element.hasChildNodes())if(this.node.textNode)this.node.textNode instanceof Text?this.node.textNode.data=i:this.node.textNode.innerHTML=i;else{this.node.textNode="split"===this.meta.action?O("span",{text:i,classes:"sO36#fFH"}):document.createTextNode(i);var o=this.meta.before;g(o)&&this.meta.before<=this.node.element.childElementCount?this.node.element.insertBefore(this.node.textNode,this.node.element.childNodes[o-1]):this.node.element.appendChild(this.node.textNode)}else this.node.element.innerHTML=i}}),Object.defineProperty(t.prototype,"splitContent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r;void 0===i&&(i=2);var n=/[\s\n]+/g;n.lastIndex=t.lengths[i-1]+(t.wordCnt[i-1]||0);var o=n.exec(e),a=o?o.index:-1,s={first:e.slice(0,a),more:"Показать ещё",rest:e.slice(a)},l=s.first.match(/(<br>)*$/)[0].length/4;if(l){var d=Math.floor(s.first.length-4*l);s.rest=s.first.slice(d)+s.rest,s.first=s.first.slice(0,d)}$(null===(r=this.store.meta.serviceForest)||void 0===r?void 0:r.splitContent,s,void 0,this.node.element)}}),t}(Qe),Vt=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t,i,r,n)||this;return Object.defineProperty(a,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"oldValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.listenProp=null==r?void 0:r.LISTEN,a.map=s(a.meta.map)?a.meta.map:void 0,a.isActive=v(a.listenProp),a.isActive&&a.subscribe(a.listenProp,a.handle),a}return n(t,e),Object.defineProperty(t.prototype,"handle",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isActive){var e=String(this.store[this.listenProp]);if(e!==this.oldValue){this.oldValue=e;var t=this.map?this.store.fullMedia&&this.map._fullMedia?this.map._fullMedia:e in this.map?this.map[e]:this.map._default:e;if(void 0!==t){var i=this.store.vDOM[String(t)];i instanceof Ae&&i.element instanceof HTMLElement?i.element.appendChild(this.node.element):this.map||"none"!==e||this.node.element.remove()}}}}}),t}(Qe),Ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.init.call(this),this.node.toggleVolume({muted:!0}),this.render()}}),Object.defineProperty(t.prototype,"onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.onClick.call(this,t),this.node.toggleVolume()}}),Object.defineProperty(t.prototype,"type",{get:function(){return"volume"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.nStore,t=e.muted,i=e.volume;this.setState(t?"volume-off":i<=.5?"volume-on":"volume-on-high");var r=this.node.element;r&&(r.muted=t,t?r.setAttribute("muted","muted"):r.removeAttribute("muted"))}}),t}(ut),zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.init.call(this),this.nStore.progressbar=O("div",{appendTo:this.element})}}),Object.defineProperty(t.prototype,"type",{get:function(){return"progress"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.nStore.progressbar instanceof HTMLElement&&(this.nStore.progressbar.style.width="".concat((100*(this.nStore.progress+this.nStore.addon)||0).toFixed(2),"%"))}}),t}(ut),Ut=((Et={})[5]="replay",Et[3]="pause",Et[6]="ended",Et),Ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var i=this;switch(e.prototype.onClick.call(this,t),this.nStore.state){case 5:this.node.element instanceof HTMLVideoElement&&(this.node.element.currentTime=0);case 4:setTimeout((function(){return i.node.play(void 0,!0)}),5);break;case 3:this.node.pause(!1,!0)}}}),Object.defineProperty(t.prototype,"type",{get:function(){return"flow"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setState(Ut[this.nStore.state]||"play")}}),t}(ut),Wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"bar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"k",{enumerable:!0,configurable:!0,writable:!0,value:2}),t}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.nStore.engine.store.meta.serviceForest;s(t)&&s(t.volumeBar)&&s(t.volumeTooltip)&&(this.handleChange=this.handleChange.bind(this),this.elements=m(),this.bar=$(t.volumeBar,void 0,void 0,this.element,this.elements),this.tooltip=$(t.volumeTooltip,void 0,void 0,this.element,this.elements),this.bar&&(this.bar.onmousemove=this.handleChange,this.bar.onmousedown=function(t){e.nStore.engine.store.serviceClick=!0,e.handleChange(t)},this.bar.onmouseup=function(t){var i;e.nStore.engine.store.serviceClick=!1,e.offsetX=0,null===(i=e.tooltip)||void 0===i||i.style.setProperty("display","none")},this.bar.onmouseout=function(t){var i;null===(i=e.tooltip)||void 0===i||i.style.setProperty("display","none")}))}}),Object.defineProperty(t.prototype,"handleChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isDestroyed&&this.nStore.engine.store.serviceClick&&this.node.element instanceof HTMLVideoElement){if(!this.offsetX){var t=this.bar.getBoundingClientRect();this.offsetX=t.x,this.k=1/t.width||.02}var i=se(0,1,(e.x-this.offsetX)*this.k),r=0===i;this.tooltip&&(this.tooltip.style.setProperty("display","block"),this.tooltip.style.setProperty("left","".concat(se(0,50,e.x-this.offsetX)+this.tooltip.offsetWidth/-2,"px")),this.elements.vText.textContent="".concat(Math.round(100*i),"%")),this.bar.style.setProperty("--mkit-volume","".concat(Math.round(100*i),"%")),this.node.element.volume=i,this.node.element.muted=r,this.nStore.setProps({volume:i,muted:r})}}}),Object.defineProperty(t.prototype,"type",{get:function(){return"volumeBar"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isDestroyed&&c(null==e?void 0:e.muted)){var t=e.muted[0]?0:this.nStore.volume;this.bar.style.setProperty("--mkit-volume","".concat(Math.round(100*t),"%"))}}}),t}(ut),Gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;"video"===(null===(e=this.nStore.engine.store.media)||void 0===e?void 0:e.type)&&(this.element=$(this.nStore.engine.store.meta.serviceForest.prePlay,void 0,void 0,this.node.element.parentElement.parentElement),null===(t=this.element)||void 0===t||t.addEventListener("click",this.onClick))}}),Object.defineProperty(t.prototype,"onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.onClick.call(this,t),4!==this.nStore.state&&3!==this.nStore.state&&(this.node.play(void 0,!0),this.setState("play"),this.element.style.display="none")}}),Object.defineProperty(t.prototype,"type",{get:function(){return"prePlay"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;c(null==e?void 0:e.state)&&2!==e.state[0]&&(null===(t=this.element)||void 0===t||t.remove())}}),t}(ut),Kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.element=$(this.nStore.engine.store.meta.serviceForest.videoLoading,void 0,void 0)}}),Object.defineProperty(t.prototype,"type",{get:function(){return"loading"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i,r;!this.isDestroyed&&c(null==e?void 0:e.state)&&this.element&&(7===e.state[0]?null===(r=null===(i=null===(t=this.node.element)||void 0===t?void 0:t.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r||r.appendChild(this.element):this.element.remove())}}),t}(ut),Zt={volume:Ht,volumeBar:Wt,progress:zt,flow:Ft,prePlay:Gt,loading:Kt},Yt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"listenNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"place",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return n(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){s(this.store.media)&&"video"!==this.store.media.type||(this.listenNode=v(this.meta.LISTEN)?this.store.vDOM[this.meta.LISTEN]:this.node,this.meta.TARGET&&this.store.vDOM[this.meta.TARGET]instanceof HTMLElement?this.place=this.store.vDOM[this.meta.TARGET].element:"*"!==this.meta.TARGET&&this.meta.TARGET||(this.place=this.node.element),this.nStore=this.listenNode.useStore(),this.buildControls(),this.store.videoControlNode=this.node)}}),Object.defineProperty(t.prototype,"buildControls",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;!this.meta.TARGET&&s(this.store.meta.wrappers)&&(this.node.elements=Object.entries(this.store.meta.wrappers).reduce((function(t,i){var r=i[0],n=i[1];return t[r]=O("div",{classes:e.makeClasses(n),appendTo:e.node.parent.element}),t}),{}));var t,i=this.store.meta.controls;if(s(i))for(var r in Zt)if(s(t=i[r])&&t.show){var n=new Zt[r](this.listenNode);this.node.modules[r]=n;var o=this.node.elements[t.pos]||this.place;n.append(o),n.init()}}}),t}(Qe),qt=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t,i,r,n)||this;return s(r)&&("function"==typeof r.action||s(a.store.meta.actions)&&"function"==typeof a.store.meta.actions[r.action])?(a.initSubscribe(),a):a}return n(t,e),Object.defineProperty(t.prototype,"handle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isDestroyed&&this.isActive){if("function"==typeof this.meta.action)return this.meta.action.call(this.node);e&&"local"!==e||!this.listenProp||"value"in this.meta&&this.meta.value!==this.nStore[this.listenProp]||this.store.meta.actions[this.meta.action].call(this.node,this.meta),e&&"global"!==e||!this.listenGlobalProp||"gValue"in this.meta&&this.meta.gValue!==this.store[this.listenGlobalProp]||this.store.meta.actions[this.meta.action].call(this.node,this.meta)}}}),t}(Qe),Qt=function(e){function t(t,i,r,n){var o,a,l,u=e.call(this,t,i,r)||this;if(Object.defineProperty(u,"targetProp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"ratioProp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"mapping",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"cnt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"titleWords",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"descWords",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"noData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"hasTextBlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"hasDomain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"hasIcon",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"ctaText",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"vars",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"ratio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"variant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"isMobile",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"isSizeUp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),u.mapping=null===(l=null===(a=null===(o=u.store.meta)||void 0===o?void 0:o.mappingPro)||void 0===a?void 0:a[u.node.current])||void 0===l?void 0:l.size,!n&&s(u.mapping)&&d(u.mapping.mapper))return new u.mapping.mapper(t,i,r,!0);if(u.noData=m(),u.descWords=[],u.vars=[],u.size={width:-1,height:-1},u.isMobile=R(),u.targetProp=(null==r?void 0:r.SIZE)||"_".concat(i.current,"_size"),u.ratioProp=(null==r?void 0:r.RATIO)||"_media_ratio",u.isActive=s(u.mapping)&&s(u.mapping.vars)&&s(u.mapping.filterData)&&s(u.mapping.filters)&&d(u.mapping.mapper),!u.isActive)return u;u.subscribe(u.targetProp,u.handle),c(u.store.noData)&&u.store.noData.forEach((function(e){return u.noData[e]=1})),u.hasDomain=+!u.noData.domain,u.hasIcon=+!u.noData.icon,u.hasTextBlock=+(!u.noData.title&&!u.noData.description),u.ctaText=u.store.getDataProp("ctaText");var h=u.store.meta.charWidths,p=u.store.getDataProp("title");if(u.titleWords=Oe(p,h),!u.noData.description){var f=u.store.getDataProp("description");u.descWords=Oe(f,h)}u.cnt=u.mapping.filterData.pointsCnt;for(var b=function(e){v.vars[e]=m(),Object.entries(v.mapping.vars).forEach((function(t){var i=t[0],r=t[1];return u.vars[e][i]=r[e]}))},v=this,g=u.cnt;g--;)b(g);return u.initSubscribe(),u}return n(t,e),Object.defineProperty(t.prototype,"process",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getVariant()||this.vars[0];this.setCssVars(e)}}),Object.defineProperty(t.prototype,"getVariant",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=0;e<this.cnt;++e){var t=!0;for(var i in this.mapping.filters){var r=this.mapping.filterData[i];if(!this.mapping.filters[i].call(this,c(r)?r[e]:r)){t=!1;break}}if(t)return p(this.vars[e])}return p(this.vars[0])}}),Object.defineProperty(t.prototype,"handle",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isDestroyed){var e=this.store[this.ratioProp]||this.store.aspectRatio||16/9,t=this.store[this.targetProp];this.isActive&&s(t)&&t.width&&t.height&&(this.size.width!==t.width||this.size.height!==t.height||this.ratio!==e)&&(this.size=t,this.ratio=e,this.process())}}}),t}(Qe),Jt="https://ad.mail.ru/static/motion-framed.html",Xt={AdLoaded:[0],AdStarted:[2,ie.Started],AdImpression:[17,ie.ItemShowed],AdVideoStart:[2,ie.VideoStarted],AdVideoFirstQuartile:[22],AdVideoMidpoint:[23],AdVideoThirdQuartile:[24],AdVideoComplete:["onEnded"],AdSkipped:["onEnded"],AdStopped:["onEnded"],AdUserClose:["onEnded"],AdVolumeChange:[10,ie.VolumeChanged],AdPaused:[4,ie.Paused],AdPlaying:[5,ie.Resumed],AdClickThru:[13,ie.Clicked],adRemainingTime:[0],AdError:[0],AdInteraction:[0]},$t=function(e){function t(t,i,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];var a=e.call(this,t,i,r,n)||this;return Object.defineProperty(a,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"creative",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isAdInteraction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isNoFramed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.handle=a.handle.bind(a),a.onMessage=a.onMessage.bind(a),a.switchMode=a.switchMode.bind(a),a.autoStart=a.autoStart.bind(a),a.nStore=a.node.useStore(),a.node.manager={play:a.play.bind(a),pause:a.pause.bind(a)},a.config=a.store.data.vpaid,a.subscribe("isReady",a.initScript),a.nStore.subscribe("state",a.onState.bind(a)),a.nStore.subscribe(["volume","muted"],a.onVolume.bind(a)),a.subscribe(["inFocus","visibility","isReady"],a.autoStart),a.nStore.subscribe("isReady",a.autoStart),a.handle(),a}return n(t,e),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setNodeProps({state:3})}}),Object.defineProperty(t.prototype,"pause",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setNodeProps({state:4})}}),Object.defineProperty(t.prototype,"onEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!this.isDestroyed&&v(e))if("loaded"!==e){var i=this[e];d(i)?i.call(this,t):this.handleEvent(e)}else this.send(o({action:"init"},this.store.data.vpaid))}}),Object.defineProperty(t.prototype,"handleEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Xt[e];c(t)&&(this.raiseCoreEvent(t[0]),this.sendEvent(t[1]))}}),Object.defineProperty(t.prototype,"onMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;!this.isDestroyed&&l(this.element)&&e.source===this.element.contentWindow&&s(t=e.data)&&t.id==this.store.id&&"motion-framed"===t.sender&&this.onEvent(t.event,t.props)}}),Object.defineProperty(t.prototype,"doAction",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.isNoFramed){var i=this.creative[e];d(i)&&i.call(this.creative,t)}else this.send(o(o({},t),{action:e}))}}),Object.defineProperty(t.prototype,"send",{enumerable:!1,configurable:!0,writable:!0,value:function(e){l(this.element)&&this.element.contentWindow&&this.element.contentWindow.postMessage(o(o({},e),{args:b(e.args),sender:"motion-core"}),"*")}}),Object.defineProperty(t.prototype,"initScript",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(!this.isDestroyed){this.node.element instanceof HTMLElement&&this.node.element.remove();var t=this.node.config;this.setProps({state:7}),this.setNodeProps({state:7});var i=O("iframe",{classes:this.makeClasses(t.cl,this.node.current),attrs:t.ha,dattrs:t.a,styles:t.st,appendTo:this.node.parent.element});if(this.isNoFramed)try{i.onerror=function(t){return e.AdError(k.error(573,{message:String(t)}))};var r=i.contentDocument;r.open(),r.write("<!DOCTYPE html><html style='width: 100%; height:100%'><head></head><body style='width: 100%; height:100%; margin: 0'>"),r.close();var n=r.createElement("script");n.onerror=function(){e.AdError(k.error(586))},n.onload=function(){var t=i.contentWindow.getVPAIDAd;if(d(t))try{var r=t();e.creative=r,e.subscribeEvents(),r.initAd(e.store._media_size.width,e.store._media_size.height,"normal",{},e.store.data.vpaid.params||{},e.store.data.vpaid.props||{})}catch(t){e.AdError(k.error(584))}else e.AdError(k.error(575))},n.src=this.store.data.vpaid.src,r.body.appendChild(n)}catch(e){G.error(e),this.AdError(k.error(574))}else fetch(Jt).then((function(e){return e.text()})).then((function(r){var n;if(!r||!r.includes("title>motion-framed</title"))return e.switchMode();window.onmessage=e.onMessage,i.onerror=e.switchMode,i.onload=function(){var t,r,n=null===(r=null===(t=i.contentDocument)||void 0===t?void 0:t.body)||void 0===r?void 0:r.innerText;v(n)&&n.includes("Cannot GET")&&e.switchMode(),e.send({action:"setId",id:e.store.id})},v(null===(n=t.ha)||void 0===n?void 0:n.src)||(i.src=Jt)})).catch((function(t){G.warn("Error of loading framed document:",t.message),e.switchMode()}));this.node.element=this.element=i}}}),Object.defineProperty(t.prototype,"switchMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDestroyed||this.isNoFramed||(this.isNoFramed=!0,this.initScript())}}),Object.defineProperty(t.prototype,"AdLoaded",{enumerable:!1,configurable:!0,writable:!0,value:function(){G.warn("frame AdLoaded. this.state:",this.nStore.state),this.nStore.isReady||7!==this.nStore.state||!this.creative&&this.isNoFramed||(this.sendEvent(ie.Ready),this.setNodeProps({isReady:!0}))}}),Object.defineProperty(t.prototype,"autoStart",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.store,t=e.inFocus,i=e.visibility,r=e.isReady,n=e.state;if(!this.isDestroyed&&this.nStore.isReady&&r&&![5,6].includes(n)){G.warn("frame autoStart. isLoaded, inFocus, visibility, isReady",this.nStore.isLoaded,t,i,r);var o={state:t&&i>=50?3:4};G.warn("frame AdLoaded. value:",o),this.setNodeProps(o),this.setProps(o)}}}),Object.defineProperty(t.prototype,"onVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.nStore.muted||!this.nStore.volume?0:this.nStore.volume||1;this.isNoFramed?this.creative.adVolume=e:this.doAction("setAdVolume",{args:[e]})}}),Object.defineProperty(t.prototype,"onState",{enumerable:!1,configurable:!0,writable:!0,value:function(){switch(this.nStore.state){case 3:this.store.currentTime<this.store.duration-.1?this.doAction("resumeAd"):(this.doAction("startAd"),this.creative&&(this.creative.adVolume=0));break;case 4:this.doAction("pauseAd")}}}),Object.defineProperty(t.prototype,"adRemainingTime",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isDestroyed){var t=this.creative;this.isNoFramed&&t&&!s(e)&&(e={currentTime:t.adDuration-t.adRemainingTime,duration:t.adDuration,remainTime:t.adRemainingTime,progress:(t.adDuration-t.adRemainingTime)/t.adDuration||0}),s(e)&&(this.setNodeProps(e),e.event=ie.TimeRemained,e.id=this.store.id,this.sendEvent(e))}}}),Object.defineProperty(t.prototype,"AdInteraction",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isAdInteraction=!0,this.sendEvent(ie.UserAction)}}),Object.defineProperty(t.prototype,"AdError",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;this.isNoFramed?(null===(t=this.creative)||void 0===t||t.stopAd(),this.engine.throwError(e instanceof k?e:k.error(901))):this.switchMode()}}),Object.defineProperty(t.prototype,"AdVideoComplete",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.sendEvent(ie.Completed),this.store.allowReplay)return this.setNodeProps({state:5}),void(this.store.autoReplay&&setTimeout((function(){e.setNodeProps({state:3}),e.sendEvent(ie.Replayed)}),15));this.isAdInteraction&&this.store.meta.allowClose||this.AdStopped()}}),Object.defineProperty(t.prototype,"AdUserClose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sendEvent(ie.ClosedByUser),this.AdStopped()}}),Object.defineProperty(t.prototype,"AdSkipped",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sendEvent(ie.ClosedByUser),this.sendEvent(ie.Skipped),this.AdStopped()}}),Object.defineProperty(t.prototype,"AdStopped",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.raiseCoreEvent(9),this.sendEvent(ie.Closed),this.setNodeProps({state:6}),this.setProps({state:6}),this.engine.destroy()}}),Object.defineProperty(t.prototype,"onEnded",{enumerable:!1,configurable:!0,writable:!0,value:function(e){G.info("onEnded",e,this.isAdInteraction,this.store.meta.allowClose),this.sendEvent(ie.Completed),"AdVideoComplete"===e&&this.isAdInteraction&&this.store.meta.allowClose||(this.raiseCoreEvent(9),this.sendEvent(ie.Closed),"AdUserClose"===e?this.sendEvent(ie.ClosedByUser):"AdSkipped"===e&&this.sendEvent(ie.Skipped),this.setNodeProps({state:6}),this.engine.destroy())}}),Object.defineProperty(t.prototype,"subscribeEvents",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;for(var t in Xt)this.creative.subscribe((d(e=this[Xt[t][0]||t])?e:this.handleEvent).bind(this,t),t,this);this.creative.subscribe(this.adRemainingTime.bind(this),"AdRemainingTimeChange",this)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t;null===(t=this.creative)||void 0===t||t.pauseAd(),window.removeEventListener("message",this.onMessage),e.prototype.destroy.call(this)}}),t}(Qe),ei={injector:function(){var e,t;try{var i=this.store.hostNode.parentElement;this.store.hostSize=N(i),i.innerHTML="",this.store.hostNode=i}catch(e){throw G.error("Hostnode:",this.store.hostNode),G.error(e),k.error(318)}(null===(e=this.store.hostSize)||void 0===e?void 0:e.width)||(this.store.hostSize={width:626,height:323}),this.store.upSize=this.store.initConfig.renderMode===P.extendable&&g(this.store.initConfig.maxHeight),this.store.proxyNode=O("div",{appendTo:this.store.hostNode}),this.store.upSize=g(this.store.initConfig.maxHeight),this.store.proxyNode.setAttribute(this.store.localId,""),this.store.proxyNode.classList.add(this.getClass("_mk_proxyNode")),this.store.proxyNode.setAttribute("adChoiceSize","L row");var r="stable";if(this.setProps(p({view:r})),this.store.proxyNode.setAttribute("view",r),s(null===(t=this.store.globalInitConfig)||void 0===t?void 0:t.appApi)){var n=this.store.globalInitConfig.appApi.showModal;n&&(this.store.meta.handlers.showModal=n)}},clicker:function(e,t,i){if(v(i)){if("vkGames_interstitial_lead_form"===this.store.data.creativeType&&"function"==typeof this.store.meta.handlers.showModal&&!1!==this.store.data.openLinkInPopup){var r=new URL(i).search,n=this;return this.engine.pause(!0),void this.store.meta.handlers.showModal(r,(function(){n.engine.resume(!0)}))}var o=this.store.data,a=o.disableOpenLink,s=o.disableOpenCTALink;a&&("ctabutton"!==t||s)||(this.engine.popup||window).open(i,"_blank")}},enforcers:Nt,builders:(kt={},kt[0]=Ot,kt[1]=Tt,kt[3]=Rt,kt[7]=$t,kt),triggers:(Mt={},Mt[1]=Lt,Mt[2]=Lt,Mt[3]=Dt,Mt),workers:(Ct={},Ct[3]=Qt,Ct[2]=Bt,Ct[5]=Vt,Ct[6]=Yt,Ct[7]=Je,Ct[8]=Xe,Ct[9]=qt,Ct)},ti=o(o({},he),{onAction:function e(t,i,r,n){var o,a;switch(null==n||n.preventDefault(),null==n||n.stopPropagation(),t){case"showTab":this.elements.host.replaceChild(this.elements[i],this.currentTab),this.currentTab=this.elements[i],"closed"===r&&(this.sendEvent(ie.ClosedByUser),this.sendEvent(ie.Closed),this.raiseCoreEvent(9),e.call(this,"destroy"));break;case"closeMenu":this.closeTimeout=null,this.isOpen&&(this.element.style.display="none",this.store.rootNode.setCssAttr({menu:"close"}),this.store.isServiceHidden=!1,this.elements.hideForm=void 0,this.engine.resume(!0),this.isOpen=!1);break;case"hide":case"complain":e.call(this,"showTab",i,r);break;case"sendOther":this.sendReason(9,this.elements.textArea.value||""),e.call(this,"showTab","closed","closed");break;case"reasonItem":9!=i&&this.sendReason(i);var s=null===(a=null===(o=this.store)||void 0===o?void 0:o.proxyNode)||void 0===a?void 0:a.getAttribute("adChoiceSize"),l=(null==s?void 0:s.includes(S.tiny))||(null==s?void 0:s.includes(S.small))?"closed":r;e.call(this,"showTab",l,l);break;case"copy":if(de(r||"Not defined"),this.elements[i]instanceof HTMLElement){var d=this.elements[i].getElementsByTagName("span")[0]||this.elements[i];if(d instanceof HTMLElement){var c=d.innerText;d.innerText="Скопировано",setTimeout((function(){return d.innerText=c}),2e3)}}break;case"redirect":v(r)&&window.open(r,"_blank");break;case"destroy":this.unmount()}}}),ii={iconLink:"https://r.mradx.net/imgs/57/4d/cc7e37e5e603ef9c.svg",closeUrl:"",marker:"",tabs:{main:{header:"*",items:[{text:"Скрыть объявление",iconUrl:"https://r.mradx.net/imgs/63/8e/d4b28cc0b905374f.svg",name:"hide",action:"hide"},{text:"Пожаловаться",iconUrl:"https://r.mradx.net/imgs/cf/aa/a8655ac54f10b068.svg",name:"complain",action:"complain"},{text:"О рекламодателе",iconUrl:"https://r.mradx.net/imgs/ee/63/84ed4e4a5ae73316.svg",name:"about",action:"redirect",actionValue:""},{show:!0,text:"Скопировать ERID",iconUrl:"https://r.mradx.net/imgs/cf/e5/32db22916648f14d.svg",name:"copyErid",action:"copy",actionValue:"",external:!0},{text:"Скопировать ссылку",name:"copyUrl",action:"copy",actionValue:"",iconUrl:"https://r.mradx.net/imgs/b6/09/93a837dc06183017.svg"},{text:"Правила рекомендаций",name:"rules",action:"redirect",actionValue:"",iconUrl:"https://r.mradx.net/imgs/37/c0/ca37933876686dcd.svg"},{text:"VK Реклама",name:"VKAds",action:"redirect",actionValue:"https://ads.vk.com/",iconUrl:"https://r.mradx.net/imgs/df/92/6fb16c27a25e2c38.svg"}]},hide:{header:"Уточните причину:",closeInfo:"Ваши ответы помогают нам подбирать более качественную рекламу",closeTitle:"Объявление скрыто",otherPlaceholder:"Напишите причину",items:[{id:1,text:"Не интересно",action:"reasonItem",actionValue:"closed"},{id:2,text:"Уже приобретено",action:"reasonItem",actionValue:"closed"},{id:3,text:"Вижу слишком часто",action:"reasonItem",actionValue:"closed"},{id:9,text:"Другое",action:"reasonItem",actionValue:"closed"}]},complain:{header:"Уточните причину:",closeInfo:"Ваши ответы помогают нам подбирать более качественную рекламу",closeTitle:"Объявление скрыто",otherPlaceholder:"Напишите причину",items:[{id:4,text:"Оскорбительное содержание",action:"reasonItem",actionValue:"closed"},{id:5,text:"Сексуальный подтекст",action:"reasonItem",actionValue:"closed"},{id:6,text:"Нарушение закона",action:"reasonItem",actionValue:"closed"},{id:7,text:"Мошеннический сайт",action:"reasonItem",actionValue:"closed"},{id:9,text:"Другое",action:"showTab",actionValue:"closed"}]},closed:{items:[{id:"closeTitle"},{id:"closeInfo"}]}},actions:ti},ri={iconLink:"https://r.mradx.net/imgs/57/4d/cc7e37e5e603ef9c.svg",tabs:{main:{header:"*",items:[{text:"Скрыть объявление",iconUrl:"https://r.mradx.net/imgs/63/8e/d4b28cc0b905374f.svg",name:"hide",action:"hide"},{text:"Пожаловаться",iconUrl:"https://r.mradx.net/imgs/cf/aa/a8655ac54f10b068.svg",name:"complain",action:"complain"},{text:"О рекламодателе",iconUrl:"https://r.mradx.net/imgs/ee/63/84ed4e4a5ae73316.svg",name:"about",action:"redirect",actionValue:""},{show:!0,text:"Скопировать ERID",iconUrl:"https://r.mradx.net/imgs/cf/e5/32db22916648f14d.svg",name:"copyErid",action:"copy",actionValue:"",external:!0},{text:"Скопировать ссылку",name:"copyUrl",action:"copy",actionValue:"",iconUrl:"https://r.mradx.net/imgs/b6/09/93a837dc06183017.svg"},{text:"Правила рекомендаций",name:"rules",action:"redirect",actionValue:"",iconUrl:"https://r.mradx.net/imgs/37/c0/ca37933876686dcd.svg"},{text:"VK Реклама",name:"VKAds",action:"redirect",actionValue:"https://ads.vk.com/",iconUrl:"https://r.mradx.net/imgs/df/92/6fb16c27a25e2c38.svg"}]},hide:{header:"Уточните причину:",closeInfo:"Ваши ответы помогают нам подбирать более качественную рекламу",closeTitle:"Объявление скрыто",otherPlaceholder:"Напишите причину",items:[{id:1,text:"Не интересно",action:"reasonItem",actionValue:"closed"},{id:2,text:"Уже приобретено",action:"reasonItem",actionValue:"closed"},{id:3,text:"Вижу слишком часто",action:"reasonItem",actionValue:"closed"},{id:9,text:"Другое",action:"reasonItem",actionValue:"closed"}]},complain:{header:"Уточните причину:",closeInfo:"Ваши ответы помогают нам подбирать более качественную рекламу",closeTitle:"Объявление скрыто",otherPlaceholder:"Напишите причину",items:[{id:4,text:"Оскорбительное содержание",action:"reasonItem",actionValue:"closed"},{id:5,text:"Сексуальный подтекст",action:"reasonItem",actionValue:"closed"},{id:6,text:"Нарушение закона",action:"reasonItem",actionValue:"closed"},{id:7,text:"Мошеннический сайт",action:"reasonItem",actionValue:"closed"},{id:9,text:"Другое",action:"showTab",actionValue:"closed"}]},closed:{items:[{id:"closeTitle"},{id:"closeInfo"}]}},actions:ti},ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"process",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.size,t=e.width,i=e.height;this.direction=+(t>i);var r=this.getVariant()||this.vars[0];r.direction=this.direction?"row":"column",r.stubHeightPx=0,r.stubDisplay="none";var n=0===this.direction&&i<550,o=this.store._media_ratio||this.store.aspectRatio||16/9,a=2*r.paddingPx||0,s=r.gapPx||0,l=this.engine.disclaimer?this.engine.disclaimer.resize(t,i,t-a).height+(r.disclaimerTopMarginPx||0):0;r.mainHeightPx=Math.floor(i-a-l),1===this.direction?(r.mediaHeightPx=r.mainHeightPx,r.mediaWidthPx=Math.floor((t-a-s)/2),r.infoWidthPx=Math.floor(t-r.mediaWidthPx-a-s),r.infoHeightPx=r.mainHeightPx):(r.mediaWidthPx=r.infoWidthPx=Math.floor(t-a),r.mediaHeightPx=Math.floor(Math.min((r.mainHeightPx-s)/2,r.mediaWidthPx/o)),r.infoHeightPx=r.mainHeightPx-r.mediaHeightPx-s-(n?0:r.ctaHeightPx+s));var d=Re({width:r.infoWidthPx,height:r.infoHeightPx-32-r.infoGapPx-(1===this.direction?r.ctaHeightPx+r.infoGapPx:0),gap:r.infoGapPx,charMap:this.store.meta.charWidths,lines:[{name:"title",fontSize:r.titleFsPx,lineHeight:r.titleLineHeightPx,words:this.store.calcText.title},{name:"description",fontSize:r.descFsPx,lineHeight:r.descLineHeightPx,words:this.store.calcText.description}]});0===this.direction&&(r.stubHeightPx=r.infoHeightPx,r.infoHeightPx=32+r.infoGapPx+d.title*r.titleLineHeightPx+d.description*r.descLineHeightPx+(d.description&&r.infoGapPx),r.stubHeightPx=Math.max(0,r.stubHeightPx-r.infoHeightPx-s),!n&&r.stubHeightPx&&(r.stubDisplay="block")),r.titleLines=d.title,r.descLines=d.description,this.setCssVars(r),this.store.proxyNode.setAttribute("view",r.direction),n?(r.progressHeightPx=0,this.store.rootNode.element.classList.add(this.getClass("_mk_ctaButtonOnMedia")),this.setProps({direction:"columnMini"})):(this.store.rootNode.element.classList.remove(this.getClass("_mk_ctaButtonOnMedia")),this.setProps({direction:r.direction}))}}),t}(Qt),oi={onTimerForCloseDelay:function(){var e;if(this.element instanceof HTMLElement){var t=Math.max(0,this.store.allowCloseDelay-this.store.currentTime)||0;if(t>0){var i=String(Math.ceil(t));this.element.style.setProperty(this.getVar("--mk-restDelay"),i),this.element.style.setProperty(this.getVar("--mk-dasharray"),"".concat(((this.store.currentTime+.35)/this.store.allowCloseDelay).toFixed(2)," 1")),this.element.dataset.restDelay=i}else{this.element.remove();var r=null===(e=this.store.vDOM.closeBtn)||void 0===e?void 0:e.element;r instanceof HTMLElement&&(r.style.display="flex"),this.unSubscribe("currentTime")}}},getMediaPalette:function(){var e,t,i,r=this;if(!this.isDestroyed&&"function"==typeof(null===(e=this.store.meta.handlers)||void 0===e?void 0:e.colorExtractor)){var n=function(e){var t;v(e)||(e=r.store.meta.defaultCTAColor||"#2c2d2e"),null===(t=r.nStore)||void 0===t||t.setProps(p({css:{borderColor:e,backgroundColor:e,color:ce(e)>=165?"#000":"#fff"},palette:{main:e}}))};if("img"!==(null===(t=this.store.media)||void 0===t?void 0:t.type)&&!this.store.data.items)return n();try{var o=c(this.store.data.items)?null===(i=this.store.data.items[0].image)||void 0===i?void 0:i.url:this.store.media.src;v(o)?this.store.meta.handlers.colorExtractor(o).then((function(e){G.table("colorExtractor result:",e),n(e)})).catch((function(e){n()})):n()}catch(e){n()}}},setCss:function(e){var t=this;if(!this.isDestroyed){var i=v(e.prop)&&s(this.nStore[e.prop])?e.prop:"css",r=function(e){void 0===e&&(e=10),s(t.nStore[i])?M(t.element,t.nStore[i]):--e&&setTimeout((function(){return r(e)}),250)};this.element instanceof HTMLElement&&r()}}},ai={classPrefix:"_mk_is_",proxyClass:"_mk_is_proxyNode",deletionDetector:!0,clickArea:1615,noMutationObserver:!0,classMode:1,calcTextOnInit:["title","description"],producer:"base",disclaimerWeight:100,disclaimerWidth:"onPlace",contentWidth:548,disclaimerPaddings:0,tree:{root:{role:"background",ch:["mainArea","disclaimer","closeBtnWrap"],tr:1,wr:[{e:3,LISTEN:"ready",LISTENGLOBAL:"_media_ratio",SIZE:"_root_size"}]},mainArea:{ch:["mediaWrap","infoWrap"]},mediaWrap:{ch:["media","mediaBackground","domainArea","control_wrapper"],role:"image"},media:{bl:1,tr:3,wr:[7,{e:8,replay:!0,mode:"master"}]},mediaBackground:{bl:{e:1,SRC:"$$media"},wr:{e:8,LISTEN:"media",mode:"slave"}},control_wrapper:{wr:{e:6,LISTEN:"media",TARGET:"*"}},domainArea:{ch:["icon","domain"],iif:[{e:1,prop:"domain"}]},icon:{bl:{e:1,SRC:"icon.src"},role:"icon",an:3,iif:[{e:1,prop:"icon"}]},domain:{wr:2,role:"domain"},disclaimer:{bl:{e:3,view:"stable"},role:"disclaimer"},infoWrap:{ch:["header","textArea","ctaButton"]},header:{ch:["headerIcon","headerLabel","adChoice"]},headerIcon:{txt:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M0 7.2c0-3.4 0-5.1 1.05-6.15C2.11 0 3.8 0 7.2 0h.6c3.4 0 5.1 0 6.15 1.05C15 2.11 15 3.8 15 7.2v.6c0 3.4 0 5.1-1.05 6.15C12.89 15 11.2 15 7.8 15h-.6c-3.4 0-5.1 0-6.15-1.05C0 12.89 0 11.2 0 7.8Zm13-4.06a.6.6 0 0 1 .39 1.03l-1.41 1.4a.75.75 0 0 1-.62.22l-.96-.08-1.2 1.2a1.8 1.8 0 1 1-1.04-1.09l1.18-1.17-.12-1a.74.74 0 0 1 .22-.62l1.4-1.4a.6.6 0 0 1 1.03.37l.04 1.08Zm-5.1-.43a4.82 4.82 0 0 0-5.15 5.51 4.8 4.8 0 0 0 9.53-1.14l-1.6-.13a3.23 3.23 0 1 1-2.6-2.63Zm0 0" fill-rule="evenodd" fill="currentColor"/></svg>'},headerLabel:{role:"label",wr:{e:2,TEXT:"adLabel.text",default:"Реклама",before:1,action:"split"},ch:"ageRestrictions",iif:{e:3,prop:"adLabel.show",value:!1}},ageRestrictions:{role:"agerestrictions",wr:2,iif:{e:1,prop:"ageRestrictions"}},adChoice:{role:"aсMenu",txt:'<svg width="14" height="14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 12.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11ZM14 7A7 7 0 1 1 0 7a7 7 0 0 1 14 0Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 11a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5A.75.75 0 0 1 7 11Z" fill="currentColor"/><path d="M6.1 3.9a.9.9 0 1 1 1.8 0 .9.9 0 0 1-1.8 0Z" fill="currentColor"/></svg>'},closeBtnWrap:{role:"closeBanner",ch:["closeBtn","closeDelayCountdown"]},closeDelayCountdown:{role:"nothing",txt:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" stroke-width="2" viewBox="-14 -14 28 28"><circle r="12" pathLength="1"></circle></svg>',wr:{e:9,LISTENGLOBAL:"currentTime",action:"onTimerForCloseDelay"}},closeBtn:{txt:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.41 6.41c.3-.3.8-.3 1.1 0L11 9.91l3.49-3.5a.78.78 0 0 1 1.1 1.1L12.09 11l3.5 3.49a.78.78 0 0 1-1.1 1.1L11 12.09l-3.49 3.5a.78.78 0 0 1-1.1-1.1L9.91 11 6.4 7.51c-.3-.3-.3-.8 0-1.1Z" fill="currentColor"/>\n</svg>'},textArea:{ch:["title","description"],tr:1},title:{role:"title",wr:2},description:{role:"description",wr:2},ctaButton:{role:"ctabutton",tr:{e:3,mrc:{p:50,d:3}},wr:[{e:2,TEXT:"ctaText",default:"Перейти"},{e:9,LISTEN:"ready",action:"getMediaPalette",value:!0},{e:9,LISTEN:"mrcShow",action:"setCss",value:!0},{e:5,LISTEN:"direction",map:{row:"infoWrap",column:"mainArea",columnMini:"mediaWrap",_default:"infoWrap"}}]},stub:{}},mappingPro:{root:{size:{vars:{titleFsPx:[20,20,20],titleLineHeightPx:[24,24,24],descFsPx:[16,16,16],descLineHeightPx:[20,20,20],paddingPx:[16,16,20],gapPx:[12,12,20],infoGapPx:[6,6,6],disclaimerTopMarginPx:[16,16,16],ctaFsPx:[15,16,14],ctaLineHeightPx:[20,20,18],ctaHeightPx:[36,44,36],progressHeightPx:[1,2,3]},filterData:{pointsCnt:3,direction:[0,0,1],maxHeightOnCol:[550,9999,9999]},filters:{direction:function(e){return this.direction===e},maxHeightOnCol:function(e){return this.size.height<=e}},mapper:ni}}},controls:{progress:{show:!0,classes:["_mk_control_progress"],renderBy:"progress"},flow:{show:!0,pos:"leftbottom",order:"1",classes:["_mk_control_icon","_mk_control_flow"],renderBy:"state"},volume:{show:!0,classes:["_mk_control_icon","_mk_control_volume"],renderBy:["muted","volume"],order:"5"}},defaults:{ageRestrictions:"0+",ctaText:"Перейти на сайт"},actions:oi,icons:{hide:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.96 5.5a.75.75 0 0 1 0-1.5c2.04 0 4.14.55 5.92 1.58C17.57 6.56 19 8.07 19 10c0 1-.4 1.9-1 2.66a.75.75 0 1 1-1.17-.94c.44-.55.67-1.13.67-1.72 0-1.13-.86-2.24-2.38-3.12A10.41 10.41 0 0 0 9.96 5.5ZM4.12 14.42C5.84 15.42 8.04 16 10 16c1.6 0 3.36-.39 4.87-1.07l.85.85a.75.75 0 1 0 1.06-1.06L5.28 3.22a.75.75 0 0 0-1.06 1.06l.82.82a8.95 8.95 0 0 0-2.57 1.72A4.5 4.5 0 0 0 1 10c0 1.93 1.43 3.44 3.12 4.42ZM8.5 10a1.5 1.5 0 0 0 2.53 1.1L8.91 8.96c-.25.27-.41.63-.41 1.03ZM7 10a3 3 0 0 0 5.1 2.15l1.63 1.64c-1.2.45-2.53.71-3.73.71-1.7 0-3.64-.51-5.12-1.38C3.36 12.24 2.5 11.13 2.5 10c0-.73.35-1.45 1.03-2.12a7.93 7.93 0 0 1 2.66-1.63L7.85 7.9A2.99 2.99 0 0 0 7 10Z" fill="#99A2AD"/></svg>',complain:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="#99A2AD"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.38 3.36a2.76 2.76 0 0 0-4.76 0l-6.1 10.5A2.76 2.76 0 0 0 3.92 18h12.17a2.76 2.76 0 0 0 2.39-4.15l-6.1-10.49Zm3.7 13.14a1.26 1.26 0 0 0 1.1-1.9l-6.1-10.48s-.33-.63-1.08-.63-1.08.63-1.08.63L2.82 14.6a1.26 1.26 0 0 0 1.1 1.9h12.17Z" fill="#99A2AD"/><path fill-rule="evenodd" clip-rule="evenodd" d="M10 6c.41 0 .75.33.75.75v4.5a.75.75 0 0 1-1.5 0v-4.5c0-.42.34-.75.75-.75Z" fill="#99A2AD"/></svg>',about:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.1 3H8.9c-1.14 0-1.91 0-2.5.05-.58.05-.85.13-1.03.22a2.5 2.5 0 0 0-1.1 1.1c-.09.18-.17.45-.22 1.02C4 6 4 6.76 4 7.9v4.2c0 1.14 0 1.91.05 2.5.05.58.13.85.22 1.04.24.47.62.85 1.1 1.09.18.09.45.17 1.02.22C7 17 7.76 17 8.9 17h2.2c1.14 0 1.91 0 2.5-.05.58-.05.85-.13 1.04-.22a2.5 2.5 0 0 0 1.09-1.1c.09-.18.17-.45.22-1.03.05-.59.05-1.36.05-2.5V7.9c0-1.14 0-1.91-.05-2.5a2.72 2.72 0 0 0-.22-1.03 2.5 2.5 0 0 0-1.1-1.1c-.18-.09-.45-.17-1.03-.22C13.02 3 12.25 3 11.1 3Zm-8.16.68c-.44.86-.44 1.98-.44 4.22v4.2c0 2.24 0 3.36.44 4.22a4 4 0 0 0 1.74 1.74c.86.44 1.98.44 4.22.44h2.2c2.24 0 3.36 0 4.22-.44a4 4 0 0 0 1.74-1.74c.44-.86.44-1.98.44-4.22V7.9c0-2.24 0-3.36-.44-4.22a4 4 0 0 0-1.74-1.74c-.86-.44-1.98-.44-4.22-.44H8.9c-2.24 0-3.36 0-4.22.44a4 4 0 0 0-1.74 1.74Z" fill="#99A2AD"/><path d="M12 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM6 11.25c0-.41.34-.75.75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75ZM6 14.25c0-.41.34-.75.75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#99A2AD"/></svg>',copyUrl:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.52 4.18c.9-.9 2.39-.9 3.3 0 .9.9.9 2.34 0 3.24l-.69.68a.75.75 0 0 0 1.06 1.06l.68-.68a3.77 3.77 0 0 0 0-5.37 3.86 3.86 0 0 0-5.4 0L8.12 6.4a3.77 3.77 0 0 0 0 5.37.75.75 0 1 0 1.05-1.06c-.9-.9-.9-2.35 0-3.25l3.34-3.3Z" fill="#99A2AD"/><path d="M7.48 15.82c-.9.9-2.39.9-3.3 0-.9-.9-.9-2.34 0-3.24l.69-.68a.75.75 0 0 0-1.06-1.06l-.68.68a3.77 3.77 0 0 0 0 5.37 3.86 3.86 0 0 0 5.4 0l3.34-3.3a3.77 3.77 0 0 0 0-5.37.75.75 0 0 0-1.05 1.06c.9.9.9 2.35 0 3.25l-3.34 3.3Z" fill="#99A2AD"/></svg>',copyErid:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M9.2 3C7.91513 3 7.04169 3.00117 6.36656 3.05633C5.70893 3.11006 5.37263 3.20745 5.13803 3.32698C4.57354 3.6146 4.1146 4.07354 3.82698 4.63803C3.70745 4.87263 3.61006 5.20893 3.55633 5.86656C3.50117 6.54169 3.5 7.41513 3.5 8.7V11.3C3.5 11.8848 3.50117 12.2332 3.52227 12.4914C3.53128 12.6017 3.5423 12.6673 3.55 12.7028V12.8C3.55 13.5611 3.55 14.0636 3.61838 14.4418C3.41332 14.4096 3.24429 14.3596 3.09202 14.282C2.71569 14.0903 2.40973 13.7843 2.21799 13.408C2 12.9802 2 12.4201 2 11.3V8.7C2 6.17976 2 4.91965 2.49047 3.95704C2.9219 3.11031 3.61031 2.4219 4.45704 1.99047C5.41965 1.5 6.67976 1.5 9.2 1.5H11.2C12.3201 1.5 12.8802 1.5 13.308 1.71799C13.6843 1.90973 13.9903 2.21569 14.182 2.59202C14.2519 2.72915 14.2994 2.87986 14.3316 3.05824C13.9605 3 13.4714 3 12.75 3H9.2Z" fill="#99A2AD"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.1 7.7C5.1 6.5799 5.1 6.01984 5.31799 5.59202C5.50973 5.21569 5.81569 4.90973 6.19202 4.71799C6.61984 4.5 7.17989 4.5 8.3 4.5H14.3C15.4201 4.5 15.9802 4.5 16.408 4.71799C16.7843 4.90973 17.0903 5.21569 17.282 5.59202C17.5 6.01984 17.5 6.5799 17.5 7.7V15.3C17.5 16.4201 17.5 16.9802 17.282 17.408C17.0903 17.7843 16.7843 18.0903 16.408 18.282C15.9802 18.5 15.4201 18.5 14.3 18.5H8.3C7.1799 18.5 6.61984 18.5 6.19202 18.282C5.81569 18.0903 5.50973 17.7843 5.31799 17.408C5.1 16.9802 5.1 16.4201 5.1 15.3V7.7ZM8.3 6H14.3C14.8848 6 15.2332 6.00117 15.4914 6.02227C15.6491 6.03514 15.7153 6.05214 15.7331 6.05765C15.8224 6.10469 15.8953 6.17765 15.9424 6.26693C15.9479 6.28468 15.9649 6.35094 15.9777 6.50855C15.9988 6.76681 16 7.1152 16 7.7V15.3C16 15.8848 15.9988 16.2332 15.9777 16.4914C15.9649 16.6491 15.9479 16.7153 15.9424 16.7331C15.8953 16.8224 15.8224 16.8953 15.7331 16.9424C15.7153 16.9479 15.6491 16.9649 15.4914 16.9777C15.2332 16.9988 14.8848 17 14.3 17H8.3C7.7152 17 7.36681 16.9988 7.10855 16.9777C6.95094 16.9649 6.88469 16.9479 6.86693 16.9424C6.77765 16.8953 6.70469 16.8224 6.65765 16.7331C6.65214 16.7153 6.63514 16.6491 6.62227 16.4914C6.60117 16.2332 6.6 15.8848 6.6 15.3V7.7C6.6 7.1152 6.60117 6.76681 6.62227 6.50855C6.63514 6.35093 6.65214 6.28468 6.65765 6.26693C6.70469 6.17765 6.77765 6.10469 6.86693 6.05765C6.88468 6.05214 6.95094 6.03514 7.10855 6.02227C7.36681 6.00117 7.7152 6 8.3 6ZM15.7383 6.05945L15.7352 6.05833C15.7374 6.05904 15.7383 6.05943 15.7383 6.05945ZM15.9405 6.26175C15.9406 6.26169 15.941 6.26264 15.9417 6.26478L15.9405 6.26175ZM15.9405 16.7383L15.9417 16.7352C15.941 16.7373 15.9406 16.7383 15.9405 16.7383ZM15.7382 16.9405C15.7383 16.9406 15.7374 16.9409 15.7353 16.9417L15.7382 16.9405ZM6.86175 16.9405L6.86478 16.9417C6.86265 16.941 6.86169 16.9406 6.86175 16.9405ZM6.65945 16.7383C6.65943 16.7383 6.65904 16.7374 6.65833 16.7352L6.65945 16.7383ZM6.65945 6.26175L6.65833 6.26478C6.65904 6.26264 6.65943 6.26169 6.65945 6.26175ZM6.86214 6.05927C6.86185 6.05938 6.86212 6.05926 6.86214 6.05927L6.86478 6.05833C6.86347 6.05877 6.8626 6.05908 6.86214 6.05927Z" fill="#99A2AD"/>\n</svg>\n',rules:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 9.25C10.4142 9.25 10.75 9.58579 10.75 10V14C10.75 14.4142 10.4142 14.75 10 14.75C9.58579 14.75 9.25 14.4142 9.25 14V10C9.25 9.58579 9.58579 9.25 10 9.25Z" fill="#99A2AD"/>\n<path d="M11 7C11 7.55228 10.5523 8 10 8C9.44772 8 9 7.55228 9 7C9 6.44772 9.44772 6 10 6C10.5523 6 11 6.44772 11 7Z" fill="#99A2AD"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3.98959 3.98959C5.52697 2.45222 7.653 1.5 10 1.5C12.347 1.5 14.473 2.45222 16.0104 3.98959C17.5478 5.52697 18.5 7.653 18.5 10C18.5 12.347 17.5478 14.473 16.0104 16.0104C14.473 17.5478 12.347 18.5 10 18.5C7.653 18.5 5.52697 17.5478 3.98959 16.0104C2.45222 14.473 1.5 12.347 1.5 10C1.5 7.653 2.45222 5.52697 3.98959 3.98959ZM10 3C8.0668 3 6.31782 3.78268 5.05025 5.05025C3.78268 6.31782 3 8.0668 3 10C3 11.9332 3.78268 13.6822 5.05025 14.9497C6.31782 16.2173 8.0668 17 10 17C11.9332 17 13.6822 16.2173 14.9497 14.9497C16.2173 13.6822 17 11.9332 17 10C17 8.0668 16.2173 6.31782 14.9497 5.05025C13.6822 3.78268 11.9332 3 10 3Z" fill="#99A2AD"/>\n</svg>\n',vkAds:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M1 9.55712C1 5.52373 1 3.50308 2.25351 2.25351C3.50703 1.00395 5.52373 1 9.55712 1H10.4429C14.4763 1 16.493 1 17.7465 2.25351C19 3.50703 19 5.52373 19 9.55712V10.4429C19 14.4763 19 16.493 17.7465 17.7465C16.493 19 14.4763 19 10.4429 19H9.55712C5.52373 19 3.50703 19 2.25351 17.7465C1 16.493 1 14.4763 1 10.4429V9.55712Z" fill="#0077FF"/>\n<path d="M10.0002 16.2992C13.4796 16.2992 16.3002 13.4786 16.3002 9.99922C16.3002 6.51983 13.4796 3.69922 10.0002 3.69922C6.5208 3.69922 3.7002 6.51983 3.7002 9.99922C3.7002 13.4786 6.5208 16.2992 10.0002 16.2992Z" fill="#00D3E6"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5829 3.25729V4.4128H16.7463C16.8939 4.41196 17.0384 4.45382 17.1618 4.53313C17.2852 4.61244 17.3819 4.72568 17.4399 4.85863C17.4978 4.99157 17.5143 5.13832 17.4874 5.28044C17.4605 5.42257 17.3914 5.55374 17.2886 5.65751L15.6947 7.27928C15.6247 7.35109 15.5405 7.40823 15.4473 7.44726C15.3541 7.48628 15.2537 7.50638 15.1524 7.50633H13.6454L12.0846 9.16053C12.2038 9.43906 12.2644 9.73832 12.2626 10.0403C12.2626 10.4774 12.1303 10.9046 11.8824 11.268C11.6344 11.6313 11.2821 11.9146 10.8698 12.0818C10.4575 12.249 10.0038 12.2928 9.56613 12.2075C9.12845 12.1223 8.72641 11.9118 8.41086 11.6028C8.09531 11.2938 7.88042 10.9001 7.79336 10.4714C7.7063 10.0428 7.75098 9.5985 7.92175 9.19474C8.09253 8.79098 8.38172 8.44588 8.75277 8.20308C9.12382 7.96027 9.56006 7.83068 10.0063 7.83068C10.2133 7.83065 10.4194 7.85793 10.619 7.91177L12.4117 5.98592V4.76959C12.4118 4.66937 12.4328 4.57023 12.4734 4.47821C12.514 4.3862 12.5733 4.30325 12.6476 4.23441L14.3037 2.69778C14.4107 2.60017 14.5445 2.53519 14.6887 2.51078C14.8328 2.48638 14.9811 2.5036 15.1155 2.56035C15.2498 2.6171 15.3644 2.71092 15.4452 2.83036C15.526 2.9498 15.5695 3.0897 15.5705 3.23297L15.5829 3.25729Z" fill="white"/>\n</svg>\n'},handlers:ei,adChoices:ri,adChoicesFallback:ii,charWidths:Ce({10:[0],32:[5.94,6.18,6.44,14.78,13.48,17.58,14.92,2.96,8.2,8.34,10.34,13.6,4.72,6.62,6.32,7.32,13.48,13.48,13.48,13.48,13.48,13.48,13.48,13.48,13.48,13.48,5.82,5.08,12.2,13.18,12.54,11.34,21.56,15.66,14.94,15.62,15.74,13.64,13.26,16.34,17.1,6.52,13.24,15.04,12.92,20.96,17.1,16.5,15.14,16.5,14.78,14.24,14.5,15.56,15.26,21.3,15.04,14.62,14.36,6.36,9.84,6.36,10.04,10.82,7.42,13.06,13.46,12.56,13.54,12.72,8.34,13.46,13.22,5.82,5.74,12.16,5.82,21.04,13.24,13.68,13.46,13.64,8.12,12.38,7.84,13.24,11.62,18.04,11.9,11.36,11.9,8.02,6.24,8.02],1040:[15.66,15.12,14.94,13.34,18.28,13.64,21.78,14.24,17.1,17.1,15.42,17.18,20.96,17.1,16.5,17.12,15.14,15.62,14.5,15.08,18.52,15.04,17.54,16.1,22.58,23.26,18.22,20.76,14.36,16.18,21.46,15.28,13.06,13.26,13.72,10.06,14.72,12.72,18.38,12.18,13.86,13.86,12.96,13.88,17.8,13.84,13.68,13.86,13.46,12.56,11.54,11.36,17.4,11.9,14.22,13.04,19.4,19.86,14.9,18.64,13.04,12.9,19.58,13.18,12.72,12.72,13.22],1025:[13.64]})},si=[[0,140],[400,150],[500,200],[800,250],[1400,400],[1600,550]],li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"getDirection",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var r=45+7*Math.round(e.height/40),n=function(e,t){for(var i=0,r=t.length;++i<r&&!(t[i][0]>e););return t[i-1][1]}(e.width,si),o=e.height-r-t,a=e.width-n;return o*Math.round(o*i)>=a*Math.round(a/i)?0:1}}),Object.defineProperty(t.prototype,"process",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(!this.isDestroyed){var t=this.size,i=t.width,r=t.height;this.direction=this.isMobile?0:this.getDirection(this.size,0,this.ratio),this.view=this.isMobile?"mobile":this.store.isFullscreen?"fullscreen":"onpage",this.store.rootNode.element.setAttribute("view",this.view),this.store.rootNode.element.setAttribute("direction",this.direction?"row":"column");var n=this.getVariant()||this.vars[0];this.store.rootNode.element.setAttribute("layout",String(n.layout));var o=2*n.rootPaddingPx||0,a=Math.max(+this.store.initConfig.maxHeight||0,r);this.store.disclaimerPaddings=n.horPaddingPx;var s=0===this.direction&&Boolean(this.engine.disclaimer);n.bottomPaddingPx=s?0:n.vertPaddingPx;var l=this.engine.disclaimer?this.engine.disclaimer.resize(i,a,i-o).height+(this.store.isFullscreen?n.rootPaddingPx:0):0,d=Math.floor(i-o),c=18+3*n.gapPx+n.textCtaHeightPx,u=Math.floor(r-o-l),h=0,p="mediaWrap",f="infoWrap",b=a-o-l;this.hasTextBlock?0==this.direction?(n.direction="column",b-=n.areaGapPx,n.infoWidthPx=n.mediaWidthPx=d,n.mediaHeightPx=Math.floor(Math.min(n.mediaWidthPx/this.ratio,.7*b,b-c-n.titleLineHeightPx-n.vertPaddingPx*(s?1:2))),n.infoHeightPx=Math.floor(b-n.mediaHeightPx)):(n.direction="row",d-=n.areaGapPx,n.infoHeightPx=n.mediaHeightPx=b,n.mediaWidthPx=se(d/2,.7*d,b*this.ratio,!0),n.infoWidthPx=Math.floor(d-n.mediaWidthPx-n.rootPaddingPx)):(n.infoWidthPx=n.infoHeightPx=0,n.mediaWidthPx=d,n.mediaHeightPx=Math.floor(Math.max(u,Math.min(n.mediaWidthPx/this.ratio,b-n.areaGapPx))));var v=this.hasTextBlock?Re({width:n.infoWidthPx-(2*n.horPaddingPx||0),height:n.infoHeightPx-c-(n.vertPaddingPx*(s?1:2)||0),gap:n.gapPx,charMap:this.store.meta.charWidths,lines:[{name:"title",fontSize:n.titleFsPx,lineHeight:n.titleLineHeightPx,words:this.store.calcText.title},{name:"description",fontSize:n.descFsPx,lineHeight:n.descLineHeightPx,words:this.store.calcText.description}]}):m();n.titleLines=v.title||0,n.descLines=v.description||0;var g=Math.floor(n.mediaWidthPx/this.ratio);n.descDisplay=this.noData.description||!n.descLines?"none":"block",this.hasTextBlock&&(p="adChoicePlace",0==this.direction?(h=n.titleLines*n.titleLineHeightPx+n.descLines*n.descLineHeightPx+(n.descLines?n.gapPx:0),n.infoHeightPx=h+c+(n.areaGapPx?0:2*n.vertPaddingPx),n.mediaHeightPx=se(b-n.infoHeightPx-n.areaGapPx,g,n.mediaHeightPx,!0),u=n.infoHeightPx+n.mediaHeightPx+2*n.rootPaddingPx+n.areaGapPx):u=n.mediaHeightPx=n.infoHeightPx=se(u,b,g,!0));var _=this.engine.disclaimer?this.engine.disclaimer.resize(i,u+o+(n.gapPx||0),i-o,!0).height+(this.store.isFullscreen?n.rootPaddingPx:0):0;u+=_,n.mainHeightPx=u+o,this.isSizeUp=n.mainHeightPx>r,this.isSizeUp&&(this.store._root_size.height=n.mainHeightPx,this.store.skipResize=!0,setTimeout((function(){return e.store&&(e.store.parentElement.style.height=n.mainHeightPx+"px")}),35)),this.hasTextBlock&&0===this.direction?n.infoHeightPx=u-n.mediaHeightPx-_-n.areaGapPx:this.hasTextBlock&&1===this.direction&&(n.infoHeightPx=n.mediaHeightPx=u-_),this.hasTextBlock&&n.infoWidthPx<360&&(n.textCtaWidth="100%"),this.hasTextBlock&&h+40<.5*n.infoHeightPx&&(f="textArea"),n.addXOffsetPx=this.store.allowClose?37:0,this.setCssVars(n),this.setProps({_media_size:{width:n.mediaWidthPx,height:n.mediaHeightPx},headerPlace:p,ctaInfoButtonPlace:f})}}}),t}(Qt),di={classPrefix:"_mk_rw_",tree:{root:{role:"background",ch:["workArea","disclaimer","closeBtnWrap"],tr:1,wr:[{e:3,LISTEN:"ready",LISTENGLOBAL:"_media_ratio",SIZE:"_root_size"}]},workArea:{ch:["mediaWrap","vpaidWrap","infoWrap"]},mediaWrap:{ch:["media","mediaBackground","header","ctaArea","controls"],role:"image",iif:{e:2,prop:"vpaid.src"}},media:{bl:{e:1,destroyOnError:!0},tr:3,wr:[7,{e:8,replay:!0,mode:"master"}]},mediaBackground:{bl:{e:1,SRC:"$$media"},wr:{e:8,LISTEN:"media",mode:"slave"}},vpaidWrap:{ch:["vpaidRunner","vpaidControls"],iif:{e:1,prop:"vpaid.src"}},vpaidRunner:{bl:7},vpaidControls:{wr:{e:6,LISTEN:"vpaidRunner"}},controls:{wr:{e:6,LISTEN:"media"}},infoWrap:{ch:["adChoicePlace","textArea","ctaInfoButtonWrap"],iif:{e:1,prop:"title"}},adChoicePlace:{},textArea:{ch:["title","description"],tr:1},title:{role:"title",wr:{e:2,action:"clearEscSeq"},an:1},description:{role:"description",wr:{e:2,action:"clearEscSeq"},iif:{e:1,prop:"description"}},ctaInfoButtonWrap:{ch:["ctaInfoButton"],wr:[{e:5,LISTEN:"ctaInfoButtonPlace"}]},ctaInfoButton:{role:"ctabutton",wr:{e:2,TEXT:"ctaText",default:"Перейти"}},header:{ch:["headerIcon","headerLabel","adChoice"],wr:[{e:5,LISTEN:"headerPlace"}]},headerIcon:{txt:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M0 7.2c0-3.4 0-5.1 1.05-6.15C2.11 0 3.8 0 7.2 0h.6c3.4 0 5.1 0 6.15 1.05C15 2.11 15 3.8 15 7.2v.6c0 3.4 0 5.1-1.05 6.15C12.89 15 11.2 15 7.8 15h-.6c-3.4 0-5.1 0-6.15-1.05C0 12.89 0 11.2 0 7.8Zm13-4.06a.6.6 0 0 1 .39 1.03l-1.41 1.4a.75.75 0 0 1-.62.22l-.96-.08-1.2 1.2a1.8 1.8 0 1 1-1.04-1.09l1.18-1.17-.12-1a.74.74 0 0 1 .22-.62l1.4-1.4a.6.6 0 0 1 1.03.37l.04 1.08Zm-5.1-.43a4.82 4.82 0 0 0-5.15 5.51 4.8 4.8 0 0 0 9.53-1.14l-1.6-.13a3.23 3.23 0 1 1-2.6-2.63Zm0 0" fill-rule="evenodd" fill="currentColor"/></svg>'},headerLabel:{role:"label",wr:{e:2,TEXT:"adLabel.text",default:"Реклама",before:1,action:"split"},ch:"ageRestrictions",iif:{e:3,prop:"adLabel.show",value:!1}},ageRestrictions:{role:"agerestrictions",wr:2,iif:{e:1,prop:"ageRestrictions"}},adChoice:{role:"aсMenu",txt:'<svg width="14" height="14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 12.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11ZM14 7A7 7 0 1 1 0 7a7 7 0 0 1 14 0Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 11a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5A.75.75 0 0 1 7 11Z" fill="currentColor"/><path d="M6.1 3.9a.9.9 0 1 1 1.8 0 .9.9 0 0 1-1.8 0Z" fill="currentColor"/></svg>'},disclaimer:{bl:{e:3,view:"stable"},role:"disclaimer"},disclaimerColumn:{bl:{e:3,view:"column",SRC:"media"},role:"disclaimer"},disclaimerRow:{bl:{e:3,view:"row"},role:"disclaimer"},ctaArea:{ch:["ctaLogo","ctaLinkText","ctaButton"],iif:[{e:2,prop:"title"}]},ctaLogo:{bl:{e:1,SRC:"icon.src"},role:"icon",an:3,iif:[{e:1,prop:"icon"}]},ctaLinkText:{wr:{e:2,TEXT:"cta.buttonLinkText"},role:"domain"},ctaButton:{role:"ctabutton",ch:["ctaText"]},ctaText:{wr:{e:2,default:"Перейти"}},closeBtnWrap:{role:"closeBanner",ch:["closeBtn","closeDelayCountdown"],iif:[{e:5,prop:"allowClose",value:!0}]},closeDelayCountdown:{role:"nothing",txt:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" stroke-width="2" viewBox="-14 -14 28 28"><circle r="12" pathLength="1"></circle></svg>',wr:{e:9,LISTENGLOBAL:"currentTime",action:"onTimerForCloseDelay"}},closeBtn:{txt:'<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.41 6.41c.3-.3.8-.3 1.1 0L11 9.91l3.49-3.5a.78.78 0 0 1 1.1 1.1L12.09 11l3.5 3.49a.78.78 0 0 1-1.1 1.1L11 12.09l-3.49 3.5a.78.78 0 0 1-1.1-1.1L9.91 11 6.4 7.51c-.3-.3-.3-.8 0-1.1Z" fill="currentColor"/>\n</svg>'}},mappingPro:{root:{size:{vars:{titleFsPx:[20,24,24,20],titleLineHeightPx:[24,30,30,24],descFsPx:[16,15,15,15],descLineHeightPx:[20,20,20,20],rootPaddingPx:[0,0,0,20],horPaddingPx:[16,24,20,0],vertPaddingPx:[16,20,20,0],areaGapPx:[0,0,0,20],gapPx:[6,12,16,6],logoSizePx:[16,20,20,20],textCtaHeightPx:[44,40,40,40],textCtaRadiusPx:[8,12,12,12],textCtaFSPx:[16,15,15,15],textCtaTopMarginPx:[16,16,16,40],menuOffsetPx:[16,16,16,12],rootRadiusPx:[0,12,12,12],layout:[100,200,300,400]},filterData:{pointsCnt:4,view:["mobile","onpage","onpage","fullscreen"],direction:["*",0,1,"*"]},filters:{view:function(e){return this.view===e},direction:function(e){return this.direction===e||"*"===e}},mapper:li}}},allowClose:!1,closeOnCompleted:!0,calcTextOnInit:["title","description"],toCheck:["title","description","domain","icon","aboutCompany"],controls:{progress:{show:!0,classes:["_mk_control_progress"],renderBy:"progress",order:"1"},volume:{show:!0,classes:["_mk_control_icon","_mk_control_volume"],renderBy:["muted","volume"],order:"5",pos:"common"},flow:{show:!1}},wrappers:{common:["_mk_rw_rightBottomWrap"]}};Object.setPrototypeOf(di,ai);var ci,ui,hi={vkGames_interstitial:ai,vkGames_interstitial_lead_form:ai,vkGames_rewards:di},pi=p({asmName:"VKGames",css:{fonts:String('@font-face{font-family:BebasNeue;font-style:normal;font-weight:100;src:url(https://r.mradx.net/img/1B/4D1CA3.woff2) format("woff2")}@font-face{font-family:BebasNeue;font-style:normal;font-weight:300;src:url(https://r.mradx.net/img/BD/E58F98.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:100;src:url(https://r.mradx.net/img/AB/96ACC2.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:300;src:url(https://r.mradx.net/img/FA/D8007F.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(https://r.mradx.net/img/85/9E13F5.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:500;src:url(https://r.mradx.net/img/1B/179489.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:600;src:url(https://r.mradx.net/img/9B/7002EA.woff2) format("woff2")}@font-face{font-family:Roboto;font-style:normal;font-weight:900;src:url(https://r.mradx.net/img/BC/D80775.woff2) format("woff2")}@font-face{font-display:swap;font-family:Roboto;font-style:italic;font-weight:100;src:url(https://r.mradx.net/img/AB/64CB0F.woff2) format("woff2");unicode-range:u+0301,u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:300;src:url(https://r.mradx.net/img/2E/E38809.woff2) format("woff2");unicode-range:u+0301,u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:400;src:url(https://r.mradx.net/img/32/E18AE4.woff2) format("woff2");unicode-range:u+0301,u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:500;src:url(https://r.mradx.net/img/41/F0F056.woff2) format("woff2");unicode-range:u+0301,u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:600;src:url(https://r.mradx.net/img/EC/85284F.woff2) format("woff2");unicode-range:u+0301,u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Roboto;font-style:normal;font-weight:900;src:url(https://r.mradx.net/img/68/20C3BF.woff2) format("woff2");unicode-range:u+0301,u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}'),popup:String('._mk_popup{align-items:center;background:rgba(0,0,0,.4);box-sizing:border-box;display:flex;flex-direction:row;height:100vh;justify-content:center;left:0;overflow:auto;padding:7vh 0;position:fixed;top:0;width:100vw;z-index:1000000}._mk_popup_body{background-color:#fff;-webkit-box-shadow:12px 12px 8px 0 rgba(34,60,80,.2);-moz-box-shadow:12px 12px 8px 0 rgba(34,60,80,.2);box-shadow:12px 12px 8px 0 rgba(34,60,80,.2);box-sizing:border-box;color:#fefefe;max-height:800px;max-width:630px;position:relative;z-index:20}._mk_popup_body,._mk_popup_frame{border-radius:16px;height:100%;width:100%}._mk_popup_frame{border:none;box-sizing:inherit;overflow:hidden}._mk_popup_closeButton{background-color:rgba(0,0,0,.35);background-color:#000;background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMiAyMiI+PHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi40MSA2LjQxYy4zLS4zLjgtLjMgMS4xIDBMMTEgOS45MWwzLjQ5LTMuNWEuNzguNzggMCAwIDEgMS4xIDEuMUwxMi4wOSAxMWwzLjUgMy40OWEuNzguNzggMCAwIDEtMS4xIDEuMUwxMSAxMi4wOWwtMy40OSAzLjVhLjc4Ljc4IDAgMCAxLTEuMS0xLjFMOS45MSAxMSA2LjQgNy41MWMtLjMtLjMtLjMtLjggMC0xLjFaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=");background-position:50%;background-repeat:no-repeat;background-size:100%;border-radius:14px;box-sizing:border-box;cursor:pointer;height:28px;opacity:.35;padding:4px;position:absolute;transition:transform .15s ease-in,opacity .15s ease-in-out;width:28px}@media(min-width:700px){._mk_popup_closeButton{right:-38px;top:0}}@media(max-width:699px){._mk_popup_closeButton{right:10px;top:10px}}._mk_popup_closeButton:hover{opacity:.55;transform:scale(1.1) rotate(90deg)}'),vkGamesInterstitial:String('._mk_disclaimer{background-color:var(--mk-bgContent,transparent);box-sizing:border-box;display:flex;height:var(--mk-sdHeight,0);max-width:100%;padding:var(--mk-sdPadding,2px);position:relative;user-select:none;width:100%;z-index:10}._mk_disclaimer_place{display:none;position:relative;width:100%;z-index:50}._mk_disclaimer_place_bg:before{background:hsla(210,1%,41%,.498);content:"";display:block;height:100%;left:0;position:absolute;right:0;width:100%;z-index:2}._mk_disclaimer_place_bg{background-position:bottom;background-size:cover;bottom:-10px;filter:blur(8px);height:calc(100% + 20px);left:-10px;overflow:hidden;position:absolute;width:calc(100% + 20px);z-index:1}._mk_disclaimer_line{display:flex;flex-direction:column;height:var(--mk-sdLineHeight);justify-content:center;width:100%}._mk_disclaimer_linesWrap{display:flex;flex-direction:column;height:100%;justify-content:space-between;position:relative;width:100%;z-index:10}._mk_disclaimer_text{color:var(--mk-cDisclaimer,#818c99);display:inline-block;font:24px/24px BebasNeue,sans-serif;font-weight:var(--mk-sdFontWeidht,100);height:24px;position:relative;transform:translateY(2.5px);transform-origin:left center;width:100%}._mk_disclaimer_measure,._mk_disclaimer_text{letter-spacing:normal;text-transform:uppercase;white-space:nowrap}._mk_disclaimer_measure{font:24px/24px BebasNeue,sans-serif;font-weight:var(--mk-disclaimer-fontWeidht,300);height:auto;left:-1000px;position:absolute;top:-1000px;visibility:hidden}._mk_hidden{display:none}._mk_clickArea{cursor:pointer!important}._mk_noClickArea{cursor:default!important}.volumeTooltip{--tooltip-arrow-size:5px;background:rgba(0,0,0,.88);border-radius:4px;bottom:40px;display:none;font-size:12.5px;line-height:15px;padding:4.5px 9px;pointer-events:none;position:absolute;text-align:center;z-index:100}.volumeTooltip ._vText{color:#fff;font-variant-numeric:tabular-nums;white-space:nowrap}.volumeTooltip ._vArrow{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid rgba(0,0,0,.88);left:50%;margin-left:-5px;position:absolute;top:100%}._mk_control{align-items:center;box-sizing:border-box;display:flex;flex-direction:row;font-size:13px;height:var(--controls-height,40px);justify-content:space-between;padding:0 8px 4px;transition:transform var(--controls-transition-duration) var(--controls-transition-fn);white-space:nowrap;width:100%;will-change:transform}._mk_control_wrapper{bottom:var(--total-bottom-offset,0);display:flex;gap:var(--control-gap,16px);height:40px;left:0;padding:8px;position:absolute;width:100%;z-index:120}._mk_control_wrapper_left{display:flex;flex-direction:row;justify-content:flex-start;left:var(--offset-left,var(--offset-x,8px))}._mk_control_cta,._mk_control_skip{cursor:pointer}._mk_control_icon{background-position:50%;background-repeat:no-repeat;background-size:contain;border-radius:var(--controlRadius,6px);cursor:pointer;height:var(--mkit-controlSize,26px);position:relative;width:var(--mkit-controlSize,26px)}._mk_control_icon:hover{scale:1.1}._mk_control_icon:before{bottom:-7px;content:"";height:40px;left:-7px;position:absolute;width:40px;z-index:100}._mk_control_volume[data-state=volume-off]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtdmFsdWU9Im9mZiIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Im0yMCAxMC43NjMgMi4zODEtMi4zODJBLjg3NS44NzUgMCAxIDEgMjMuNjIgOS42MkwyMS4yMzcgMTJsMi4zODIgMi4zODFhLjg3NS44NzUgMCAxIDEtMS4yMzggMS4yMzhMMjAgMTMuMjM3bC0yLjM4MSAyLjM4MmEuODc1Ljg3NSAwIDEgMS0xLjIzOC0xLjIzOEwxOC43NjMgMTIgMTYuMzggOS42MTlhLjg3NS44NzUgMCAxIDEgMS4yNC0xLjIzOXptLTcuMDIgOC4wNmMtLjAzMSAxLjIwNy0uNjcgMS42MDktMS44MjguNjItMS43MTktMS40NjktMy42MDktMy4xOTQtNC4yNDItMy43MjEtLjYzMi0uNTI5LTEuNjQ1LS42Mi0zLjA3My0uNjJzLTEuODE1LS42MjEtMS44MTUtMS4yNDEtLjAxNC0xLjgzLS4wMTQtMi4wMDFjMC0uMDU1LjAwNS0uMDg2LjAxNC0uMTMuMDItLjA5NS0uMDU4LS45NzMgMC0xLjU5LjA4NS0uOTA2LjM4OC0xLjI0MSAxLjgxNS0xLjI0MXMyLjQ0LS4wOTIgMy4wNzMtLjYyYy42MzMtLjUyOSAyLjUyMy0yLjI1MyA0LjI0Mi0zLjcyMiAxLjE1OC0uOTg5IDEuNzk3LS41ODcgMS44MjkuNjIuMDQzIDEuNjA3IDAgMy44NSAwIDYuNjgzIDAgMi44My4wNDMgNS4zNTYgMCA2Ljk2M3oiLz48L3N2Zz4=")}._mk_control_volume[data-state=volume-on]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtdmFsdWU9Im9mZiIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi45OCAxOC44MjNjLS4wMzEgMS4yMDctLjY3IDEuNjA5LTEuODI4LjYyLTEuNzE5LTEuNDY5LTMuNjA5LTMuMTk0LTQuMjQyLTMuNzIxLS42MzItLjUyOS0xLjY0NS0uNjItMy4wNzMtLjYycy0xLjgxNS0uNjIxLTEuODE1LTEuMjQxLS4wMTQtMS44My0uMDE0LTIuMDAxYzAtLjA1NS4wMDUtLjA4Ni4wMTQtLjEzLjAyLS4wOTUtLjA1OC0uOTczIDAtMS41OS4wODUtLjkwNi4zODgtMS4yNDEgMS44MTUtMS4yNDFzMi40NC0uMDkyIDMuMDczLS42MmMuNjMzLS41MjkgMi41MjMtMi4yNTMgNC4yNDItMy43MjIgMS4xNTgtLjk4OSAxLjc5Ny0uNTg3IDEuODI5LjYyLjA0MyAxLjYwNyAwIDMuODUgMCA2LjY4MyAwIDIuODMuMDQzIDUuMzU2IDAgNi45NjN6bTIuOTAxLTguNzA0QS44NzUuODc1IDAgMSAxIDE3LjEyIDguODhjLjE3Ni4xNzcuNDEuNDcuNjQuODcyLjM4NC42NzEuNjE2IDEuNDI1LjYxNiAyLjI0N3MtLjIzMiAxLjU3Ni0uNjE1IDIuMjQ3YTQuMiA0LjIgMCAwIDEtLjY0MS44NzIuODc1Ljg3NSAwIDEgMS0xLjIzOC0xLjIzOGMuMDc0LS4wNzMuMjE0LS4yNDkuMzYtLjUwMy4yNDEtLjQyMy4zODQtLjg4Ny4zODQtMS4zNzhzLS4xNDMtLjk1NS0uMzg1LTEuMzc4YTIuNiAyLjYgMCAwIDAtLjM1OS0uNTAzeiIvPjwvc3ZnPg==")}._mk_control_volume[data-state=volume-on-high]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtdmFsdWU9Im9mZiIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi45OCAxOC44MjNjLS4wMzEgMS4yMDctLjY3IDEuNjA5LTEuODI4LjYyLTEuNzE5LTEuNDY5LTMuNjA5LTMuMTk0LTQuMjQyLTMuNzIxLS42MzItLjUyOS0xLjY0NS0uNjItMy4wNzMtLjYycy0xLjgxNS0uNjIxLTEuODE1LTEuMjQxLS4wMTQtMS44My0uMDE0LTIuMDAxYzAtLjA1NS4wMDUtLjA4Ni4wMTQtLjEzLjAyLS4wOTUtLjA1OC0uOTczIDAtMS41OS4wODUtLjkwNi4zODgtMS4yNDEgMS44MTUtMS4yNDFzMi40NC0uMDkyIDMuMDczLS42MmMuNjMzLS41MjkgMi41MjMtMi4yNTMgNC4yNDItMy43MjIgMS4xNTgtLjk4OSAxLjc5Ny0uNTg3IDEuODI5LjYyLjA0MyAxLjYwNyAwIDMuODUgMCA2LjY4MyAwIDIuODMuMDQzIDUuMzU2IDAgNi45NjN6bTIuOTAxLTguNzA0QS44NzUuODc1IDAgMSAxIDE3LjEyIDguODhjLjE3Ni4xNzcuNDEuNDcuNjQuODcyLjM4NC42NzEuNjE2IDEuNDI1LjYxNiAyLjI0N3MtLjIzMiAxLjU3Ni0uNjE1IDIuMjQ3YTQuMiA0LjIgMCAwIDEtLjY0MS44NzIuODc1Ljg3NSAwIDEgMS0xLjIzOC0xLjIzOGMuMDc0LS4wNzMuMjE0LS4yNDkuMzYtLjUwMy4yNDEtLjQyMy4zODQtLjg4Ny4zODQtMS4zNzhzLS4xNDMtLjk1NS0uMzg1LTEuMzc4YTIuNiAyLjYgMCAwIDAtLjM1OS0uNTAzem0zLTJBLjg3NS44NzUgMCAxIDEgMjAuMTIgNi44OGMuMjYzLjI2NC42Mi43NC45NjYgMS40MzIuNTE3IDEuMDMzLjg0MyAyLjI1NS44OSAzLjcxNi0uMDQ3IDEuNDAzLS4zNzMgMi42MjUtLjg5IDMuNjU4LS4zNDYuNjkyLS43MDMgMS4xNjgtLjk2NiAxLjQzMmEuODc1Ljg3NSAwIDEgMS0xLjIzOC0xLjIzOGMuMTM4LS4xMzcuMzgzLS40NjQuNjM5LS45NzYuNDA3LS44MTQuNjY3LTEuNzkuNzA1LTIuODc2LS4wMzgtMS4xNDQtLjI5OC0yLjEyLS43MDUtMi45MzQtLjI1Ni0uNTEyLS41MDEtLjgzOS0uNjM5LS45NzZ6Ii8+PC9zdmc+")}._mk_control_progress{background-color:var(--mk-bgProgressBar,rgba(0,0,0,.2));bottom:var(--side-bottom,0);height:var(--mk-progressHeightPx,3px);left:0;overflow:hidden;position:absolute;width:100%;z-index:100}._mk_control_progress>div{background-color:var(--mk-cProgressBar,hsla(0,0%,100%,.5));height:var(--mk-progressHeightPx,3px);max-width:100%;transition:width .3s linear 0s;width:0}._mk_control_flow[data-state=play],._mk_control_flow[data-state=replay]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGcgZmlsdGVyPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIuMTIiIHN0cm9rZS13aWR0aD0iLjUiIGQ9Ik04LjEzMyA1LjEwNSAxOC42MyAxMS4zNWEuNzUuNzUgMCAwIDEgMCAxLjI4OUw4LjEzNSAxOC44OTRBLjc1Ljc1IDAgMCAxIDcgMTguMjVWNS43NWEuNzUuNzUgMCAwIDEgMS4xMzMtLjY0NXoiLz48L2c+PGRlZnM+PGZpbHRlciBpZD0iYSIgd2lkdGg9IjI4LjUiIGhlaWdodD0iMjYiIHg9IjAiIHk9IjAiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJoYXJkQWxwaGEiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiLz48ZmVPZmZzZXQvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIuNSIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC4xNiAwIi8+PGZlQmxlbmQgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzU5MTBfMTY0NCIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd181OTEwXzE2NDQiIHJlc3VsdD0ic2hhcGUiLz48L2ZpbHRlcj48L2RlZnM+PC9zdmc+")}._mk_control_flow[data-state=pause]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWx0ZXI9InVybCgjYSkiPjxnIGZpbGwtcnVsZT0ibm9uemVybyI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgY2xhc3M9Il9wYXVzZSIvPjxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9Ii4xMiIgc3Ryb2tlLXdpZHRoPSIuNSIgZD0iTTcuMTQ1IDVoMS43MWMuMzk4IDAgLjU0Mi4wNDcuNjg4LjEzNGEuODcuODcgMCAwIDEgLjMzOC4zOGMuMDc4LjE2NC4xMTkuMzI2LjExOS43NzR2MTEuNDI0YzAgLjQ0OC0uMDQxLjYxLS4xMi43NzRxLS4xMTcuMjQ3LS4zMzcuMzhjLS4yMi4xMzMtLjI5LjEzNC0uNjg4LjEzNGgtMS43MWMtLjM5OCAwLS41NDItLjA0Ny0uNjg4LS4xMzRzLS4yNi0uMjE2LS4zMzgtLjM4UzYgMTguMTYgNiAxNy43MTJWNi4yODhjMC0uNDQ4LjA0MS0uNjEuMTItLjc3NGEuODcuODcgMCAwIDEgLjMzNy0uMzhjLjE0Ni0uMDg3LjI5LS4xMzQuNjg4LS4xMzR6bTggMGgxLjcxYy4zOTggMCAuNTQyLjA0Ny42ODguMTM0YS44Ny44NyAwIDAgMSAuMzM4LjM4Yy4wNzguMTY0LjExOS4zMjYuMTE5Ljc3NHYxMS40MjRjMCAuNDQ4LS4wNDEuNjEtLjEyLjc3NGEuODcuODcgMCAwIDEtLjMzNy4zOGMtLjE0Ni4wODctLjI5LjEzNC0uNjg4LjEzNGgtMS43MWMtLjM5OCAwLS41NDItLjA0Ny0uNjg4LS4xMzRhLjg3Ljg3IDAgMCAxLS4zMzgtLjM4Yy0uMDc4LS4xNjQtLjExOS0uMzI2LS4xMTktLjc3NFY2LjI4OGMwLS40NDguMDQxLS42MS4xMi0uNzc0YS44Ny44NyAwIDAgMSAuMzM3LS4zOGMuMTQ2LS4wODcuMjktLjEzNC42ODgtLjEzNHoiLz48L2c+PC9nPjxkZWZzPjxmaWx0ZXIgaWQ9ImEiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgeD0iMCIgeT0iMCIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9ImhhcmRBbHBoYSIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIvPjxmZU9mZnNldC8+PGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMi41Ii8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjE2IDAiLz48ZmVCbGVuZCBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfNTkxMF8xNjQ0Ii8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzU5MTBfMTY0NCIgcmVzdWx0PSJzaGFwZSIvPjwvZmlsdGVyPjwvZGVmcz48L3N2Zz4=")}._mk_control_flow[data-state=ended],._mk_control_flow[data-state=none]{display:none}._mk_adChoices,._mk_adChoices_tab{cursor:default;font-family:Roboto,sans-serif;font-weight:400;overflow:hidden;overscroll-behavior:none}._mk_adChoicesClosed{background-color:var(--mk-bgContent)!important;border:.5px solid var(--mk-cBorder);border-radius:var(--mkext-bRadius-tl,var(--mkext-bRadius,0)) var(--mkext-bRadius-tr,var(--mkext-bRadius,0)) var(--mkext-bRadius-bl,var(--mkext-bRadius,0)) var(--mkext-bRadius-br,var(--mkext-bRadius,0))}._mk_adChoicesClosed[data-tab=closed]{margin:auto}._mk_adChoicesClosed[data-tab=closed] ._mk_adChoices_body{align-content:center;justify-content:center}._mk_adChoicesWrap{display:none;height:calc(var(--mkit-adchoice-height, 100%) - var(--mk-adchoiceTop, 0px) - var(--mk-adchoiceBottom, 0px));pointer-events:none;position:absolute;right:var(--mk-adchoiceRight);top:var(--mk-adchoiceTop);width:var(--mk-adchoiceWidth,100%);z-index:150}._mk_adChoices{background-color:var(--mk-bgAdChoice,#fff);border:1px solid var(--mk-cBorder,rgba(0,0,0,.12));border-radius:var(--mk-adchoiceBorderRadius,0);box-shadow:var(--mk-shadowAdChoice);color:var(--mk-cSubhead,#6d7885)!important;height:100%;pointer-events:all;position:absolute;width:100%}._mk_adChoices_tab{box-sizing:border-box;display:flex;flex-direction:column;font-size:13px;font-weight:400;height:100%;line-height:1.3;overflow-x:hidden;overflow-y:overlay;position:relative;scrollbar-color:var(--mk-cSubhead) var(--mk-bgContent);scrollbar-width:thin;width:100%;z-index:100}._mk_adChoices_tab::-webkit-scrollbar{height:0;width:0}._mk_adChoices_tab::-webkit-scrollbar-track{background:var(--mk-bgContent,#fff)}._mk_adChoices_tab::-webkit-scrollbar-thumb{background-color:var(--mk-cSubhead,#6d7885);border:1px solid var(--mk-cSubhead,#6d7885);border-radius:5px}._mk_adChoices_header{color:var(--mk-cSubhead,#6d7885);display:flex;flex:none;flex-direction:column;font-size:13px;font-weight:600;gap:4px;letter-spacing:.2px;line-height:1.2;padding:10px 8px 4px;width:100%}._mk_adChoices_body{display:flex;flex:1 1 auto;flex-direction:column;height:100%;margin:8px 8px 4px}._mk_adChoices_footer{flex:none;margin:4px 8px 8px}._mk_adChoices_about{font-size:12px;font-weight:400;line-height:1.3}._mk_adChoices_description{margin-bottom:6px;padding-left:var(--avm-button-xpadding,20px);fontweight:400}._mk_adChoices_header_line{box-sizing:border-box;font-size:120%;width:100%}._mk_adChoices_menuExtender{flex-grow:1;width:100%}._mk_adChoices_menuLine{align-items:center;border-radius:8px;box-sizing:border-box!important;color:var(--mk-cMuted,#2c2d2e);cursor:pointer;display:flex;flex-direction:row;gap:8px;height:32px;letter-spacing:.1px;margin:0 -4px;padding:6px 8px;width:border-box}._mk_adChoices_menuLine span{white-space:nowrap;max-lines:1;max-width:270px;overflow:hidden;text-overflow:ellipsis}._mk_adChoices_menuLine svg{flex:0 0 20px;height:20px;width:20px}._mk_adChoices_menuLine:hover{background:var(--mk-bgSecondAlpha);color:var(--mk-сPrimary)}._mk_adChoices_text1{color:#e1e3e6;font-size:120%;line-height:1.25;margin:0 var(--avm-discount2-radius,10px);padding:calc(2px + var(--avm-discount2-tmargin, 12px)) var(--avm-discount2-radius,10px)}._mk_adChoices_text2{color:#969a9f;margin:0 var(--avm-discount2-radius,10px);padding:4px var(--avm-discount2-radius,10px)}._mk_adChoices_close_button{background-color:var(--mkit-overlayDark,rgba(0,0,0,.4));border-radius:11px;cursor:pointer;height:22px;pointer-events:all;position:absolute;right:4px;top:4px;width:22px;z-index:155}._mk_adChoices_close_button:before{content:"";height:30px;position:absolute;right:-4px;top:-4px;width:30px}._mk_freeButton{align-items:center;background-color:var(--mkit-bgAccent,#2688eb);border-radius:11px;color:var(--mkit-cContrast,#fff);cursor:pointer;display:flex;font-size:13px;font-weight:600;height:32px;justify-content:center;padding:8px 16px;width:100%}._mk_freeButton:hover{background-color:var(--mkit-bgAccentHover)}._mk_closeTitle{color:var(--mk-сPrimary);font-size:15px;font-weight:600;text-align:center}._mk_closeInfo{color:var(--mk-cSubhead,#6d7885);text-align:center}._mk_vkAds{margin-top:auto}._mk_freeTextArea{background-color:var(--mkit-bgTextArea);border:1px solid var(--mk-cBorder,rgba(0,0,0,.12));border-radius:11px;box-sizing:border-box;color:var(--mkit-cSecond);flex:1 1 auto;font:14px/1.3 Roboto,sans-serif;height:100%;padding:8px 12px;resize:none;width:100%}._mk_freeTextArea:focus{outline:none}._mk_is_control_wrapper,._mk_proxyNode{overflow:hidden}._mk_is_proxyNode{box-sizing:border-box;display:flex;font-family:Roboto,sans-serif;height:100%;overflow:hidden;overscroll-behavior-y:none!important;position:relative;width:100%;z-index:1;--mk-adchoiceWidth:230px;--mk-adchoiceTop:46px;--mk-adchoiceRight:8px;--mk-sdPadding:0;--mk-adchoiceBottom:8px;--mk-adchoiceBorderRadius:8px;--mk-bgAdChoice:var(--vkui--color_background_content,#fff);--mk-bgSecondAlpha:var(--vkui--color_background_content--hover,#f5f5f7);--mk-сPrimary:var(--vkui--color_text_primary,#000);--mk-cMuted:var(--vkui--color_text_primary,#000);--mk-cBorder:var(--vkui--vkontakte_background_hover_alpha,rgba(174,183,194,.12));--mk-sdFontWeidht:100;--mk-borderRadiusPx:var(--vkui--size_border_radius_paper--regular,12px);--mk-shadowAdChoice:0px 0px 2px 0px var(--vkui--color_image_border_alpha,rgba(0,0,0,.08)),0px 4px 16px 0px var(--vkui--color_image_border_alpha,rgba(0,0,0,.08))}._mk_is_proxyNode *{box-sizing:inherit;-webkit-font-smoothing:antialiased}._mk_is_root{align-self:center;background-color:var(--vkui--color_background_content,#fff);border-radius:var(--mk-borderRadiusPx);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:flex;flex:1 1 auto;flex-direction:column;gap:16px;height:100%;justify-self:stretch;overflow:hidden;padding:var(--mk-paddingPx,20px);width:100%}._mk_is_mainArea{display:flex;flex-direction:var(--mk-direction,row);gap:var(--mk-gapPx,20px);height:var(--mk-mainHeightPx);justify-content:stretch;width:100%}._mk_is_mediaWrap{border-radius:calc(var(--mk-borderRadiusPx)/3*2);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;flex:none;height:var(--mk-mediaHeightPx);max-height:var(--mk-mediaHeightPx);max-width:var(--mk-mediaWidthPx);order:3;outline:.5px solid var(--Stroke-Image-Border-Alpha,rgba(0,0,0,.08));overflow:hidden;position:relative;width:var(--mk-mediaWidthPx);z-index:55}._mk_is_ctaButtonOnMedia ._mk_is_mediaWrap{border-radius:0 0 8px 8px}._mk_is_proxyNode[view=column] ._mk_is_mediaWrap{order:8}._mk_is_media{height:100%;object-fit:contain;position:relative;width:100%;z-index:50}._mk_is_mediaBackground{align-items:center;filter:blur(8px);height:120%;justify-content:center;left:-10%;object-fit:cover;position:absolute;top:-10%;width:120%;will-change:contents;z-index:30}._mk_is_domainArea{align-items:center;background:var(--vkui--color_overlay_primary,rgba(0,0,0,.4));border:.5px solid var(--vkui--color_separator_primary_alpha,rgba(0,0,0,.12));border-radius:6px;display:flex;flex-direction:row;gap:2px;height:24px;left:8px;padding:4px 6px 4px 4px;position:absolute;top:8px;z-index:58}._mk_is_icon{border-radius:4px;height:16px;overflow:hidden;width:16px}._mk_is_domain{color:var(--vkui--color_text_contrast,#fff);font-size:12px;font-weight:400;line-height:14px;max-width:calc(var(--mk-mediaWidthPx) - 48px);white-space:nowrap}._mk_is_header{align-items:center;display:flex;flex-direction:row;gap:6px;height:18px;margin-bottom:14px}._mk_is_headerIcon{color:var(--vkui--color_icon_secondary,#99a2ad);height:16px;width:16px}._mk_is_headerLabel{color:var(--vkui--color_text_subhead,#939393);font-size:14px;font-weight:300;line-height:18px;text-wrap-mode:nowrap;display:flex;flex-direction:row;white-space-collapse:collapse}._mk_is_ageRestrictions:before{content:"•";margin:0 4px}._mk_is_adChoice{color:var(--vkui--color_icon_tertiary,#aeb7c2);cursor:pointer;margin-top:1px}._mk_is_closeBtnWrap{border-radius:50%;cursor:pointer;height:44px;padding:8px;position:absolute;right:6px;top:6px;transition:background-color .15s ease-out;width:44px;z-index:80}._mk_is_closeBtnWrap:hover{background:var(--vkui--vkontakte_background_hover_alpha,rgba(174,183,194,.12))}._mk_is_closeBtn{transition:transform .15s ease-in}._mk_is_closeBtn:hover{transform:rotate(90deg)}._mk_is_closeDelayCountdown{height:28px;position:relative;width:28px}._mk_is_closeDelayCountdown circle{fill:none;transform:rotate(-90deg);stroke-linecap:round;stroke:var(--vkui--color_track_buffer--active,#3f72b0);stroke-dasharray:var(--mk-dasharray,0 1);transition:all .51s linear}._mk_is_closeDelayCountdown:after{color:var(--vkui--color_text_primary,#000);content:attr(data-rest-delay);font-size:15px;font-weight:500;line-height:28px;position:absolute;right:0;text-align:center;top:0;width:28px}._mk_is_closeBtn{background:var(--vkui--vkontakte_background_hover_alpha,rgba(174,183,194,.12));border-radius:50%;color:var(--vkui--vkontakte_color_icon_outline_medium,#818c99);display:none;height:28px;padding:4px;width:28px}._mk_is_closeBtn:hover{color:var(--vkui--color_write_bar_icon--hover,#7c8795)}._mk_is_infoWrap{display:flex;flex-direction:column;gap:6px;height:var(--mk-infoHeightPx);max-height:var(--mk-infoHeightPx);order:var(--mk-infoOrder,5);overflow:hidden;position:relative;width:var(--mk-infoWidthPx)}._mk_is_description,._mk_is_title{display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical}._mk_is_textArea{flex-direction:column;flex-grow:1;gap:var(--mk-infoGapPx,6px);width:var(--mk-infoWidthPx)}._mk_is_title{color:var(--vkui--color_text_primary,#000);font-size:var(--mk-titleFsPx,20px);font-weight:500;letter-spacing:-2%;line-height:var(--mk-titleLineHeightPx,24px);line-clamp:var(--mk-titleLines,3);-webkit-line-clamp:var(--mk-titleLines,3);height:calc(var(--mk-titleLineHeightPx, 24px)*var(--mk-titleLines, 3))}._mk_is_description{color:var(--vkui--color_text_secondary,#666);display:var(--mk-descDisplay,block);font-size:var(--mk-descFsPx,15px);font-weight:400;letter-spacing:-.7%;line-height:var(--mk-descLineHeightPx,20px);margin-top:var(--mk-infoGapPx,6px);line-clamp:var(--mk-descLines,3);-webkit-line-clamp:var(--mk-descLines,3);flex:1 1 auto;height:calc(var(--mk-descLineHeightPx, 20px)*var(--mk-descLines, 3))}._mk_is_ctaButton{align-items:center;background-color:var(--vkui--color_background_accent_themed,#447bba);border-radius:8px;color:var(--vkui--color_text_contrast_themed,#fff);display:flex;flex:none;font-size:var(--mk-ctaFsPx,14px);font-weight:500;height:var(--mk-ctaHeightPx,36px);justify-content:center;justify-self:flex-end;letter-spacing:-1%;line-height:var(--mk-ctaLineHeightPx,18px);margin-top:var(--mk-stubHeightPx);order:10;text-align:center;transition:background-color .3s ease-out;width:100%}._mk_is_ctaButtonOnMedia{--total-bottom-offset:40px;--side-bottom:-40px;--progressHeight:0}._mk_is_ctaButtonOnMedia ._mk_is_ctaButton{bottom:0;left:0;position:absolute;z-index:70}.ctaButton:hover{background-color:var(--vkui--color_background_accent_themed--hover,#4177b5)}.stub{display:var(--mk-stubDisplay,none);justify-self:stretch;order:8}.vkuiDiv{padding:var(--vkui--size_base_padding_vertical--regular,12px) var(--vkui--size_base_padding_horizontal--regular,16px)}'),vkGamesRewards:String('._mk_rw_root{align-self:center;background-color:var(--vkui--color_background_content,#fff);border-radius:var(--mkext-bRadius,var(--mk-borderRadiusPx,0));display:flex;display:-webkit-box;display:-webkit-flex;display:-moz-box;flex:1 1 auto;flex-direction:column;height:100%;justify-self:stretch;overflow:hidden;padding:var(--mk-rootPaddingPx,0);position:relative;width:100%}._mk_rw_root ._mk_adChoices{max-height:332px}._mk_rw_root ._mk_controls{justify-content:flex-end}._mk_rw_root[direction=row] ._mk_rw_ctaInfoButtonWrap{align-items:flex-start}._mk_rw_root[direction=column] ._mk_rw_textArea{text-align:center}._mk_rw_root[view=mobile] ._mk_rw_rightBottomWrap{background:transparent;padding:0;top:7px}._mk_rw_root[view=fullscreen]{gap:var(--mk-rootPaddingPx,20px)}._mk_rw_root[view=fullscreen] ._mk_rw_mediaWrap{border-radius:calc(var(--mk-borderRadiusPx)/3*2)}._mk_rw_root ._mk_control_progress{background:hsla(0,0%,100%,.122);border-radius:1.5px;bottom:22px;left:16px;width:calc(100% - 32px)}._mk_rw_root ._mk_control_progress div{background:#f8a01c}._mk_rw_workArea{display:flex;flex-direction:var(--mk-direction,row);flex-grow:1;gap:var(--mk-areaGapPx,0);position:relative}._mk_rw_mediaWrap{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;flex:none;height:var(--mk-mediaHeightPx);max-height:var(--mk-mediaHeightPx);max-width:var(--mk-mediaWidthPx);outline:.5px solid var(--Stroke-Image-Border-Alpha,rgba(0,0,0,.08));overflow:hidden;position:relative;width:var(--mk-mediaWidthPx);z-index:55}._mk_rw_mediaWrap ._mk_rw_header{background:var(--vkui--color_overlay_primary,rgba(0,0,0,.4));border:.5px solid var(--vkui--color_separator_primary_alpha,rgba(0,0,0,.12));border-radius:9px;color:var(--vkui--color_text_contrast,#fff);justify-items:center;left:var(--mk-menuOffsetPx,16px);padding:6px 9px;position:absolute;top:var(--mk-menuOffsetPx,16px);z-index:110}._mk_rw_media{height:100%;object-fit:contain;position:relative;width:100%;z-index:50}._mk_rw_mediaBackground{align-items:center;filter:blur(8px);height:120%;justify-content:center;left:-10%;object-fit:cover;position:absolute;top:-10%;width:120%;will-change:contents;z-index:30}._mk_rw_controls{bottom:0;justify-content:flex-end;padding-bottom:46px;right:0;width:100%}._mk_rw_controls,._mk_rw_rightBottomWrap{display:flex;flex-direction:row;position:absolute;z-index:110}._mk_rw_rightBottomWrap{gap:16px;padding:4px 14px;right:calc(var(--mk-menuOffsetPx, 16px) + var(--mk-addXOffsetPx, 0px))}._mk_rw_infoWrap{box-sizing:border-box;flex-grow:1;gap:var(--mk-gapPx,6px);height:var(--mk-infoHeightPx);overflow:hidden;padding:var(--mk-vertPaddingPx,20px) var(--mk-horPaddingPx,20px) var(--mk-bottomPaddingPx,20px);position:relative;width:var(--mk-infoWidthPx)}._mk_rw_infoWrap,._mk_rw_textArea{display:flex;flex-direction:column}._mk_rw_textArea{flex:1 1 auto;justify-content:center;width:100%}._mk_rw_textArea ._mk_rw_ctaInfoButtonWrap{margin-top:calc(var(--mk-gapPx, 12px)*2)}._mk_rw_description,._mk_rw_title{display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical}._mk_rw_title{color:var(--vkui--color_text_primary,#fff);font-size:var(--mk-titleFsPx,20px);font-weight:500;letter-spacing:-2%;line-height:var(--mk-titleLineHeightPx,24px);line-clamp:var(--mk-titleLines,3);-webkit-line-clamp:var(--mk-titleLines,3);height:calc(var(--mk-titleLineHeightPx, 24px)*var(--mk-titleLines, 3));max-height:calc(var(--mk-titleLineHeightPx, 24px)*var(--mk-titleLines, 3))}._mk_rw_description{color:var(--vkui--color_text_secondary,#666);display:var(--mk-descDisplay,block);font-size:var(--mk-descFsPx,15px);font-weight:400;letter-spacing:-.7%;line-height:var(--mk-descLineHeightPx,20px);margin-top:var(--mk-gapPx,6px);line-clamp:var(--mk-descLines,3);-webkit-line-clamp:var(--mk-descLines,3);height:calc(var(--mk-descLineHeightPx, 20px)*var(--mk-descLines, 3));max-height:calc(var(--mk-descLineHeightPx, 20px)*var(--mk-descLines, 3))}._mk_rw_ctaInfoButtonWrap{align-items:center;display:flex;flex-direction:column;height:var(--mk-textCtaHeightPx,40px);width:100%}._mk_rw_ctaButton,._mk_rw_ctaInfoButton{background-color:#2688eb;color:#fff;height:var(--mk-textCtaHeightPx,40px)}._mk_rw_ctaButton:hover,._mk_rw_ctaInfoButton:hover{background-color:#356cac}._mk_rw_ctaInfoButton{border-radius:var(--mk-borderRadiusPx,12px);display:inline-flex;font-size:var(--mk-textCtaFSPx,40px);font-weight:600;height:var(--mk-textCtaHeightPx,40px);justify-content:center;line-height:var(--mk-textCtaHeightPx,40px);padding:0 24px;text-align:center;width:unset;width:var(--mk-textCtaWidth,unset)}._mk_rw_domainArea{align-items:center;background:var(--vkui--color_overlay_primary,rgba(0,0,0,.4));border:.5px solid var(--vkui--color_separator_primary_alpha,rgba(0,0,0,.12));border-radius:6px;display:flex;flex-direction:row;gap:2px;height:24px;left:8px;padding:4px 6px 4px 4px;position:absolute;top:8px;z-index:58}._mk_rw_icon{border-radius:4px;height:16px;overflow:hidden;width:16px}._mk_rw_domain{color:var(--vkui--color_text_contrast,#fff);font-size:12px;font-weight:400;line-height:14px;max-width:calc(var(--mk-mediaWidthPx) - 48px);white-space:nowrap}._mk_rw_header{align-items:center;box-sizing:content-box;color:var(--vkui--color_icon_secondary,#99a2ad);display:flex;flex-direction:row;gap:6px;height:18px}._mk_rw_headerIcon{height:16px;margin-top:-2px;width:16px}._mk_rw_headerLabel{font-size:14px;font-weight:300;line-height:18px;text-wrap-mode:nowrap;display:flex;flex-direction:row;white-space-collapse:collapse}._mk_rw_ageRestrictions:before{content:"•";margin:0 4px}._mk_rw_adChoice{cursor:pointer;margin-top:2px}._mk_rw_ctaArea,._mk_rw_rightBottomWrap{align-items:center;background-color:rgba(28,29,30,.8);border-radius:12px;bottom:46px;display:flex;flex-direction:row;height:40px}._mk_rw_ctaArea{animation:loading 2s ease-in-out infinite;background:linear-gradient(120deg,hsla(0,0%,100%,0) 45%,hsla(0,0%,100%,.333) 50%,hsla(0,0%,100%,0) 55%) rgba(28,29,30,.8);background-position-x:180%;background-size:200% 100%;flex-shrink:1;left:var(--mk-menuOffsetPx,16px);max-width:calc(100% - 32px);padding:6px 6px 6px 10px;position:absolute;z-index:130}._mk_rw_ctaLogo{border-radius:50%;flex:none;height:20px;margin-right:8px;overflow:hidden;width:20px}._mk_rw_ctaLinkText{color:#fff;flex-shrink:1;font-size:14px;font-weight:400;line-height:18px;max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._mk_rw_ctaButton{border-radius:8px;font-size:14px;font-weight:500;height:28px;letter-spacing:.15px;line-height:18px;margin-left:12px;padding:5px 16px;transition:transform .2s}._mk_rw_ctaButton:hover{transform:scale(1.035)}._mk_rw_vpaidRunner,._mk_rw_vpaidWrap{border:none;height:100%;margin:0;overflow:hidden;padding:0;position:relative;width:100%}._mk_rw_closeBtnWrap{border-radius:50%;cursor:pointer;height:44px;padding:8px;position:absolute;right:6px;top:6px;transition:background-color .15s ease-out;width:44px;z-index:80}._mk_rw_closeBtnWrap:hover{background:var(--vkui--vkontakte_background_hover_alpha,rgba(174,183,194,.12))}._mk_rw_closeDelayCountdown{height:28px;position:relative;width:28px}._mk_rw_closeDelayCountdown circle{fill:none;transform:rotate(-90deg);stroke-linecap:round;stroke:var(--vkui--color_track_buffer--active,#3f72b0);stroke-dasharray:var(--mk-dasharray,0 1);transition:all .51s linear}._mk_rw_closeDelayCountdown:after{color:var(--vkui--color_text_primary,#000);content:attr(data-rest-delay);font-size:15px;font-weight:500;line-height:28px;position:absolute;right:0;text-align:center;top:0;width:28px}._mk_rw_closeBtn{background:var(--vkui--vkontakte_background_hover_alpha,rgba(174,183,194,.12));border-radius:50%;color:var(--vkui--vkontakte_color_icon_outline_medium,#818c99);display:none;height:28px;padding:4px;width:28px}._mk_rw_closeBtn:hover{color:var(--vkui--color_write_bar_icon--hover,#7c8795)}@keyframes loading{to{background-position-x:-20%}}')},dispatcher:{parse:function(e){var t;if(s(e)&&s(t=this.parsers)&&c(t=t[e.type]))for(var i=0,r=t.length;i<r;i++){var n=d(t[i])?t[i].call(this,e.data):0;if(s(n))return n}},request:function(e){var t,i=e.endpoint||this.store.mainUrl,r=e.url||i+(i.endsWith("/")?"":"/")+e.slot+(e.params?"?"+e.params:"");return v(r)?fetch(r,{headers:{"Content-Type":"text/plain"},credentials:"include"}).then((function(e){if(e.ok)return t=e.headers.get("Content-Type").toLowerCase().includes("xml")?"xml":"json",e.text();throw k.error(568)})).then((function(e){if(!e.trim())throw k.error(569);if("xml"===t)return{type:"xml",data:e};try{return{type:"visit",data:JSON.parse(e)}}catch(e){}return{type:"text",data:e}})).catch((function(e){return G.error(e),Promise.reject(e)})):Promise.reject(k.error(567))}},parsers:{xml:[function(e,t){void 0===t&&(t="preroll");var i=(new DOMParser).parseFromString(e,"text/xml"),r={};i.documentElement.childNodes.forEach((function(e){"tagName"in e&&e.tagName&&(r[e.tagName]=1)}));var n=Object.keys(r).length;if(1!==n&&!r.Error)throw k.error(n?710:569);if(r.Error){var o=function(e){var t=[];if(!(e instanceof NodeList))return t;e.forEach((function(e){var i=e.tagName;if(v(i)&&"#cdata-section"===e.firstChild.nodeName){var r=bt[i],n=p(s(r)?r:{type:r||"?"});n.url=e.firstChild.wholeText,t.push(n)}}))}(i.documentElement.childNodes);throw c(o)&&Q(o[0].url),k.error(1===n?569:710)}return function(e){var t,i,r,n=null===(i=null===(t=e.InLine)||void 0===t?void 0:t.Creatives)||void 0===i?void 0:i.Creative;if(!Array.isArray(n))return v(null===(r=e.Wrapper)||void 0===r?void 0:r.VASTAdTagURI)?[{type:"additionalData",url:e.Wrapper.VASTAdTagURI}]:[];var o=n.filter((function(e){return s(e)&&s(e.Linear)})),a=n.filter((function(e){return s(e)&&s(e.CompanionAds)})),l=o.map((function(t){return function(e,t){var i,r,n,o,a;if(t.Linear){var l={id:t.id,type:"motion-ads",video:{duration:wt(t.Linear.Duration)},trackingLink:null===(r=null===(i=t.Linear.VideoClicks)||void 0===i?void 0:i.ClickThrough)||void 0===r?void 0:r.text,urlToNavigateOnClick:null===(o=null===(n=t.Linear.VideoClicks)||void 0===n?void 0:n.ClickThrough)||void 0===o?void 0:o.text,statistics:yt(e,t),params:s(a=t.Linear.AdParameters)?a.text:v(a=t.Linear.AdParameters)?a:void 0};return function(e,t){var i,r,n=null===(r=null===(i=e.Linear)||void 0===i?void 0:i.MediaFiles)||void 0===r?void 0:r.MediaFile;if(Array.isArray(n)&&n.length){var o=n.find((function(e){return"VPAID"===e.apiFramework}));o?t.vpaid={src:o.text}:t.video.mediafiles=n.map((function(e){return{height:e.height,src:e.text,width:e.width}}))}}(t,l),l}}(e,t)}));return 1===l.length&&1===a.length&&function(e,t){var i,r=t.Companion;c(r)&&(r.forEach((function(t){c(t.StaticResource)&&(e.resources=t.StaticResource.map((function(e){var i={type:e.creativeType,src:e.text};return t.width&&(i.width=t.width),t.height&&(i.height=t.height),i})))})),e.resources&&(e.image=p({type:"static",src:null===(i=e.resources.filter((function(e){return s(e)&&v(e.src)&&v(e.type)&&e.src.startsWith("http")&&e.type.includes("image")})).sort((function(e,t){return(t.width||0)-(e.width||0)}))[0])||void 0===i?void 0:i.src})))}(l[0],a[0].CompanionAds),l}(function(e){var t=e.documentElement.getElementsByTagName("Ad");if(!t||1!==t.length)throw k.error(101);return gt(t[0],3)}(i))}],vpaid:[xt],json:[xt,function(e){if(s(e)&&["video","html","additionalData","video-motion","application/javascript"].includes(e.type)){var t=m();return It.copy.forEach((function(i){return t[i]=e[i]})),It.map.forEach((function(i){return t[i[1]]=e[i[0]]})),v(e.iconUrl)&&(t.icon={type:"static",url:e.iconUrl}),"dark"===e.theme&&(t.isDarkTheme=!0),v(e.specialDisclaimer)?t.disclaimer_id=At[e.specialDisclaimer]:s(e.specialDisclaimer)&&(t.disclaimer_id=e.specialDisclaimer.id||At[e.specialDisclaimer.type],v(e.specialDisclaimer.text)&&(t.disclaimer=e.specialDisclaimer.text)),t}}],visit:[function(e){var t,i=this;if(s(e)&&s(e.sections)&&Object.keys(e.sections).length){var r,n,o=0;if(c(r=null===(t=this.parsers)||void 0===t?void 0:t.json)){var a=p({sections:{},settings:e.settings||{}}),l=function(t){var s=e.sections[t];if(c(s)){var l=a.sections[t]=[];s.forEach((function(e){for(n=0;n<r.length;n++){var t=d(r[n])?r[n].call(i,e):0;if(t){l.push(t),o++;break}}}))}};for(var u in e.sections)l(u);return o?a:void 0}}}],aloneToVisit:function(e,t){var i;return void 0===t&&(t="preroll"),{sections:(i={},i[t]=[],i)}}},creatives:hi});G.log("MotionKit ".concat("VKGames"," npm v. ").concat("1.0.298",":").concat("7598:31"," engine is ready...")),Object.setPrototypeOf(st.prototype,h),Object.setPrototypeOf(rt.prototype,h),Object.setPrototypeOf(ut.prototype,h),Object.setPrototypeOf(k.prototype,h),Object.setPrototypeOf(E.prototype,h),Object.setPrototypeOf(ye.prototype,h),window.MotionKit||window.addEventListener("message",(function(e){if(s(e)&&s(e.data)&&"motion-kit"===e.data.target&&s(ui=e.data.config)){G.table("Received message:",e.data),ui.initMode="message";try{c(window._MotionKit)&&i._dG("_MotionKit",window._MotionKit.filter((function(e){return d(e)||s(e)&&s(e.banner)&&e.banner.id!==ui.banner.id&&e.container!==ui.container})))}catch(e){}dt(ui,ci)}}));var mi={create:function(e,t){var i;if(d(t=null===(i=window.MotionKitSDK)||void 0===i?void 0:i.create)||(t=ct))return t(e,ci)},init:function(e){if((ci=p(e)).dispatcher=lt,ci.asmConfig=pi,G.log("Init, cfg:",ci),ci.noHandleQueue||setTimeout((function(){return e=ci,t=window._MotionKit,i._dG("_MotionKit",[]),void(c(t)&&t.forEach((function(t,i){d(t)?t():s(t)&&(t.initMode="buffer",setTimeout((function(){return dt(t,e)}),15*i))})));var e,t}),15),ci.noWindowEntry){if(s(lt)&&d(lt.init))return lt.init(ci)}else if(s(window))return function(e){Ye=Ye||e;try{window.MotionKit&&!d(window.MotionKit)&&delete window.MotionKit}catch(e){}te(window,"MotionKit")||Object.defineProperties(window,{MotionKit:{value:function(e,t,i){return d(e)?e():ct(e,i||Ye)},enumerable:!1,writable:!1,configurable:!1}});try{!window.MotionKitSDK||s(window.MotionKitSDK)&&d(window.MotionKitSDK.create)||delete window.MotionKitSDK}catch(e){}if(!te(window,"MotionKitSDK")){var t,i={create:function(e,t){return G.debug("MotionKitSDK create:",e,t),ct(e,t||Ye)},init:function(e){return(Ye=p(e)).dispatcher=lt,lt.init(Ye)},getVersion:function(){return"MotionKit ".concat("VKGames"," ver. ").concat("1.0.298",":").concat("7598:31")}};ot.forEach((function(e){return i[e]=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return d(t=lt[e])?t.apply(lt,i):void 0}})),Object.freeze(i),Object.defineProperties(window,{MotionKitSDK:{value:i,enumerable:!1,writable:!1,configurable:!1}})}}(ci),window.MotionKitSDK.init(ci);return Promise.reject(k.error(577))},getVersion:function(){return"MotionKit ".concat("VKGames"," npm v.").concat("1.0.298",":").concat("7598:31")}};ot.forEach((function(e){mi[e]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return d(lt[e])?lt[e].apply(lt,t):k.error(566)}})),s(pi)&&pi.autoInit&&(G.log("Auto init assembly:",pi),(te(window,"MotionKitSDK")?window.MotionKitSDK:mi).init({dispatcher:lt,asmConfig:pi}).then((function(e){return G.log("Auto init success:",e),e})).catch((function(e){G.error("Auto init error:",e)})));const fi=mi},668764:(e,t,i)=>{i.d(t,{Icon16ArrowRightOutline:()=>o});var r=i(474848),n=(i(296540),i(506447));const o=e=>(0,r.jsx)(n.SvgIconRootV2,{viewBox:"0 0 16 16",width:16,height:16,vkuiIconId:"arrow_right_outline_16",vkuiAttrs:{fill:"currentColor"},vkuiProps:e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.53 12.78a.75.75 0 0 1-1.06-1.06l2.97-2.97H2.75a.75.75 0 0 1 0-1.5h8.69L8.47 4.28a.75.75 0 0 1 1.06-1.06l4.25 4.25a.75.75 0 0 1 0 1.06z",clipRule:"evenodd"})})},63305:(e,t,i)=>{i.d(t,{Icon16LogoVkAds:()=>o});var r=i(474848),n=(i(296540),i(506447));const o=e=>(0,r.jsx)(n.SvgIconRootV2,{viewBox:"0 0 16 16",width:16,height:16,vkuiIconId:"logo_vk_ads_16",vkuiAttrs:{fill:"currentColor"},vkuiProps:e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M0 7.68c0-3.62 0-5.43 1.125-6.555S4.06 0 7.68 0h.64c3.62 0 5.43 0 6.555 1.125S16 4.06 16 7.68v.64c0 3.62 0 5.43-1.125 6.555S11.94 16 8.32 16h-.64c-3.62 0-5.43 0-6.555-1.125S0 11.94 0 8.32zm13.871-4.327a.64.64 0 0 1 .41 1.092l-1.5 1.5a.8.8 0 0 1-.659.23l-1.03-.084L9.813 7.37a1.92 1.92 0 1 1-1.106-1.156L9.96 4.96l-.124-1.072a.8.8 0 0 1 .229-.658l1.5-1.5a.64.64 0 0 1 1.092.41l.05 1.145zm-5.443-.455A5.12 5.12 0 1 0 13.1 7.554l-1.708-.143a3.444 3.444 0 1 1-2.767-2.797l-.198-1.716Z",clipRule:"evenodd"})})},95608:(e,t,i)=>{i.d(t,{Icon28SkipForward:()=>o});var r=i(474848),n=(i(296540),i(506447));const o=e=>(0,r.jsx)(n.SvgIconRootV2,{viewBox:"0 0 28 28",width:28,height:28,vkuiIconId:"skip_forward_28",vkuiAttrs:{fill:"none"},vkuiProps:e,children:(0,r.jsx)("path",{fill:"currentColor",d:"M19 12.5c-.313-.193-.712-.402-1.212-.676L10.74 7.963c-1.228-.673-1.843-1.01-2.346-.958-.44.046-.838.268-1.098.611C7 8.01 7 8.688 7 10.046v7.909c0 1.357 0 2.036.297 2.429.26.343.658.565 1.098.61.503.053 1.118-.284 2.346-.957l7.047-3.861c.5-.274.9-.483 1.212-.676v4a1 1 0 1 0 2 0v-11a1 1 0 1 0-2 0z"})})}}])}if("undefined"!=typeof window&&window.partConfigEnabled?.("static_loading_execute_errors"))try{e(),window.stManager?.done?.("dist/web/chunks/3cf5b770.75a2e47e.js")}catch(e){throw window.stManager?.fail?.("dist/web/chunks/3cf5b770.75a2e47e.js",e),e}else e(),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/3cf5b770.75a2e47e.js");