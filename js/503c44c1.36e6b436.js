function e(){"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[17010],{681240:(e,t,i)=>{i.d(t,{MarketBadgeTypeEnumNames:()=>o});const o={DEFAULT:0,CASHBACK:1,OZON:2}},776135:(e,t,i)=>{i.d(t,{MarketMarketItemAvailabilityEnumNames:()=>o});const o={AVAILABLE:0,REMOVED:1,UNAVAILABLE:2}},302451:(e,t,i)=>{i.d(t,{freeMentionReplacerReact:()=>a,replaceFreeMention:()=>s});var o=i(846145),r=i(884921);function s(e,t){return e.replace(o.FREE_MENTION,(e=>{const i=o.FREE_MENTION_LINK.exec(e);if(i){let[e,o,s]=i;const a=r.VK_URL_REGEX.exec(o);return a&&(o=a[4]||"/"),t(o,s)}return e}))}function a(e){return(t,i,o)=>e({key:t,href:i,text:o})}},153078:(e,t,i)=>{i.d(t,{setEndOfContentEditable:()=>r});var o=i(298077);const r=e=>{const t=window.getSelection();t?(t.selectAllChildren(e),t.collapseToEnd()):(0,o.logError)(new Error("setEndOfContentEditable: 'selection' must not be null or undefined"))}},985456:(e,t,i)=>{i.d(t,{CustomScreen:()=>o.CustomScreen,RefSource:()=>o.RefSource});var o=i(30259)},597521:(e,t,i)=>{i.d(t,{isPopUpStickersEnabled:()=>o.isPopUpStickersEnabled});var o=i(224194)},514683:(e,t,i)=>{i.d(t,{setEndOfContentEditable:()=>o.setEndOfContentEditable});var o=i(153078)},336012:(e,t,i)=>{i.d(t,{formatCommentText:()=>d});var o=i(839348),r=i(302451),s=i(148636),a=i(898848),n=i(573859);const d=(e,t=!1)=>{let i=(0,a.clean)(e);return i=(0,r.replaceFreeMention)(i,((e,t)=>`<a href="${e}" rel="noreferrer noopener" target="_blank" data-testid="free-mention-link">${t}</a>`)),i=(0,s.replaceHyperLinks)(i,s.linksReplacer),i=(0,o.replaceMentions)(i),t&&(i=(0,n.emojiToHTML)(i,!0)),i}},872164:(e,t,i)=>{i.d(t,{getAttachmentsString:()=>o});const o=e=>e.map((e=>{switch(e.type){case"photo":return`photo${e.photo.photo_id}`;case"doc":return`doc${e.doc.doc_id}`;case"video":return`video${e.video.video_id}`;case"custom":if("audio"===e.original_type)return`audio${e.custom.audio_id}`;default:return""}})).join(",")},864086:(e,t,i)=>{i.d(t,{getImageSizes:()=>o});const o=e=>Object.keys(e).map((t=>{const[i,o,r]=e[t];return{url:i,src:i,width:o,height:r,type:t}}))},555452:(e,t,i)=>{i.d(t,{getUploadingTitle:()=>o});const o=e=>{const t=e.indexOf("_");return e.slice(-1===t?0:t+1)}},964315:(e,t,i)=>{i.d(t,{formatCommentText:()=>c.formatCommentText,getAttachmentsString:()=>h.getAttachmentsString,getImageSizes:()=>s.getImageSizes,getUploadingTitle:()=>a.getUploadingTitle,isAudioAttachment:()=>n.isAudioAttachment,mapCommentUploadDoc:()=>d.mapCommentUploadDoc,normalizeAttachments:()=>o.normalizeAttachments,parseCommentProps:()=>r.parseCommentProps});var o=i(698808),r=i(915817),s=i(864086),a=i(555452),n=i(799072),d=i(66403),c=i(336012),h=i(872164)},799072:(e,t,i)=>{i.d(t,{isAudioAttachment:()=>o});const o=e=>"custom"===e.type&&"audio"===e.original_type},66403:(e,t,i)=>{i.d(t,{mapCommentUploadDoc:()=>a});var o=i(361121),r=i(864086);const s=({editable:e})=>{if(e)return{photo:{sizes:(0,r.getImageSizes)(e.sizes)}}},a=e=>({type:"doc",doc:{doc_id:e.doc_id,id:(0,o.splitRawId)(e.doc_id).itemId,title:e.title,size:Number(e.size),ext:e.ext,url:e.href,preview:s(e)}})},698808:(e,t,i)=>{i.d(t,{normalizeAttachments:()=>a});var o=i(538522),r=i(866467),s=i(540462);const a=e=>{if(e)return e.reduce(((e,t)=>{const{type:i}=t;let a;switch(i){case"photo":a=(e=>{const t=e.photo;if(!t)return;const i=(0,o.joinRawId)({ownerId:t.owner_id,itemId:t.id}),r=`/photo${i}?list=${t.web_view_token??(0,o.joinRawId)({ownerId:t.owner_id,itemId:t.album_id})}&from=comments`;if(!t.sizes)return;return{type:"photo",photo:{...t,photo_id:i,photo_url:r}}})(t);break;case"video":a=(e=>{const t=e.video;if(!t)return;if(!t.owner_id)return;if(!t.id)return;const i=(0,o.joinRawId)({ownerId:t.owner_id,itemId:t.id}),a=t.access_key||(0,o.joinRawId)({ownerId:t.owner_id,itemId:t.album_id}),n=`/${"short_video"===t.type?"clip":"video"}${i}?list=${a}&from=access_hash`;let d;return(0,s.partConfigEnabled)("interactive_video_redesign_badge_mvk")&&"interactive"===t.type&&(d=(0,r.getLang)("video_interactive_label")),{type:"video",video:{...t,video_id:i,video_url:n,label:d}}})(t);break;case"doc":a=(e=>{const t=e.doc;if(t)return{type:"doc",doc:{...t,doc_id:(0,o.joinRawId)({ownerId:t.owner_id,itemId:t.id})}}})(t);break;case"sticker":a=(e=>{const t=e.sticker;if(t)return{type:"sticker",sticker:t}})(t);break;default:a={type:"custom",original_type:i,custom:t[i]}}return a&&e.push(a),e}),[])}},915817:(e,t,i)=>{i.d(t,{parseCommentProps:()=>s});var o=i(698808);function r(e=[],t=[]){return e.length&&t.length?e.map((e=>{const i=(e=>Object.hasOwn(e,"custom")&&Object.hasOwn(e,"original_type")&&"custom"===e.type)(e)?e.original_type:e.type;return"unsupported"===i?e:t.includes(i)?{type:"custom",original_type:"unsupported",custom:{isUnsupported:!0}}:e})):e}const s=(e,t)=>{const{attachments:i,...s}=e,a=t?.length;return{...s,attachments:a?r((0,o.normalizeAttachments)(i),t):(0,o.normalizeAttachments)(i)}}},233399:(e,t,i)=>{i.d(t,{AnalyticsParamsService:()=>r.AnalyticsParamsService,DeliveryPointsService:()=>r.DeliveryPointsService,GetOwnerDataService:()=>r.GetOwnerDataService,LocalOrderService:()=>r.LocalOrderService,MarketMiniProductCardClickAnalytics:()=>s.MarketMiniProductCardClickAnalytics,MarketMiniProductCardViewAnalytics:()=>s.MarketMiniProductCardViewAnalytics,constructProductLink:()=>o.constructProductLink,convertPriceToFloat:()=>o.convertPriceToFloat,findCategoryById:()=>o.findCategoryById,flatCategoryTree:()=>o.flatCategoryTree,getBadgesConfig:()=>s.getBadgesConfig,getCreateOrderErrorMessageByCode:()=>o.getCreateOrderErrorMessageByCode,getImage:()=>o.getImage,getImageIsomorphic:()=>o.getImageIsomorphic,getImagePaginationConfig:()=>s.getImagePaginationConfig,getMarketProductImgErrorType:()=>s.getMarketProductImgErrorType,getMarketProductTitle:()=>s.getMarketProductTitle,getMiniProductCardPrice:()=>o.getMiniProductCardPrice,getModerationErrorType:()=>s.getModerationErrorType,getPictureConfig:()=>s.getPictureConfig,getStatusBadgeTitle:()=>s.getStatusBadgeTitle,openProductCard:()=>o.openProductCard});var o=i(437573),r=i(613336),s=i(106116)},812532:(e,t,i)=>{i.d(t,{MarketMiniProductCardClickAnalytics:()=>a});var o=i(331635),r=i(132028),s=i(54490);class a{logBaseEvent({event:e,screen:t,item:i}){this.productionStats.send({screen:t,type:"type_click",type_click:{item:i,type:"type_market_click",type_market_click:e}})}addMarketItemToBookmarksClick({screen:e,previousScreen:t,params:i,item:o,refSource:r}){this.logBaseEvent({screen:e,item:o,event:{type:"type_marketplace_add_to_bookmarks_click",previous_screen:t,ref_source:r,type_marketplace_add_to_bookmarks_click:i}})}removeMarketItemToBookmarksClick({screen:e,previousScreen:t,params:i,item:o,refSource:r}){this.logBaseEvent({screen:e,item:o,event:{type:"type_marketplace_remove_from_bookmarks_click",previous_screen:t,ref_source:r,type_marketplace_remove_from_bookmarks_click:i}})}imagePaginationClick({item:e,screen:t,itemMediaIdx:i,previousScreen:o,trafficSource:r,refSource:s}){this.logBaseEvent({screen:t,item:e,event:{type:"type_market_pagination_in_product_tile",previous_screen:o||"other",ref_source:s,type_market_pagination_in_product_tile:{item_media_idx:i??1,traffic_source:r||""}}})}ctaButtonClick({itemId:e,ownerId:t,screen:i,refSource:o,previousScreen:r,params:s}){this.logBaseEvent({screen:i,item:{id:e,owner_id:t,type:"market_item"},event:{type:"type_market_cta_button_click",previous_screen:r||"other",ref_source:o,type_market_cta_button_click:s}})}constructor(e){this.productionStats=e}}a=(0,o.__decorate)([r.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.ProductionStats?Object:s.ProductionStats])],a)},596316:(e,t,i)=>{i.d(t,{MarketMiniProductCardViewAnalytics:()=>a});var o=i(331635),r=i(132028),s=i(54490);class a{logBaseEvent({event:e,item:t,screen:i}){this.productionStats.send({screen:i,type:"type_view",type_view:{item:t,type:"type_market_view",type_market_view:e}})}marketItemView({screen:e,params:t,item:i,previousScreen:o,refSource:r}){this.logBaseEvent({screen:e,item:i,event:{type:"type_marketplace_item_view",previous_screen:o,ref_source:r||"marketplace",analytics_version:1,type_marketplace_item_view:t}})}constructor(e){this.productionStats=e}}a=(0,o.__decorate)([r.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.ProductionStats?Object:s.ProductionStats])],a)},414187:(e,t,i)=>{i.d(t,{MarketMiniProductCardClickAnalytics:()=>o.MarketMiniProductCardClickAnalytics,MarketMiniProductCardViewAnalytics:()=>r.MarketMiniProductCardViewAnalytics});var o=i(812532),r=i(596316)},115102:(e,t,i)=>{i.d(t,{getBadgesConfig:()=>r});var o=i(681240);const r=({badges:e=[]})=>({hasOzon:e.some((({type:e})=>e===o.MarketBadgeTypeEnumNames.OZON))})},220537:(e,t,i)=>{i.d(t,{getImagePaginationConfig:()=>a});var o=i(351118),r=i(908671),s=i(233399);const a=({thumbs:e,itemWidth:t,onClick:i})=>{if(!e||!Array.isArray(e))return{};const a=e.map((e=>{const i=(0,s.getImageIsomorphic)({images:e,width:t,isRetina:(0,o.isRetina)()});if(i)return i.url})).filter((e=>void 0!==e));return 0===a.length?{}:{imagesSrc:a,onPaginationMove:i,formatBulletsAriaLabel:e=>(0,r.formatCount)(e)}}},824330:(e,t,i)=>{i.d(t,{getMarketProductImgErrorType:()=>o});const o=({isBlocked:e=!1,isMuted:t=!1})=>e?"block":t?"mute":void 0},182035:(e,t,i)=>{i.d(t,{getMarketProductTitle:()=>o});const o=({hasModerationStatus:e=!1,isAdult:t=!1,text:i,langs:o})=>e?o.getLang("market_item_is_disabled"):t?o.getLang("market_item_card_component_title_adult"):i},102340:(e,t,i)=>{i.d(t,{getModerationErrorType:()=>r});var o=i(993394);const r=e=>{const t=e.reject_info?.moderation_status,i=e.reject_info?.in_progress,r=0===e.stock_amount,s=0===e.availability;return i?"moderation":e.is_hardblocked?"hard":t===o.MARKET_MODERATION_STATUS.NONE?"moderation":t===o.MARKET_MODERATION_STATUS.SOFT_BLOCKED||r||!s?"soft":t===o.MARKET_MODERATION_STATUS.HARD_BLOCKED?"hard":void 0}},310574:(e,t,i)=>{i.d(t,{getPictureConfig:()=>s});var o=i(351118),r=i(233399);const s=({isAdult:e,item:t,itemWidth:i,href:s,onClick:a,langs:n})=>{const d=t.thumb||[],c=(0,r.getImageIsomorphic)({images:d,width:i,isRetina:(0,o.isRetina)()}),h=e?n.getLang("market_item_card_blurred_image_caption"):t.title;return{src:c?c.url:void 0,alt:h,href:s,onClick:a}}},294485:(e,t,i)=>{i.d(t,{getStatusBadgeTitle:()=>r});var o=i(776135);const r=({item:e,moderationErrorType:t,isAdultConfirmed:i,langs:r})=>{const s=e.is_adult&&!i;if(e.is_owner){const i="base"===e.owner_info?.market_type&&e.availability===o.MarketMarketItemAvailabilityEnumNames.UNAVAILABLE,s=e.availability===o.MarketMarketItemAvailabilityEnumNames.REMOVED||i;return"moderation"===t?r.getLang("market_item_card_component_badge_title_moderation"):"hard"===t?r.getLang("market_item_card_component_badge_title_hard_block"):s?r.getLang("market_classifieds_status_archive"):e.availability===o.MarketMarketItemAvailabilityEnumNames.UNAVAILABLE||0===e.stock_amount?r.getLang("market_single_cart_product_unavailable_text"):void 0}if("hard"!==t&&"moderation"!==t)return s?r.getLang("market_item_card_component_badge_title_adult"):0===e.stock_amount||0!==e.availability?r.getLang("market_single_cart_product_unavailable_text"):void 0}},106116:(e,t,i)=>{i.d(t,{MarketMiniProductCardClickAnalytics:()=>h.MarketMiniProductCardClickAnalytics,MarketMiniProductCardViewAnalytics:()=>h.MarketMiniProductCardViewAnalytics,getBadgesConfig:()=>o.getBadgesConfig,getImagePaginationConfig:()=>r.getImagePaginationConfig,getMarketProductImgErrorType:()=>s.getMarketProductImgErrorType,getMarketProductTitle:()=>a.getMarketProductTitle,getModerationErrorType:()=>n.getModerationErrorType,getPictureConfig:()=>d.getPictureConfig,getStatusBadgeTitle:()=>c.getStatusBadgeTitle});var o=i(115102),r=i(220537),s=i(824330),a=i(182035),n=i(102340),d=i(310574),c=i(294485),h=i(414187)},111995:(e,t,i)=>{i.d(t,{AnalyticsParamsService:()=>d});var o=i(327813),r=i(985456),s=i(225741),a=i(566699),n=i(437573);class d{get refPostId(){return this._refPostId}get refSource(){return this._refSource}get itemIdx(){return this._itemIdx}get screen(){return this._screen}setAdsLabel(e){this._adsLabel=e}get adsLabel(){return this._adsLabel}get previousScreen(){return this._previousScreen}get searchQueryId(){return this._searchQueryId}get query(){return this._query}get sourceUrl(){return this._sourceUrl}get trackCode(){return this._trackCode}get trafficSource(){return this._trafficSource}get adCampaign(){return this._adCampaign}get searchTrackCode(){return this._searchTrackCode}constructor(e,t){(0,o.makeAutoObservable)(this);const i=(0,n.getTrackCodeParams)(e);this._refSource=e.utm_ref_source??e.ref_source??r.RefSource.LINK,this._itemIdx=Number(e.utm_item_idx??e.item_idx)??0,this._previousScreen=e.utm_previous_screen??e.previous_screen??"other",this._screen=e.utm_screen??e.screen??"other",this._adsLabel=e.ads_label,this._searchQueryId=Number(e.utm_search_query_id??e.search_query_id)??0,this._query=e.query??"",this._trackCode=e.utm_track_code??e.track_code??"",this._trafficSource=e.utm_ref??e.utm_traffic_source??e.traffic_source??"",this._refPostId=e.utm__post??e._post,e.search_track_code&&(this._searchTrackCode=e.search_track_code),this._sourceUrl=`${(0,s.getHostName)()}${t}?${(0,a.toQueryString)(i,!0)}`,this._adCampaign={id:i.ad_campaign_id,name:i.ad_campaign,source:i.ad_campaign_source,medium:i.ad_campaign_medium,term:i.ad_campaign_term,content:i.ad_campaign_content}}}},565858:(e,t,i)=>{i.d(t,{DeliveryPointsService:()=>l});var o=i(331635),r=i(327813),s=i(470388),a=i(526957),n=i(955060),d=i(132028);const c="new_request",h={serviceIds:[1,2,3,4,5,6,7],radius:0,totalCount:0,requestCount:0,loadedCount:0,offset:0,cityId:0,point:null,isUseLazyLoad:!0};class l{[d.destroy](){this._reactions.destroy()}setGroupId(e){this._groupId=e}get serviceIds(){return this._config.serviceIds}setServiceIds(e){this._config.serviceIds=e}get deliveryPoints(){return this._deliveryPoints}get filters(){return this._filters}get isFiltersChanged(){for(let e of this._filters.values()){if(e.list?.some((e=>e.is_enabled!==e.default))??!1)return!0}return!1}get isLoading(){return"loading"===this._status||"loadingNext"===this._status}get isError(){return"error"===this._status}get isLoaded(){return"loaded"===this._status}get isNetworkError(){return this._isNetworkError}get requestParams(){let e=0;const t=this._config.totalCount-this._config.loadedCount;e=this._config.loadedCount>0&&t<this._config.requestCount?t:this._config.requestCount;const i={group_id:this._groupId,country_id:1,city_id:this._config.cityId,service_ids:this.serviceIds.join(","),filters:this.filtersString,radius:this._config.radius,count:e,offset:this._config.offset};return this._config.point&&(i.latitude=this._config.point.lat,i.longitude=this._config.point.lng),i}_getDeliveryPointsFailure(e){if(!("type"in e)||"network_error"!==e.type)throw e instanceof Error&&this._errorLogger.log(e),this._setStatus("error"),e;"error"in e&&e?.error!==c&&(this._isNetworkError=!0,this._setStatus("initial"))}async _getNextDeliveryPoints(){this._isNetworkError=!1,this._setStatus("loadingNext"),this._controller?.abort(c);const e=new AbortController;this._controller=e;try{const t={signal:e.signal},{items:i}=await this._marketApi.getCheckoutDeliveryPoints(this.requestParams,t);this._getDeliveryPointsNextSucceed(i)}catch(e){this._getDeliveryPointsFailure(e)}finally{this._controller===e&&(this._controller=null)}}get filtersString(){if(!this._filters.size)return"";const e=[];return this._filters.forEach((t=>{const i=[];t.list?.forEach((e=>{e.is_enabled&&i.push(e.value)})),i.length&&e.push({field:t.field,values:i})})),e.length?JSON.stringify(e):""}_setStatus(e){this._status=e}_resetDeliveryPoints(){this._deliveryPoints=new Map}resetDefaultFilters(){this._filters.forEach((e=>{e.list?.forEach((e=>{e.is_enabled=e.default}))})),this._lastRequest=()=>this._fetchDeliveryPointsWithUpdatedFilters(),this._lastRequest()}_clearFilters(){this._filters=new Map}_getDeliveryPointsSucceed({count:e,items:t,cityGeo:i,filters:o}){this._lastRequest=null,this._isNetworkError=!1,this._resetDeliveryPoints(),e?(this._config.totalCount=e,this._config.offset=t.length,this._config.loadedCount=this._config.offset,this._cityGeo=i,t.forEach((e=>{this._deliveryPoints.set(e.id,e)})),o&&(this._clearFilters(),o.forEach((e=>{this._filters.set(e.field,e)}))),this._config.isUseLazyLoad&&this._config.loadedCount<e?this._setStatus("needLoadNext"):this._setStatus("loaded")):this._setStatus("loaded")}_getDeliveryPointsNextSucceed(e){this._lastRequest=null,this._isNetworkError=!1,e.forEach((e=>{this._deliveryPoints.set(e.id,e)})),this._config.loadedCount=this._config.offset+e.length,this._config.offset=this._config.loadedCount,this._config.loadedCount>=this._config.totalCount?this._setStatus("loaded"):this._setStatus("needLoadNext")}constructor(e,t){this._marketApi=e,this._errorLogger=t,this._controller=new AbortController,this._status="initial",this._groupId=0,this._config=h,this._deliveryPoints=new Map,this._filters=new Map,this._cityGeo=null,this._reactions=new s.ReactionsAggregator,this._lastRequest=null,this._isNetworkError=!1,this.setFilter=e=>{if(0===this._filters.size||!this.isLoaded)throw Error("Фильтры ещё не загружены");let t=!1;for(let i of e.keys()){if(!this._filters.has(i))continue;const o=e.get(i);this._filters.get(i)?.list?.map((e=>(Array.isArray(o)?e.is_enabled=o.includes(e.value):e.is_enabled=o===e.value,t=!0,e)))}t&&this._fetchDeliveryPointsWithUpdatedFilters()},this.toggleFilter=(e,t)=>{if(0===this._filters.size||!this.isLoaded)throw Error("Фильтры ещё не загружены");this._filters.has(e)&&(this._filters.get(e)?.list?.map((e=>(t!==e.value||(e.is_enabled=!e.is_enabled),e))),this._lastRequest=()=>this._fetchDeliveryPointsWithUpdatedFilters(),this._lastRequest())},this.getDeliveryPoints=e=>(this._lastRequest=()=>this._getDeliveryPoints(e),this._getDeliveryPoints(e)),this._getDeliveryPoints=async({cityId:e,lat:t,lng:i,count:o=1e3,radius:r=300,isUseLazyLoad:s=!0})=>{this._isNetworkError=!1,this._setStatus("loading"),this._controller?.abort(c);const a=new AbortController;this._controller=a;try{this._config.point=i&&t?{lng:i,lat:t}:null,this._config.radius=r,this._config.offset=0,this._config.requestCount=Math.min(1e3,o),this._config.cityId=e,this._config.isUseLazyLoad=s,this._config.loadedCount=0;const n={signal:a.signal},{count:d,items:c,city_geo_position:h,filters:l}=await this._marketApi.getCheckoutDeliveryPoints(this.requestParams,n);this._getDeliveryPointsSucceed({count:d,items:c,cityGeo:h,filters:l})}catch(e){this._getDeliveryPointsFailure(e)}finally{this._controller===a&&(this._controller=null)}},this._fetchDeliveryPointsWithUpdatedFilters=async()=>{this._isNetworkError=!1,this._setStatus("loading"),this._controller?.abort(c);const e=new AbortController;this._controller=e;try{const t={signal:e.signal};this._config.totalCount=0,this._config.loadedCount=0,this._config.offset=0;const{count:i,items:o,city_geo_position:r,filters:s}=await this._marketApi.getCheckoutDeliveryPoints(this.requestParams,t);this._getDeliveryPointsSucceed({count:i,items:o,cityGeo:r,filters:s})}catch(e){this._getDeliveryPointsFailure(e)}finally{this._controller===e&&(this._controller=null)}},this.retryLastRequest=()=>{this._lastRequest?.()},(0,r.makeAutoObservable)(this),this._reactions.reaction((()=>0!==this._deliveryPoints.size&&"needLoadNext"===this._status&&{loadedCount:this._config.loadedCount,totalCount:this._config.totalCount}),(e=>{if(!e)return;const{loadedCount:t,totalCount:i}=e;t>0&&t<i&&(this._lastRequest=()=>this._getNextDeliveryPoints(),this._lastRequest())}))}}l=(0,o.__decorate)([d.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.MarketApi?Object:a.MarketApi,void 0===n.ErrorLogger?Object:n.ErrorLogger])],l)},652966:(e,t,i)=>{i.d(t,{GetOwnerDataService:()=>n});var o=i(331635),r=i(327813),s=i(903723),a=i(132028);class n{get ownerGroup(){return this._ownerGroup}get isLoadingOwnerGroup(){return this._isLoadingOwnerGroup}[a.destroy](){this.fetchGroupsByIdsController?.abort("destroy")}constructor(e){this.groupsProvider=e,this._ownerGroup=null,this._isLoadingOwnerGroup=!1,this.fetchGroupsByIdsController=null,this.ensureFetchGroup=async e=>{this.groupsProvider.getGroup(e)||(this._isLoadingOwnerGroup=!0,this.fetchGroupsByIdsController=new AbortController,await this.groupsProvider.fetchGroupsByIds({groupIds:[e],fields:["photo_100"]},{signal:this.fetchGroupsByIdsController.signal})),(0,r.runInAction)((()=>{this._ownerGroup=this.groupsProvider.getGroup(e)??null,this._isLoadingOwnerGroup=!1}))},(0,r.makeAutoObservable)(this)}}n=(0,o.__decorate)([a.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.GroupsProvider?Object:s.GroupsProvider])],n)},105735:(e,t,i)=>{i.d(t,{LocalOrderService:()=>d});var o=i(331635),r=i(327813),s=i(510454),a=i(132028),n=i(622746);class d{getLocalStorageKey({orderUserId:e}){return`${n.LOCAL_STORAGE_PAID_ORDERS_KEY}${e}`}getPaidOrders({orderUserId:e}){try{return JSON.parse(this.localStorage.getItem(this.getLocalStorageKey({orderUserId:e}))||"[]")}catch{return[]}}saveOrderLocalPaid({orderUserId:e,orderId:t}){const i=this.getPaidOrders({orderUserId:e}),o=(new Date).getTime();i.push({id:t,timestamp:o}),i.forEach((e=>{if(o-e.timestamp>=n.INVALIDATE_ORDER_PAID_TIME){const t=i.indexOf(e);i.splice(t,1)}})),this.localStorage.setItem(this.getLocalStorageKey({orderUserId:e}),JSON.stringify(i))}checkOrderLocalPaid({orderUserId:e,orderId:t}){const i=this.getPaidOrders({orderUserId:e}),o=(new Date).getTime(),r=i.find((e=>e.id.toString()===t.toString()));if(!r)return!1;if(o-r.timestamp<n.INVALIDATE_ORDER_PAID_TIME)return!0;const s=i.indexOf(r);return i.splice(s,1),this.localStorage.setItem(this.getLocalStorageKey({orderUserId:e}),JSON.stringify(i)),!1}constructor(e){this.localStorage=e,(0,r.makeAutoObservable)(this)}}d=(0,o.__decorate)([a.scope.transient(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.LocalStorage?Object:s.LocalStorage])],d)},622746:(e,t,i)=>{i.d(t,{INVALIDATE_ORDER_PAID_TIME:()=>o,LOCAL_STORAGE_PAID_ORDERS_KEY:()=>r});const o=12e4,r="market_paid_orders"},752415:(e,t,i)=>{i.d(t,{LocalOrderService:()=>o.LocalOrderService});var o=i(105735)},226276:(e,t,i)=>{var o=i(331635),r=i(327813),s=i(132028),a=i(955060),n=i(84789),d=i(351118),c=i(468073);class h{get selectedItems(){return this._selectedItemsIds}get initialAlbum(){return this._initialAlbum}get albumTitle(){return this._title}get albumIsHidden(){return this._isHidden}get albumIsMain(){return this._isMain}get albumPhoto(){return this._photo}get isPhotoSaving(){return"loading"===this._photoSavingStatus}get isPhotoSavingError(){return"error"===this._photoSavingStatus}setTitle(e){this._title=e}setIsHidden(e){this._isHidden=e}setIsMain(e){this._isMain=e}get isHasUnsavedChanges(){if(this.initialAlbum){if(this.albumTitle!==this.initialAlbum.title)return!0;if(this.albumIsHidden!==Boolean(this.initialAlbum.is_hidden))return!0;if(this.albumIsMain!==Boolean(this.initialAlbum.is_main))return!0;if(this.albumPhoto?.id!==this.initialAlbum.photo?.id)return!0;if(!(0,d.isEqual)(this.selectedItems,this.initialAlbum.all_item_ids))return!0}else if(this.albumTitle||this.albumIsMain||this.albumIsHidden||this.albumPhoto||this.selectedItems.length)return!0;return!1}async uploadMarketAlbumPhoto({file:e,ownerId:t}){this._photoSavingStatus="loading";try{const{upload_url:i}=await this.uploadMarketAlbumPhotoService.fetchUploadUrlServer(t),o=await this.uploadMarketAlbumPhotoService.sendPhotoToServer({upload_url:i,file:e}),[s]=await this.uploadMarketAlbumPhotoService.savePhoto({group_id:c.Ranges.convertOwnerIdToGroupId(t),...o});(0,r.runInAction)((()=>{this._photo=s,this._photoSavingStatus="done"}))}catch(e){(0,r.runInAction)((()=>{this._photoSavingStatus="error"})),this.errorLogger.log(new Error("Upload market album photo failed",{cause:e}))}}async deleteMarketAlbumPhoto(){if(this._photo){this._photoSavingStatus="loading";try{await this.uploadMarketAlbumPhotoService.deletePhoto({owner_id:this._photo.owner_id,photo_id:this._photo.id}),(0,r.runInAction)((()=>{this._photo=void 0,this._photoSavingStatus="done"}))}catch(e){(0,r.runInAction)((()=>{this._photoSavingStatus="error"})),this.errorLogger.log(new Error("Delete market album photo failed",{cause:e}))}}}findIsSelectedItem(e){return this._selectedItemsIds.includes(e)}toggleSelectedItemId(e){this._selectedItemsIds.includes(e)?this._selectedItemsIds=this._selectedItemsIds.filter((t=>t!==e)):this._selectedItemsIds=[...this._selectedItemsIds,e]}setInitialData(e){this._initialAlbum=e,this._title=e.title,this._isHidden=Boolean(e.is_hidden),this._isMain=Boolean(e.is_main),this._photo=e.photo,this._selectedItemsIds=e.all_item_ids||[]}reset(){this._initialAlbum=null,this._title="",this._isHidden=!1,this._isMain=!1,this._photo=void 0,this._selectedItemsIds=[]}constructor(e,t){this.errorLogger=e,this.uploadMarketAlbumPhotoService=t,this._photoSavingStatus="idle",this._initialAlbum=null,this._title="",this._isHidden=!1,this._isMain=!1,this._photo=void 0,this._selectedItemsIds=[],(0,r.makeAutoObservable)(this)}}h=(0,o.__decorate)([s.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===a.ErrorLogger?Object:a.ErrorLogger,void 0===n.UploadMarketAlbumPhotoService?Object:n.UploadMarketAlbumPhotoService])],h)},406938:(e,t,i)=>{i(226276)},613336:(e,t,i)=>{i.d(t,{AnalyticsParamsService:()=>o.AnalyticsParamsService,DeliveryPointsService:()=>r.DeliveryPointsService,GetOwnerDataService:()=>a.GetOwnerDataService,LocalOrderService:()=>s.LocalOrderService});var o=i(111995),r=(i(406938),i(565858)),s=i(752415),a=i(652966)},46611:(e,t,i)=>{i.d(t,{getStickerRichProps:()=>o.getStickerRichProps,isPopupStickerAttachment:()=>o.isPopupStickerAttachment});var o=i(380449)},699572:(e,t,i)=>{i.d(t,{getStickerRichProps:()=>n});var o=i(474848),r=i(938321),s=i(46611),a=i(597521);const n=({attachment:e,popupStore:t,wrapperProps:i={}})=>{if((0,s.isPopupStickerAttachment)(e)&&(0,a.isPopUpStickersEnabled)()){const s=e.sticker.popup.layers;return{wrapperProps:{icon:(0,o.jsx)(r.Icon12Play,{}),iconPosition:"rightRelative",iconWrapperRef:void 0,contentClassName:"popupStickerIcon",onContentClick:e=>{e.stopPropagation();const i=e.target;t?.prepareWithDestroyEvent({layers:s,stickerElement:i})},...i}}}}},380449:(e,t,i)=>{i.d(t,{getStickerRichProps:()=>o.getStickerRichProps,isPopupStickerAttachment:()=>r.isPopupStickerAttachment});var o=i(699572),r=i(257357)},257357:(e,t,i)=>{i.d(t,{isPopupStickerAttachment:()=>s});var o=i(642849),r=i(344527);const s=e=>!!e&&((0,o.isStickerAttachment)(e)&&e?.sticker&&(0,r.isPopupSticker)(e.sticker))},375495:(e,t,i)=>{i.d(t,{InputEmojiButton:()=>n});var o=i(474848),r=i(456921),s=i(351118),a=i(275143);const n=(0,r.observer)((function({className:e,children:t}){const{onMouseEnter:i,onMouseLeave:r,ref:n}=(0,a.useHandleEmojiButton)();return(0,o.jsx)("div",{className:(0,s.classNames)(e,"_emoji_wrap"),children:t({className:"_emoji_btn",ref:n,onMouseEnter:i,onMouseLeave:r})})}))},275143:(e,t,i)=>{i.d(t,{useHandleEmojiButton:()=>r});var o=i(296540);const r=()=>{const e=(0,o.useRef)(null),t=(0,o.useRef)(),i=(0,o.useCallback)((i=>{t.current&&clearTimeout(t.current),t.current=setTimeout((()=>{e.current&&window.Emoji.show(e.current,i)}),300)}),[]),r=(0,o.useCallback)((i=>{t.current&&clearTimeout(t.current),e.current&&window.Emoji.hide(e.current,i)}),[]);return{ref:e,onMouseEnter:i,onMouseLeave:r}}},751423:(e,t,i)=>{i.d(t,{InputEmojiButton:()=>o.InputEmojiButton,useEmoji:()=>r.useEmoji});var o=i(375495),r=i(204356)},204356:(e,t,i)=>{i.d(t,{useEmoji:()=>a});var o=i(296540),r=i(514683),s=i(446327);const a=({inputValue:e,inputRef:t,onChangeInput:i,emojiOpts:a})=>{(0,o.useLayoutEffect)((()=>{t.current&&window.Emoji&&e!==window.Emoji.val(t.current)&&(window.Emoji.val(t.current,window.Emoji.emojiToHTML((0,s.clean)(e))),(0,r.setEndOfContentEditable)(t.current))}),[e]),(0,o.useEffect)((()=>{let e=null;return window.stManager.add([window.jsc("web/emoji.js")],(function(){t?.current?e=window.Emoji.init(t.current,a):console.error("Не удалось инициализировать эмодзи из-за отсутствия ref")})),()=>{e&&window.Emoji&&window.Emoji.destroy(e)}}),[]);return{handleInput:e=>{e.preventDefault();const t=e.target;t instanceof HTMLElement&&window.Emoji&&i(window.Emoji.val(t))}}}},993394:(e,t,i)=>{i.d(t,{MARKET_ITEM_LABEL_ACTION_OPEN_MODAL_TYPE:()=>o,MARKET_MODERATION_STATUS:()=>r});const o="open_modal",r={NONE:0,APPROVED:1,SOFT_BLOCKED:2,HARD_BLOCKED:3,NEED_CUT:4,GOT_RESOLUTION:5}},84789:(e,t,i)=>{i.d(t,{UploadMarketAlbumPhotoService:()=>c});var o=i(331635),r=i(327813),s=i(132028),a=i(468073),n=i(6962),d=i(738150);class c{fetchUploadUrlServer(e){return this.photosApi.getMarketAlbumUploadServer({group_id:a.Ranges.convertOwnerIdToGroupId(e)})}sendPhotoToServer({upload_url:e,file:t}){const i=new FormData;return i.append("file",t,encodeURIComponent(t.name)),(0,d.upload)(e,i)}savePhoto(e){return this.photosApi.saveMarketAlbumPhoto(e)}deletePhoto(e){return this.photosApi.delete(e)}constructor(e){this.photosApi=e,(0,r.makeAutoObservable)(this)}}c=(0,o.__decorate)([s.scope.container(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===n.PhotosApi?Object:n.PhotosApi])],c)},668965:(e,t,i)=>{i.d(t,{AnalyticsStats:()=>a});var o=i(331635),r=i(132028),s=i(71892);class a{getIntId(){return Math.floor(Math.random()*this.MAX_INT32)}getCurrentTime(){return(1e3*Date.now()).toString(10)}constructor(e){this.analytics=e,this.MAX_INT32=2147483647}}a=(0,o.__decorate)([r.scope.global(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[void 0===s.Analytics?Object:s.Analytics])],a)},54490:(e,t,i)=>{i.d(t,{ProductionStats:()=>a});var o=i(331635),r=i(132028),s=i(668965);class a extends s.AnalyticsStats{getLastEvent(){return this.lastEvent}send(e,t){const i={...e,id:this.getIntId(),prev_id:this.getLastEvent()?.id,timestamp:this.getCurrentTime(),url:window.location.href};this.analytics.sendProductionStats(i,t),this.lastEvent=i}}a=(0,o.__decorate)([r.scope.global()],a)},526957:(e,t,i)=>{i.d(t,{MarketApi:()=>a});var o=i(331635),r=i(641569),s=i(132028);class a extends r.ApiNamespace{get namespace(){return"market"}constructor(...e){super(...e),this.addToCart=this.makeMethod("addToCart"),this.clearCart=this.makeMethod("clearCart"),this.get=this.makeMethod("get"),this.getAlbums=this.makeMethod("getAlbums"),this.getAlbumById=this.makeMethod("getAlbumById"),this.search=this.makeMethod("search"),this.searchServices=this.makeMethod("searchServices"),this.addAlbum=this.makeMethod("addAlbum"),this.editAlbum=this.makeMethod("editAlbum"),this.addToAlbum=this.makeMethod("addToAlbum"),this.setAlbumItems=this.makeMethod("setAlbumItems"),this.getAbandonedCarts=this.makeMethod("getAbandonedCarts"),this.getAttendantItems=this.makeMethod("getAttendantItems"),this.getById=this.makeMethod("getById"),this.getButtons=this.makeMethod("getButtons"),this.getQuickMessages=this.makeMethod("getItemCardQuickMessages"),this.getItemCardWeb=this.makeMethod("getItemCardWeb"),this.getRecommendedItems=this.makeMethod("getRecommendedItems"),this.getItemsForAttach=this.makeMethod("getItemsForAttach"),this.getAdult18Plus=this.makeMethod("getAdult18Plus"),this.getCart=this.makeMethod("getCart"),this.getCartTotalQuantity=this.makeMethod("getCartTotalQuantity"),this.getCounters=this.makeMethod("getCounters"),this.getCommunityShopConditions=this.makeMethod("getCommunityShopConditions"),this.getEditUrl=this.makeMethod("getEditUrl"),this.getGroupActivityStatus=this.makeMethod("getGroupActivityStatus"),this.getItemReviews=this.makeMethod("getItemReviews"),this.getSettings=this.makeMethod("getSettings"),this.getServices=this.makeMethod("getServices"),this.getServicesSection=this.makeMethod("getServicesSection"),this.getServicesAlbums=this.makeMethod("getServicesAlbums"),this.delete=this.makeMethod("delete"),this.deleteAlbum=this.makeMethod("deleteAlbum"),this.deletePhoto=this.makeMethod("deletePhoto"),this.hideItem=this.makeMethod("hideItem"),this.removeFromCart=this.makeMethod("removeFromCart"),this.reorderAlbums=this.makeMethod("reorderAlbums"),this.setAsViewed=this.makeMethod("setAsViewed"),this.setDeliverySettings=this.makeMethod("setDeliverySettings"),this.setPaymentsSettings=this.makeMethod("setPaymentsSettings"),this.setSettings=this.makeMethod("setSettings"),this.setUserIsAdult=this.makeMethod("setUserIsAdult"),this.getSellerResponseTime=this.makeMethod("getSellerResponseTime"),this.getStorefront=this.makeMethod("getStorefront"),this.reorderItems=this.makeMethod("reorderItems"),this.createCommunityReview=this.makeMethod("createCommunityReview"),this.getCommunityReview=this.makeMethod("getCommunityReview"),this.getOrderById=this.makeMethod("getOrderById"),this.getOrders=this.makeMethod("getOrders"),this.getGroupOrders=this.makeMethod("getGroupOrders"),this.getOrderPaymentUrl=this.makeMethod("getOrderPaymentURL"),this.updateCommunityReview=this.makeMethod("updateCommunityReview"),this.getCommunityReviews=this.makeMethod("getCommunityReviews"),this.deleteCommunityReview=this.makeMethod("deleteCommunityReview"),this.restore=this.makeMethod("restore"),this.restoreCommunityReview=this.makeMethod("restoreCommunityReview"),this.getComments=this.makeMethod("getComments"),this.deleteComment=this.makeMethod("deleteComment"),this.restoreComment=this.makeMethod("restoreComment"),this.createComment=this.makeMethod("createComment"),this.editComment=this.makeMethod("editComment"),this.getCommunityReviewFriends=this.makeMethod("getCommunityReviewFriends"),this.getCommunityReviewComments=this.makeMethod("getCommunityReviewComments"),this.createCommunityReviewComment=this.makeMethod("createCommunityReviewComment"),this.deleteCommunityReviewComment=this.makeMethod("deleteCommunityReviewComment"),this.restoreCommunityReviewComment=this.makeMethod("restoreCommunityReviewComment"),this.editCommunityReviewComment=this.makeMethod("editCommunityReviewComment"),this.getCheckoutSettings=this.makeMethod("getCheckoutSettings"),this.setCheckoutSettings=this.makeMethod("setCheckoutSettings"),this.getCheckoutDeliveryPoints=this.makeMethod("getCheckoutDeliveryPoints"),this.createOrder=this.makeMethod("createOrder"),this.createCheckoutOrder=this.makeMethod("createCheckoutOrder"),this.getItemsForReview=this.makeMethod("getItemsForReview"),this.getCategories=this.makeMethod("getCategories"),this.createItemReview=this.makeMethod("createItemReview"),this.updateItemReview=this.makeMethod("updateItemReview"),this.getItemReview=this.makeMethod("getItemReview"),this.deleteItemReview=this.makeMethod("deleteItemReview"),this.restoreItemReview=this.makeMethod("restoreItemReview"),this.getItemReviewComments=this.makeMethod("getItemReviewComments"),this.deleteItemReviewComment=this.makeMethod("deleteItemReviewComment"),this.restoreItemReviewComment=this.makeMethod("restoreItemReviewComment"),this.createItemReviewComment=this.makeMethod("createItemReviewComment"),this.getItemsByVideo=this.makeMethod("getItemsByVideo"),this.getCommunityReviewCreateConfig=this.makeMethod("getCommunityReviewCreateConfig"),this.getItemReviewCreateConfig=this.makeMethod("getItemReviewCreateConfig"),this.getCommunityExternalLinkDetails=this.makeMethod("getCommunityExternalLinkDetails"),this.hasPinnedCommunityReview=this.makeMethod("hasPinnedCommunityReview"),this.pinCommunityReview=this.makeMethod("pinCommunityReview"),this.unpinCommunityReview=this.makeMethod("unpinCommunityReview")}}a=(0,o.__decorate)([s.scope.global()],a)},6962:(e,t,i)=>{i.d(t,{PhotosApi:()=>a});var o=i(331635),r=i(132028),s=i(641569);class a extends s.ApiNamespace{get namespace(){return"photos"}constructor(...e){super(...e),this.getAll=this.makeMethod("getAll"),this.agreeBlurRestriction=this.makeMethod("agreeBlurRestriction"),this.getCommunityReviewsUploadServer=this.makeMethod("getCommunityReviewsUploadServer"),this.saveCommunityReviewsPhotos=this.makeMethod("saveCommunityReviewsPhotos"),this.getMarketAlbumUploadServer=this.makeMethod("getMarketAlbumUploadServer"),this.saveMarketAlbumPhoto=this.makeMethod("saveMarketAlbumPhoto"),this.getOwnerPhotoUploadServer=this.makeMethod("getOwnerPhotoUploadServer"),this.saveOwnerPhoto=this.makeMethod("saveOwnerPhoto"),this.getWallUploadServer=this.makeMethod("getWallUploadServer"),this.saveWallPhoto=this.makeMethod("saveWallPhoto"),this.getItemsReviewsUploadServer=this.makeMethod("getItemsReviewsUploadServer"),this.saveItemsReviewsPhotos=this.makeMethod("saveItemsReviewsPhotos"),this.search=this.makeMethod("search"),this.get=this.makeMethod("get"),this.getAlbums=this.makeMethod("getAlbums"),this.getById=this.makeMethod("getById"),this.delete=this.makeMethod("delete"),this.getAlbumsCount=this.makeMethod("getAlbumsCount"),this.getPhotoEditorUploadServer=this.makeMethod("getPhotoEditorUploadServer"),this.savePhotoEditor=this.makeMethod("savePhotoEditor"),this.enhancePhoto=this.makeMethod("enhancePhoto"),this.getEditor=this.makeMethod("getEditor"),this.getEditorData=this.makeMethod("getEditorData"),this.peSaveAnalytics=this.makeMethod("peSaveAnalytics"),this.restoreOriginal=this.makeMethod("restoreOriginal")}}a=(0,o.__decorate)([r.scope.global()],a)},884921:(e,t,i)=>{function o(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}function r(){return o().vk?.__domain||"vk.com"}i.d(t,{VK_URL_REGEX:()=>c,getGlobalObject:()=>o,getHostName:()=>r});const s=e=>e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"),a=(s(r()),["vk.com","vk.ru",r()].filter(((e,t,i)=>i.indexOf(e)===t)).concat(["vkontakte.ru","vk.me","userapi.com"])),n=new RegExp("("+a.map(s).join("|")+")"),d=new RegExp(`([a-zA-Z0-9\\.\\_\\-]+\\.)?${n.source}`),c=new RegExp(`^(https?:\\/\\/)?${d.source}($|\\/(.*))`)},454404:(e,t,i)=>{i.d(t,{LazyStickerRich:()=>d});var o=i(474848),r=i(296540),s=i(220208),a=i(351118);const n=(0,r.lazy)((()=>(0,a.asyncImportLoader)((async()=>{const{StickerRich:e}=await Promise.all([i.e(89631),i.e(66780),i.e(50756),i.e("langs/web/sticker")]).then(i.bind(i,838670));return{default:e}}))));function d(e){const{size:t}=e.baseStickerProps;return(0,o.jsx)(r.Suspense,{fallback:(0,o.jsx)("div",{style:{width:t,height:t},children:(0,o.jsx)(s.Spinner,{})}),children:(0,o.jsx)(n,{...e})})}},344527:(e,t,i)=>{i.d(t,{isBaseSticker:()=>o,isPopupSticker:()=>r});const o=e=>Boolean(e&&"inner_type"in e&&"base_sticker_new"===e.inner_type),r=e=>o(e)&&Boolean(e.popup?.layers)},808586:(e,t,i)=>{i.d(t,{PopupContext:()=>r,usePopupSticker:()=>a,usePopupStickerWithError:()=>s});var o=i(296540);const r=(0,o.createContext)(null);function s(){const e=(0,o.useContext)(r);if(null===e)throw new Error("You have forgotten to wrap your root component with PopupProvider");return e}function a(){const e=(0,o.useContext)(r);return null===e?{popupStore:void 0}:e}},761894:(e,t,i)=>{i.d(t,{ANIMATION_DEDUCTIBLE_DATA_PROPERTY:()=>m,CONTAINER_ID_DATASET_PROPERTY:()=>d,CONTAINER_ID_DATA_DEFAULT_VALUE:()=>s,CONTAINER_ID_DATA_PROPERTY:()=>n,ConflictActionsTypes:()=>T,CustomPopUpLayerTypes:()=>A,DEDUCTIBLE_DATA_PROPERTY:()=>l,DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY:()=>u,DEFAULT_LOOP_LIMIT:()=>C,DEFAULT_PLAYER_OPTIONS:()=>k,DEFAULT_POPUP_CONTAINER_DATA_PROPERTY:()=>_,DEFAULT_POSITION_X:()=>E,DEFAULT_POSITION_Y:()=>S,DEFAULT_SCALE_RATIO:()=>P,DESTROY_ANIMATION_DURATION:()=>b,FULL_SCREEN_CONTAINER_DATA_PROPERTY:()=>h,FULL_SCREEN_DATA_DEFAULT_VALUE:()=>a,MIN_SIZE_FOR_PLAY:()=>w,MIN_SIZE_FOR_SCALE:()=>M,POPUP_LOTTIE_GROUP:()=>R,POPUP_POSITION_DEFAULT_VALUE:()=>p,POPUP_POSITION_PROPERTY:()=>g,POPUP_STICKER_IM_CONTAINER:()=>c,PopUpLayerTypes:()=>y,PopUpPositionTypes:()=>I,SCREEN_MODIFICATOR:()=>v,SPEED_ON_DESTROY:()=>f});var o=i(157951),r=i(351089);const s="common_container",a="body",n="data-popup-sticker-container-id",d=(0,r.dataAttrKeyToDatasetKey)(n),c="popup-sticker-im-container",h="data-popup-sticker-full-screen-container",l="data-popup-sticker-deductible",u="data-popup-sticker-deductible-full-screen",m="data-popup-sticker-animation-deductible",_="data-popup-sticker-use-common",g="data-popup-sticker-position",p="fixed",v="screen",k={speed:1,loop:!0,autoplay:!1,cache:!1,lazyLoading:!0,direction:o.LottiePlayerDirection.FORWARD,strictCache:!0},f=3,y={Gradient:"gradient",FullScreen:"animation_fullscreen",Fixed:"animation_fixed"},A={Background:"background"},I={FullScreen:"fullscreen",Fixed:"fixed",TopFullScreen:"topFullScreen"},C=1,P=1,E="center",S="middle",M=384,w=64,R="Popup",T={ChangeModificator:"changeModificator",DontShow:"dontShow"},b=300},693217:(e,t,i)=>{i.d(t,{findFixedElement:()=>n,getDataAttrs:()=>r,getDeductibleDataAttrs:()=>a,getPopupElementsFromFixedElement:()=>c,getStringDataAttrs:()=>s});var o=i(761894);const r=e=>{const{popupStickerUseCommon:t="false",popupStickerContainerId:i,popupStickerFullScreenContainer:r,popupStickerPosition:s=o.POPUP_POSITION_DEFAULT_VALUE}=e,a={[o.DEFAULT_POPUP_CONTAINER_DATA_PROPERTY]:t,[o.POPUP_POSITION_PROPERTY]:s,[o.CONTAINER_ID_DATA_PROPERTY]:i};return r&&(a[o.FULL_SCREEN_CONTAINER_DATA_PROPERTY]=r),a},s=e=>{let t="";const i=r(e);return Object.entries(i).forEach((([e,i])=>{t+=`${e}='${i}' `})),t.trim()},a=e=>{const{popupStickerDeductible:t,popupStickerDeductibleFullScreen:i}=e,r={};return t&&(r[o.DEDUCTIBLE_DATA_PROPERTY]=t),i&&(r[o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY]=i),r},n=e=>e.closest(`[${o.CONTAINER_ID_DATA_PROPERTY}]`)||document.body;function d(e,t,i,r,s,a=null){let n=[...document.querySelectorAll(`[${t}=${r}]`)];switch(s&&(n=[...n,...document.querySelectorAll(`[${t}=${o.CONTAINER_ID_DATA_DEFAULT_VALUE}]`)]),n.push(i),e){case"lower":case"parent":n=n.sort(((e,t)=>e.getBoundingClientRect().top-t.getBoundingClientRect().top));break;case"upper":n=n.sort(((e,t)=>e.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom))}const d=n.findIndex((e=>e===i));let c;switch(e){case"upper":case"parent":c=n[d-1]||null;break;case"lower":c=n[d+1]||null;break;default:c=n[0]||null}return c||a}const c=(e,t)=>{const{popupStickerContainerId:i,popupStickerPosition:r,popupStickerUseCommon:s}=(e=>{const{popupStickerUseCommon:t="false",popupStickerPosition:i=o.POPUP_POSITION_DEFAULT_VALUE,popupStickerContainerId:r=o.CONTAINER_ID_DATA_DEFAULT_VALUE}=e.dataset;return{popupStickerContainerId:r,popupStickerUseCommon:t,popupStickerPosition:i}})(e);let a="true"===s;return{fixedElement:e,headerElement:d("upper",o.DEDUCTIBLE_DATA_PROPERTY,t,i,a),footerElement:d("lower",o.DEDUCTIBLE_DATA_PROPERTY,t,i,a),fullScreenElement:d("parent",o.FULL_SCREEN_CONTAINER_DATA_PROPERTY,t,i,a,document.body),fullScreenHeaderElement:d("upper",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,i,a),fullScreenFooterElement:d("lower",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,i,a),animationFooterElement:d("lower",o.ANIMATION_DEDUCTIBLE_DATA_PROPERTY,t,i,a),position:r}}},351089:(e,t,i)=>{i.d(t,{dataAttrKeyToDatasetKey:()=>o});const o=e=>e.slice(5).split("-").map(((e,t)=>0!==t?e.charAt(0).toUpperCase()+e.slice(1):e)).join("")},650416:(e,t,i)=>{i.d(t,{setRef:()=>o});const o=(e,t)=>{t&&("function"==typeof t?t(e):t.hasOwnProperty("current")&&(t.current=e))}},104386:(e,t,i)=>{i.d(t,{getValidateLengthMessage:()=>o});const o=({value:e,maxLength:t,diffForRemainder:i=100,getExceededLengthLabel:o,getRemainingLengthLabel:r})=>{const s=e.trim().length||0,a=s>t-i,n=s>t,d=Math.abs(s-t),c=t-s;return n?o(d):a?r(c):null}},449522:(e,t,i)=>{i.d(t,{Icon20SmileOutline:()=>s});var o=i(474848),r=(i(296540),i(506447));const s=e=>(0,o.jsx)(r.SvgIconRootV2,{viewBox:"0 0 20 20",width:20,height:20,vkuiIconId:"smile_outline_20",vkuiAttrs:{fill:"currentColor"},vkuiProps:e,children:(0,o.jsx)("path",{d:"M10 1.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17M10 3a7 7 0 1 0 0 14 7 7 0 0 0 0-14m3.067 9.056c.3.286.312.76.027 1.06a4 4 0 0 1-.855.654A4.36 4.36 0 0 1 10 14.4a4.36 4.36 0 0 1-2.239-.63 4 4 0 0 1-.854-.653.75.75 0 0 1 1.004-1.109l.197.18c.098.083.239.186.417.292.446.263.942.42 1.475.42s1.029-.157 1.475-.42c.178-.106.32-.21.417-.292l.115-.105a.75.75 0 0 1 1.06-.027M7.625 7.25a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25m4.75 0a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25"})})}}])}if("undefined"!=typeof window&&window.partConfigEnabled?.("static_loading_execute_errors"))try{e(),window.stManager?.done?.("dist/web/chunks/503c44c1.36e6b436.js")}catch(e){throw window.stManager?.fail?.("dist/web/chunks/503c44c1.36e6b436.js",e),e}else e(),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/503c44c1.36e6b436.js");